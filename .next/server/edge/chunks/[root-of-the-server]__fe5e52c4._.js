(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["chunks/[root-of-the-server]__fe5e52c4._.js",245106,(e,t,r)=>{"use strict";var n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o={},l={RequestCookies:()=>g,ResponseCookies:()=>m,parseCookie:()=>d,parseSetCookie:()=>h,stringifyCookie:()=>u};for(var c in l)n(o,c,{get:l[c],enumerable:!0});function u(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),n=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===r.length?n:`${n}; ${r.join("; ")}`}function d(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[n,i]=[r.slice(0,e),r.slice(e+1)];try{t.set(n,decodeURIComponent(null!=i?i:"true"))}catch{}}return t}function h(e){if(!e)return;let[[t,r],...n]=d(e),{domain:i,expires:a,httponly:s,maxage:o,path:l,samesite:c,secure:u,partitioned:h,priority:g}=Object.fromEntries(n.map(([e,t])=>[e.toLowerCase().replace(/-/g,""),t]));{var m,y,b={name:t,value:decodeURIComponent(r),domain:i,...a&&{expires:new Date(a)},...s&&{httpOnly:!0},..."string"==typeof o&&{maxAge:Number(o)},path:l,...c&&{sameSite:p.includes(m=(m=c).toLowerCase())?m:void 0},...u&&{secure:!0},...g&&{priority:f.includes(y=(y=g).toLowerCase())?y:void 0},...h&&{partitioned:!0}};let e={};for(let t in b)b[t]&&(e[t]=b[t]);return e}}t.exports=((e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of a(t))s.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(o=i(t,l))||o.enumerable});return e})(n({},"__esModule",{value:!0}),o);var p=["strict","lax","none"],f=["low","medium","high"],g=class{constructor(e){this._parsed=new Map,this._headers=e;const t=e.get("cookie");if(t)for(const[e,r]of d(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([e,t])=>u(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>u(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},m=class{constructor(e){var t,r,n;this._parsed=new Map,this._headers=e;const i=null!=(n=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?n:[];for(const e of Array.isArray(i)?i:function(e){if(!e)return[];var t,r,n,i,a,s=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,a=!1;l();)if(","===(r=e.charAt(o))){for(n=o,o+=1,l(),i=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(a=!0,o=i,s.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!a||o>=e.length)&&s.push(e.substring(t,e.length))}return s}(i)){const t=h(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,r,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,i=this._parsed;return i.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...n})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=u(r);t.append("set-cookie",e)}}(i,this._headers),this}delete(...e){let[t,r]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0]];return this.set({...r,name:t,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(u).join("; ")}}},643003,e=>{"use strict";let t=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class r{disable(){throw t}getStore(){}run(){throw t}exit(){throw t}enterWith(){throw t}static bind(e){return e}}let n="u">typeof globalThis&&globalThis.AsyncLocalStorage;function i(){return n?new n:new r}function a(e){return n?n.bind(e):r.bind(e)}function s(){return n?n.snapshot():function(e,...t){return e(...t)}}e.s(["bindSnapshot",()=>a,"createAsyncLocalStorage",()=>i,"createSnapshot",()=>s])},136965,(e,t,r)=>{(()=>{"use strict";let r,n,i,a,s;var o,l,c,u,d,h,p,f,g,m,y,b,w,_,v,x,E={491:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;let n=r(223),i=r(172),a=r(930),s="context",o=new n.NoopContextManager;class l{static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalContextManager(e){return(0,i.registerGlobal)(s,e,a.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,r,...n){return this._getContextManager().with(e,t,r,...n)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,i.getGlobal)(s)||o}disable(){this._getContextManager().disable(),(0,i.unregisterGlobal)(s,a.DiagAPI.instance())}}t.ContextAPI=l},930:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;let n=r(56),i=r(912),a=r(957),s=r(172);class o{constructor(){function e(e){return function(...t){let r=(0,s.getGlobal)("diag");if(r)return r[e](...t)}}const t=this;t.setLogger=(e,r={logLevel:a.DiagLogLevel.INFO})=>{var n,o,l;if(e===t){let e=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(n=e.stack)?n:e.message),!1}"number"==typeof r&&(r={logLevel:r});let c=(0,s.getGlobal)("diag"),u=(0,i.createLogLevelDiagLogger)(null!=(o=r.logLevel)?o:a.DiagLogLevel.INFO,e);if(c&&!r.suppressOverrideMessage){let e=null!=(l=Error().stack)?l:"<failed to generate stacktrace>";c.warn(`Current logger will be overwritten from ${e}`),u.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,s.registerGlobal)("diag",u,t,!0)},t.disable=()=>{(0,s.unregisterGlobal)("diag",t)},t.createComponentLogger=e=>new n.DiagComponentLogger(e),t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}static instance(){return this._instance||(this._instance=new o),this._instance}}t.DiagAPI=o},653:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAPI=void 0;let n=r(660),i=r(172),a=r(930),s="metrics";class o{static getInstance(){return this._instance||(this._instance=new o),this._instance}setGlobalMeterProvider(e){return(0,i.registerGlobal)(s,e,a.DiagAPI.instance())}getMeterProvider(){return(0,i.getGlobal)(s)||n.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){(0,i.unregisterGlobal)(s,a.DiagAPI.instance())}}t.MetricsAPI=o},181:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;let n=r(172),i=r(874),a=r(194),s=r(277),o=r(369),l=r(930),c="propagation",u=new i.NoopTextMapPropagator;class d{constructor(){this.createBaggage=o.createBaggage,this.getBaggage=s.getBaggage,this.getActiveBaggage=s.getActiveBaggage,this.setBaggage=s.setBaggage,this.deleteBaggage=s.deleteBaggage}static getInstance(){return this._instance||(this._instance=new d),this._instance}setGlobalPropagator(e){return(0,n.registerGlobal)(c,e,l.DiagAPI.instance())}inject(e,t,r=a.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,r)}extract(e,t,r=a.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,n.unregisterGlobal)(c,l.DiagAPI.instance())}_getGlobalPropagator(){return(0,n.getGlobal)(c)||u}}t.PropagationAPI=d},997:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;let n=r(172),i=r(846),a=r(139),s=r(607),o=r(930),l="trace";class c{constructor(){this._proxyTracerProvider=new i.ProxyTracerProvider,this.wrapSpanContext=a.wrapSpanContext,this.isSpanContextValid=a.isSpanContextValid,this.deleteSpan=s.deleteSpan,this.getSpan=s.getSpan,this.getActiveSpan=s.getActiveSpan,this.getSpanContext=s.getSpanContext,this.setSpan=s.setSpan,this.setSpanContext=s.setSpanContext}static getInstance(){return this._instance||(this._instance=new c),this._instance}setGlobalTracerProvider(e){let t=(0,n.registerGlobal)(l,this._proxyTracerProvider,o.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t}getTracerProvider(){return(0,n.getGlobal)(l)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,n.unregisterGlobal)(l,o.DiagAPI.instance()),this._proxyTracerProvider=new i.ProxyTracerProvider}}t.TraceAPI=c},277:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getActiveBaggage=t.getBaggage=void 0;let n=r(491),i=(0,r(780).createContextKey)("OpenTelemetry Baggage Key");function a(e){return e.getValue(i)||void 0}t.getBaggage=a,t.getActiveBaggage=function(){return a(n.ContextAPI.getInstance().active())},t.setBaggage=function(e,t){return e.setValue(i,t)},t.deleteBaggage=function(e){return e.deleteValue(i)}},993:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;class r{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){let t=this._entries.get(e);if(t)return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map(([e,t])=>[e,t])}setEntry(e,t){let n=new r(this._entries);return n._entries.set(e,t),n}removeEntry(e){let t=new r(this._entries);return t._entries.delete(e),t}removeEntries(...e){let t=new r(this._entries);for(let r of e)t._entries.delete(r);return t}clear(){return new r}}t.BaggageImpl=r},830:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;let n=r(930),i=r(993),a=r(830),s=n.DiagAPI.instance();t.createBaggage=function(e={}){return new i.BaggageImpl(new Map(Object.entries(e)))},t.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(s.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:a.baggageEntryMetadataSymbol,toString:()=>e}}},67:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.context=void 0,t.context=r(491).ContextAPI.getInstance()},223:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;let n=r(780);t.NoopContextManager=class{active(){return n.ROOT_CONTEXT}with(e,t,r,...n){return t.call(r,...n)}bind(e,t){return t}enable(){return this}disable(){return this}}},780:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0,t.createContextKey=function(e){return Symbol.for(e)};class r{constructor(e){const t=this;t._currentContext=e?new Map(e):new Map,t.getValue=e=>t._currentContext.get(e),t.setValue=(e,n)=>{let i=new r(t._currentContext);return i._currentContext.set(e,n),i},t.deleteValue=e=>{let n=new r(t._currentContext);return n._currentContext.delete(e),n}}}t.ROOT_CONTEXT=new r},506:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.diag=void 0,t.diag=r(930).DiagAPI.instance()},56:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;let n=r(172);function i(e,t,r){let i=(0,n.getGlobal)("diag");if(i)return r.unshift(t),i[e](...r)}t.DiagComponentLogger=class{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return i("debug",this._namespace,e)}error(...e){return i("error",this._namespace,e)}info(...e){return i("info",this._namespace,e)}warn(...e){return i("warn",this._namespace,e)}verbose(...e){return i("verbose",this._namespace,e)}}},972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;let r=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];t.DiagConsoleLogger=class{constructor(){for(let e=0;e<r.length;e++)this[r[e].n]=function(e){return function(...t){if(console){let r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}(r[e].c)}}},912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;let n=r(957);t.createLogLevelDiagLogger=function(e,t){function r(r,n){let i=t[r];return"function"==typeof i&&e>=n?i.bind(t):function(){}}return e<n.DiagLogLevel.NONE?e=n.DiagLogLevel.NONE:e>n.DiagLogLevel.ALL&&(e=n.DiagLogLevel.ALL),t=t||{},{error:r("error",n.DiagLogLevel.ERROR),warn:r("warn",n.DiagLogLevel.WARN),info:r("info",n.DiagLogLevel.INFO),debug:r("debug",n.DiagLogLevel.DEBUG),verbose:r("verbose",n.DiagLogLevel.VERBOSE)}}},957:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0,(r=t.DiagLogLevel||(t.DiagLogLevel={}))[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"},172:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;let n=r(200),i=r(521),a=r(130),s=i.VERSION.split(".")[0],o=Symbol.for(`opentelemetry.js.api.${s}`),l=n._globalThis;t.registerGlobal=function(e,t,r,n=!1){var a;let s=l[o]=null!=(a=l[o])?a:{version:i.VERSION};if(!n&&s[e]){let t=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(t.stack||t.message),!1}if(s.version!==i.VERSION){let t=Error(`@opentelemetry/api: Registration of version v${s.version} for ${e} does not match previously registered API v${i.VERSION}`);return r.error(t.stack||t.message),!1}return s[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${i.VERSION}.`),!0},t.getGlobal=function(e){var t,r;let n=null==(t=l[o])?void 0:t.version;if(n&&(0,a.isCompatible)(n))return null==(r=l[o])?void 0:r[e]},t.unregisterGlobal=function(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${i.VERSION}.`);let r=l[o];r&&delete r[e]}},130:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;let n=r(521),i=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function a(e){let t=new Set([e]),r=new Set,n=e.match(i);if(!n)return()=>!1;let a={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=a.prerelease)return function(t){return t===e};function s(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;let n=e.match(i);if(!n)return s(e);let o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=o.prerelease||a.major!==o.major)return s(e);if(0===a.major)return a.minor===o.minor&&a.patch<=o.patch?(t.add(e),!0):s(e);return a.minor<=o.minor?(t.add(e),!0):s(e)}}t._makeCompatibilityCheck=a,t.isCompatible=a(n.VERSION)},886:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.metrics=void 0,t.metrics=r(653).MetricsAPI.getInstance()},901:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ValueType=void 0,(r=t.ValueType||(t.ValueType={}))[r.INT=0]="INT",r[r.DOUBLE=1]="DOUBLE"},102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopMeter=t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;class r{createHistogram(e,r){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,r){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,r){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,r){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,r){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,r){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}t.NoopMeter=r;class n{}t.NoopMetric=n;class i extends n{add(e,t){}}t.NoopCounterMetric=i;class a extends n{add(e,t){}}t.NoopUpDownCounterMetric=a;class s extends n{record(e,t){}}t.NoopHistogramMetric=s;class o{addCallback(e){}removeCallback(e){}}t.NoopObservableMetric=o;class l extends o{}t.NoopObservableCounterMetric=l;class c extends o{}t.NoopObservableGaugeMetric=c;class u extends o{}t.NoopObservableUpDownCounterMetric=u,t.NOOP_METER=new r,t.NOOP_COUNTER_METRIC=new i,t.NOOP_HISTOGRAM_METRIC=new s,t.NOOP_UP_DOWN_COUNTER_METRIC=new a,t.NOOP_OBSERVABLE_COUNTER_METRIC=new l,t.NOOP_OBSERVABLE_GAUGE_METRIC=new c,t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new u,t.createNoopMeter=function(){return t.NOOP_METER}},660:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;let n=r(102);class i{getMeter(e,t,r){return n.NOOP_METER}}t.NoopMeterProvider=i,t.NOOP_METER_PROVIDER=new i},200:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(46),t)},651:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r._globalThis=void 0,r._globalThis="object"==typeof globalThis?globalThis:e.g},46:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(651),t)},939:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.propagation=void 0,t.propagation=r(181).PropagationAPI.getInstance()},874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0,t.NoopTextMapPropagator=class{inject(e,t){}extract(e,t){return e}fields(){return[]}}},194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get(e,t){if(null!=e)return e[t]},keys:e=>null==e?[]:Object.keys(e)},t.defaultTextMapSetter={set(e,t,r){null!=e&&(e[t]=r)}}},845:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trace=void 0,t.trace=r(997).TraceAPI.getInstance()},403:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;let n=r(476);t.NonRecordingSpan=class{constructor(e=n.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}}},614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;let n=r(491),i=r(607),a=r(403),s=r(139),o=n.ContextAPI.getInstance();t.NoopTracer=class{startSpan(e,t,r=o.active()){var n;if(null==t?void 0:t.root)return new a.NonRecordingSpan;let l=r&&(0,i.getSpanContext)(r);return"object"==typeof(n=l)&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&(0,s.isSpanContextValid)(l)?new a.NonRecordingSpan(l):new a.NonRecordingSpan}startActiveSpan(e,t,r,n){let a,s,l;if(arguments.length<2)return;2==arguments.length?l=t:3==arguments.length?(a=t,l=r):(a=t,s=r,l=n);let c=null!=s?s:o.active(),u=this.startSpan(e,a,c),d=(0,i.setSpan)(c,u);return o.with(d,l,void 0,u)}}},124:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;let n=r(614);t.NoopTracerProvider=class{getTracer(e,t,r){return new n.NoopTracer}}},125:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;let n=new(r(614)).NoopTracer;t.ProxyTracer=class{constructor(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}startSpan(e,t,r){return this._getTracer().startSpan(e,t,r)}startActiveSpan(e,t,r,n){let i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)}_getTracer(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):n}}},846:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;let n=r(125),i=new(r(124)).NoopTracerProvider;t.ProxyTracerProvider=class{getTracer(e,t,r){var i;return null!=(i=this.getDelegateTracer(e,t,r))?i:new n.ProxyTracer(this,e,t,r)}getDelegate(){var e;return null!=(e=this._delegate)?e:i}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,r){var n;return null==(n=this._delegate)?void 0:n.getTracer(e,t,r)}}},996:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0,(r=t.SamplingDecision||(t.SamplingDecision={}))[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"},607:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getActiveSpan=t.getSpan=void 0;let n=r(780),i=r(403),a=r(491),s=(0,n.createContextKey)("OpenTelemetry Context Key SPAN");function o(e){return e.getValue(s)||void 0}function l(e,t){return e.setValue(s,t)}t.getSpan=o,t.getActiveSpan=function(){return o(a.ContextAPI.getInstance().active())},t.setSpan=l,t.deleteSpan=function(e){return e.deleteValue(s)},t.setSpanContext=function(e,t){return l(e,new i.NonRecordingSpan(t))},t.getSpanContext=function(e){var t;return null==(t=o(e))?void 0:t.spanContext()}},325:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStateImpl=void 0;let n=r(564);class i{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce((e,t)=>{let r=t.trim(),i=r.indexOf("=");if(-1!==i){let a=r.slice(0,i),s=r.slice(i+1,t.length);(0,n.validateKey)(a)&&(0,n.validateValue)(s)&&e.set(a,s)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new i;return e._internalState=new Map(this._internalState),e}}t.TraceStateImpl=i},564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;let r="[_0-9a-z-*/]",n=`[a-z]${r}{0,255}`,i=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`,a=RegExp(`^(?:${n}|${i})$`),s=/^[ -~]{0,255}[!-~]$/,o=/,|=/;t.validateKey=function(e){return a.test(e)},t.validateValue=function(e){return s.test(e)&&!o.test(e)}},98:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTraceState=void 0;let n=r(325);t.createTraceState=function(e){return new n.TraceStateImpl(e)}},476:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;let n=r(475);t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.TraceFlags.NONE}},357:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0,(r=t.SpanKind||(t.SpanKind={}))[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"},139:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;let n=r(476),i=r(403),a=/^([0-9a-f]{32})$/i,s=/^[0-9a-f]{16}$/i;function o(e){return a.test(e)&&e!==n.INVALID_TRACEID}function l(e){return s.test(e)&&e!==n.INVALID_SPANID}t.isValidTraceId=o,t.isValidSpanId=l,t.isSpanContextValid=function(e){return o(e.traceId)&&l(e.spanId)},t.wrapSpanContext=function(e){return new i.NonRecordingSpan(e)}},847:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0,(r=t.SpanStatusCode||(t.SpanStatusCode={}))[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"},475:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0,(r=t.TraceFlags||(t.TraceFlags={}))[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"},521:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.6.0"}},S={};function k(e){var t=S[e];if(void 0!==t)return t.exports;var r=S[e]={exports:{}},n=!0;try{E[e].call(r.exports,r,r.exports,k),n=!1}finally{n&&delete S[e]}return r.exports}k.ab="/ROOT/node_modules/.pnpm/next@16.1.4_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/next/dist/compiled/@opentelemetry/api/";var T={};Object.defineProperty(T,"__esModule",{value:!0}),T.trace=T.propagation=T.metrics=T.diag=T.context=T.INVALID_SPAN_CONTEXT=T.INVALID_TRACEID=T.INVALID_SPANID=T.isValidSpanId=T.isValidTraceId=T.isSpanContextValid=T.createTraceState=T.TraceFlags=T.SpanStatusCode=T.SpanKind=T.SamplingDecision=T.ProxyTracerProvider=T.ProxyTracer=T.defaultTextMapSetter=T.defaultTextMapGetter=T.ValueType=T.createNoopMeter=T.DiagLogLevel=T.DiagConsoleLogger=T.ROOT_CONTEXT=T.createContextKey=T.baggageEntryMetadataFromString=void 0,o=k(369),Object.defineProperty(T,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return o.baggageEntryMetadataFromString}}),l=k(780),Object.defineProperty(T,"createContextKey",{enumerable:!0,get:function(){return l.createContextKey}}),Object.defineProperty(T,"ROOT_CONTEXT",{enumerable:!0,get:function(){return l.ROOT_CONTEXT}}),c=k(972),Object.defineProperty(T,"DiagConsoleLogger",{enumerable:!0,get:function(){return c.DiagConsoleLogger}}),u=k(957),Object.defineProperty(T,"DiagLogLevel",{enumerable:!0,get:function(){return u.DiagLogLevel}}),d=k(102),Object.defineProperty(T,"createNoopMeter",{enumerable:!0,get:function(){return d.createNoopMeter}}),h=k(901),Object.defineProperty(T,"ValueType",{enumerable:!0,get:function(){return h.ValueType}}),p=k(194),Object.defineProperty(T,"defaultTextMapGetter",{enumerable:!0,get:function(){return p.defaultTextMapGetter}}),Object.defineProperty(T,"defaultTextMapSetter",{enumerable:!0,get:function(){return p.defaultTextMapSetter}}),f=k(125),Object.defineProperty(T,"ProxyTracer",{enumerable:!0,get:function(){return f.ProxyTracer}}),g=k(846),Object.defineProperty(T,"ProxyTracerProvider",{enumerable:!0,get:function(){return g.ProxyTracerProvider}}),m=k(996),Object.defineProperty(T,"SamplingDecision",{enumerable:!0,get:function(){return m.SamplingDecision}}),y=k(357),Object.defineProperty(T,"SpanKind",{enumerable:!0,get:function(){return y.SpanKind}}),b=k(847),Object.defineProperty(T,"SpanStatusCode",{enumerable:!0,get:function(){return b.SpanStatusCode}}),w=k(475),Object.defineProperty(T,"TraceFlags",{enumerable:!0,get:function(){return w.TraceFlags}}),_=k(98),Object.defineProperty(T,"createTraceState",{enumerable:!0,get:function(){return _.createTraceState}}),v=k(139),Object.defineProperty(T,"isSpanContextValid",{enumerable:!0,get:function(){return v.isSpanContextValid}}),Object.defineProperty(T,"isValidTraceId",{enumerable:!0,get:function(){return v.isValidTraceId}}),Object.defineProperty(T,"isValidSpanId",{enumerable:!0,get:function(){return v.isValidSpanId}}),x=k(476),Object.defineProperty(T,"INVALID_SPANID",{enumerable:!0,get:function(){return x.INVALID_SPANID}}),Object.defineProperty(T,"INVALID_TRACEID",{enumerable:!0,get:function(){return x.INVALID_TRACEID}}),Object.defineProperty(T,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return x.INVALID_SPAN_CONTEXT}}),r=k(67),Object.defineProperty(T,"context",{enumerable:!0,get:function(){return r.context}}),n=k(506),Object.defineProperty(T,"diag",{enumerable:!0,get:function(){return n.diag}}),i=k(886),Object.defineProperty(T,"metrics",{enumerable:!0,get:function(){return i.metrics}}),a=k(939),Object.defineProperty(T,"propagation",{enumerable:!0,get:function(){return a.propagation}}),s=k(845),Object.defineProperty(T,"trace",{enumerable:!0,get:function(){return s.trace}}),T.default={context:r.context,diag:n.diag,metrics:i.metrics,propagation:a.propagation,trace:s.trace},t.exports=T})()},753418,(e,t,r)=>{(()=>{"use strict";"u">typeof __nccwpck_require__&&(__nccwpck_require__.ab="/ROOT/node_modules/.pnpm/next@16.1.4_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/next/dist/compiled/cookie/");var e,r,n,i,a={};a.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var i={},a=t.split(n),s=(r||{}).decode||e,o=0;o<a.length;o++){var l=a[o],c=l.indexOf("=");if(!(c<0)){var u=l.substr(0,c).trim(),d=l.substr(++c,l.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),void 0==i[u]&&(i[u]=function(e,t){try{return t(e)}catch(t){return e}}(d,s))}}return i},a.serialize=function(e,t,n){var a=n||{},s=a.encode||r;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!i.test(e))throw TypeError("argument name is invalid");var o=s(t);if(o&&!i.test(o))throw TypeError("argument val is invalid");var l=e+"="+o;if(null!=a.maxAge){var c=a.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(c)}if(a.domain){if(!i.test(a.domain))throw TypeError("option domain is invalid");l+="; Domain="+a.domain}if(a.path){if(!i.test(a.path))throw TypeError("option path is invalid");l+="; Path="+a.path}if(a.expires){if("function"!=typeof a.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+a.expires.toUTCString()}if(a.httpOnly&&(l+="; HttpOnly"),a.secure&&(l+="; Secure"),a.sameSite)switch("string"==typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l},e=decodeURIComponent,r=encodeURIComponent,n=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,t.exports=a})()},501858,(e,t,r)=>{(()=>{"use strict";let e,r,n,i,a;var s={993:e=>{var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,n,a,s){if("function"!=typeof n)throw TypeError("The listener must be a function");var o=new i(n,a||e,s),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,s=Array(a);i<a;i++)s[i]=n[i].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,a,s){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,a),!0;case 6:return u.fn.call(u.context,t,n,i,a,s),!0}for(c=1,l=Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!l)for(h=1,l=Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||s(this,a);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[a]=1===c.length?c[0]:c:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},213:e=>{e.exports=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e})))},574:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){let n=0,i=e.length;for(;i>0;){let a=i/2|0,s=n+a;0>=r(e[s],t)?(n=++s,i-=a+1):i=a}return n}},821:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(574);t.default=class{constructor(){this._queue=[]}enqueue(e,t){let r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(r);let i=n.default(this._queue,r,(e,t)=>t.priority-e.priority);this._queue.splice(i,0,r)}dequeue(){let e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this._queue.length}}},816:(e,t,r)=>{let n=r(213);class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}let a=(e,t,r)=>new Promise((a,s)=>{if("number"!=typeof t||t<0)throw TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void a(e);let o=setTimeout(()=>{if("function"==typeof r){try{a(r())}catch(e){s(e)}return}let n="string"==typeof r?r:`Promise timed out after ${t} milliseconds`,o=r instanceof Error?r:new i(n);"function"==typeof e.cancel&&e.cancel(),s(o)},t);n(e.then(a,s),()=>{clearTimeout(o)})});e.exports=a,e.exports.default=a,e.exports.TimeoutError=i}},o={};function l(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}},n=!0;try{s[e](r,r.exports,l),n=!1}finally{n&&delete o[e]}return r.exports}l.ab="/ROOT/node_modules/.pnpm/next@16.1.4_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/next/dist/compiled/p-queue/";var c={};Object.defineProperty(c,"__esModule",{value:!0}),e=l(993),r=l(816),n=l(821),i=()=>{},a=new r.TimeoutError,c.default=class extends e{constructor(e){var t,r,a,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=i,this._resolveIdle=i,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},e)).intervalCap&&e.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!=(r=null==(t=e.intervalCap)?void 0:t.toString())?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!=(s=null==(a=e.interval)?void 0:a.toString())?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=i,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=i,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(void 0===this._intervalId){let t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((n,i)=>{let s=async()=>{this._pendingCount++,this._intervalCount++;try{let s=void 0===this._timeout&&void 0===t.timeout?e():r.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&i(a)});n(await s)}catch(e){i(e)}this._next()};this._queue.enqueue(s,t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused&&(this._isPaused=!1,this._processQueue()),this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{let t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{let t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}},t.exports=c})()},478500,(e,t,r)=>{t.exports=e.x("node:async_hooks",()=>require("node:async_hooks"))},732367,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={getTestReqInfo:function(){return l},withRequest:function(){return o}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let a=new(e.r(478500)).AsyncLocalStorage;function s(e,t){let r=t.header(e,"next-test-proxy-port");if(!r)return;let n=t.url(e);return{url:n,proxyPort:Number(r),testData:t.header(e,"next-test-data")||""}}function o(e,t,r){let n=s(e,t);return n?a.run(n,r):r()}function l(e,t){let r=a.getStore();return r||(e&&t?s(e,t):void 0)}},527789,(e,t,r)=>{"use strict";var n=e.i(951615);Object.defineProperty(r,"__esModule",{value:!0});var i={handleFetch:function(){return c},interceptFetch:function(){return u},reader:function(){return o}};for(var a in i)Object.defineProperty(r,a,{enumerable:!0,get:i[a]});let s=e.r(732367),o={url:e=>e.url,header:(e,t)=>e.headers.get(t)};async function l(e,t){let{url:r,method:i,headers:a,body:s,cache:o,credentials:l,integrity:c,mode:u,redirect:d,referrer:h,referrerPolicy:p}=t;return{testData:e,api:"fetch",request:{url:r,method:i,headers:[...Array.from(a),["next-test-stack",function(){let e=(Error().stack??"").split("\n");for(let t=1;t<e.length;t++)if(e[t].length>0){e=e.slice(t);break}return(e=(e=(e=e.filter(e=>!e.includes("/next/dist/"))).slice(0,5)).map(e=>e.replace("webpack-internal:///(rsc)/","").trim())).join("    ")}()]],body:s?n.Buffer.from(await t.arrayBuffer()).toString("base64"):null,cache:o,credentials:l,integrity:c,mode:u,redirect:d,referrer:h,referrerPolicy:p}}}async function c(e,t){let r=(0,s.getTestReqInfo)(t,o);if(!r)return e(t);let{testData:i,proxyPort:a}=r,c=await l(i,t),u=await e(`http://localhost:${a}`,{method:"POST",body:JSON.stringify(c),next:{internal:!0}});if(!u.ok)throw Object.defineProperty(Error(`Proxy request failed: ${u.status}`),"__NEXT_ERROR_CODE",{value:"E146",enumerable:!1,configurable:!0});let d=await u.json(),{api:h}=d;switch(h){case"continue":return e(t);case"abort":case"unhandled":throw Object.defineProperty(Error(`Proxy request aborted [${t.method} ${t.url}]`),"__NEXT_ERROR_CODE",{value:"E145",enumerable:!1,configurable:!0});case"fetch":return function(e){let{status:t,headers:r,body:i}=e.response;return new Response(i?n.Buffer.from(i,"base64"):null,{status:t,headers:new Headers(r)})}(d);default:return h}}function u(t){return e.g.fetch=function(e,r){var n;return(null==r||null==(n=r.next)?void 0:n.internal)?t(e,r):c(t,new Request(e,r))},()=>{e.g.fetch=t}}},167449,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={interceptTestApis:function(){return o},wrapRequestHandler:function(){return l}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let a=e.r(732367),s=e.r(527789);function o(){return(0,s.interceptFetch)(e.g.fetch)}function l(e){return(t,r)=>(0,a.withRequest)(t,s.reader,()=>e(t,r))}},389899,(e,t,r)=>{var n={226:function(t,r){!function(n,i){"use strict";var a="function",s="undefined",o="object",l="string",c="major",u="model",d="name",h="type",p="vendor",f="version",g="architecture",m="console",y="mobile",b="tablet",w="smarttv",_="wearable",v="embedded",x="Amazon",E="Apple",S="ASUS",k="BlackBerry",T="Browser",A="Chrome",R="Firefox",O="Google",C="Huawei",P="Microsoft",I="Motorola",j="Opera",$="Samsung",N="Sharp",U="Sony",D="Xiaomi",L="Zebra",M="Facebook",H="Chromium OS",W="Mac OS",B=function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},K=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},q=function(e,t){return typeof e===l&&-1!==V(t).indexOf(V(e))},V=function(e){return e.toLowerCase()},J=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,""),typeof t===s?e:e.substring(0,350)},z=function(e,t){for(var r,n,i,s,l,c,u=0;u<t.length&&!l;){var d=t[u],h=t[u+1];for(r=n=0;r<d.length&&!l&&d[r];)if(l=d[r++].exec(e))for(i=0;i<h.length;i++)c=l[++n],typeof(s=h[i])===o&&s.length>0?2===s.length?typeof s[1]==a?this[s[0]]=s[1].call(this,c):this[s[0]]=s[1]:3===s.length?typeof s[1]!==a||s[1].exec&&s[1].test?this[s[0]]=c?c.replace(s[1],s[2]):void 0:this[s[0]]=c?s[1].call(this,c,s[2]):void 0:4===s.length&&(this[s[0]]=c?s[3].call(this,c.replace(s[1],s[2])):void 0):this[s]=c||void 0;u+=2}},F=function(e,t){for(var r in t)if(typeof t[r]===o&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(q(t[r][n],e))return"?"===r?void 0:r}else if(q(t[r],e))return"?"===r?void 0:r;return e},G={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},X={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,f],[/opios[\/ ]+([\w\.]+)/i],[f,[d,j+" Mini"]],[/\bopr\/([\w\.]+)/i],[f,[d,j]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[d,"UC"+T]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[f,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[f,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+T],f],[/\bfocus\/([\w\.]+)/i],[f,[d,R+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[d,j+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[d,j+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[d,"MIUI "+T]],[/fxios\/([-\w\.]+)/i],[f,[d,R]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+T]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+T],f],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,f],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,M],f],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[d,A+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,A+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[d,"Android "+T]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[f,F,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[d,R+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,f],[/(cobalt)\/([\w\.]+)/i],[d,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,V]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",V]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,V]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[p,$],[h,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[p,$],[h,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[p,E],[h,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[p,E],[h,b]],[/(macintosh);/i],[u,[p,E]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[p,N],[h,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[p,C],[h,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[p,C],[h,y]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[p,D],[h,y]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[p,D],[h,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[p,"OPPO"],[h,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[p,"Vivo"],[h,y]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[p,"Realme"],[h,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[p,I],[h,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[p,I],[h,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[p,"LG"],[h,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[p,"LG"],[h,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[p,"Lenovo"],[h,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[p,"Nokia"],[h,y]],[/(pixel c)\b/i],[u,[p,O],[h,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[p,O],[h,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[p,U],[h,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[p,U],[h,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[p,"OnePlus"],[h,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[p,x],[h,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[p,x],[h,y]],[/(playbook);[-\w\),; ]+(rim)/i],[u,p,[h,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[p,k],[h,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[p,S],[h,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[p,S],[h,y]],[/(nexus 9)/i],[u,[p,"HTC"],[h,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[u,/_/g," "],[h,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[p,"Acer"],[h,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[p,"Meizu"],[h,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,u,[h,y]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,u,[h,b]],[/(surface duo)/i],[u,[p,P],[h,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[p,"Fairphone"],[h,y]],[/(u304aa)/i],[u,[p,"AT&T"],[h,y]],[/\bsie-(\w*)/i],[u,[p,"Siemens"],[h,y]],[/\b(rct\w+) b/i],[u,[p,"RCA"],[h,b]],[/\b(venue[\d ]{2,7}) b/i],[u,[p,"Dell"],[h,b]],[/\b(q(?:mv|ta)\w+) b/i],[u,[p,"Verizon"],[h,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[p,"Barnes & Noble"],[h,b]],[/\b(tm\d{3}\w+) b/i],[u,[p,"NuVision"],[h,b]],[/\b(k88) b/i],[u,[p,"ZTE"],[h,b]],[/\b(nx\d{3}j) b/i],[u,[p,"ZTE"],[h,y]],[/\b(gen\d{3}) b.+49h/i],[u,[p,"Swiss"],[h,y]],[/\b(zur\d{3}) b/i],[u,[p,"Swiss"],[h,b]],[/\b((zeki)?tb.*\b) b/i],[u,[p,"Zeki"],[h,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],u,[h,b]],[/\b(ns-?\w{0,9}) b/i],[u,[p,"Insignia"],[h,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[p,"NextBook"],[h,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],u,[h,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],u,[h,y]],[/\b(ph-1) /i],[u,[p,"Essential"],[h,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[p,"Envizen"],[h,b]],[/\b(trio[-\w\. ]+) b/i],[u,[p,"MachSpeed"],[h,b]],[/\btu_(1491) b/i],[u,[p,"Rotor"],[h,b]],[/(shield[\w ]+) b/i],[u,[p,"Nvidia"],[h,b]],[/(sprint) (\w+)/i],[p,u,[h,y]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[p,P],[h,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[p,L],[h,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[p,L],[h,y]],[/smart-tv.+(samsung)/i],[p,[h,w]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[p,$],[h,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,"LG"],[h,w]],[/(apple) ?tv/i],[p,[u,E+" TV"],[h,w]],[/crkey/i],[[u,A+"cast"],[p,O],[h,w]],[/droid.+aft(\w)( bui|\))/i],[u,[p,x],[h,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[p,N],[h,w]],[/(bravia[\w ]+)( bui|\))/i],[u,[p,U],[h,w]],[/(mitv-\w{5}) bui/i],[u,[p,D],[h,w]],[/Hbbtv.*(technisat) (.*);/i],[p,u,[h,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[p,J],[u,J],[h,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,u,[h,m]],[/droid.+; (shield) bui/i],[u,[p,"Nvidia"],[h,m]],[/(playstation [345portablevi]+)/i],[u,[p,U],[h,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[p,P],[h,m]],[/((pebble))app/i],[p,u,[h,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[p,E],[h,_]],[/droid.+; (glass) \d/i],[u,[p,O],[h,_]],[/droid.+; (wt63?0{2,3})\)/i],[u,[p,L],[h,_]],[/(quest( 2| pro)?)/i],[u,[p,M],[h,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[h,v]],[/(aeobc)\b/i],[u,[p,x],[h,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[h,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[h,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,y]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,f],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[f,F,G]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[f,F,G]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,W],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,f],[/\(bb(10);/i],[f,[d,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[d,R+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[d,A+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,H],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,f],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,f]]},Y=function(e,t){if(typeof e===o&&(t=e,e=void 0),!(this instanceof Y))return new Y(e,t).getResult();var r=typeof n!==s&&n.navigator?n.navigator:void 0,i=e||(r&&r.userAgent?r.userAgent:""),m=r&&r.userAgentData?r.userAgentData:void 0,w=t?B(X,t):X,_=r&&r.userAgent==i;return this.getBrowser=function(){var e,t={};return t[d]=void 0,t[f]=void 0,z.call(t,i,w.browser),t[c]=typeof(e=t[f])===l?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0,_&&r&&r.brave&&typeof r.brave.isBrave==a&&(t[d]="Brave"),t},this.getCPU=function(){var e={};return e[g]=void 0,z.call(e,i,w.cpu),e},this.getDevice=function(){var e={};return e[p]=void 0,e[u]=void 0,e[h]=void 0,z.call(e,i,w.device),_&&!e[h]&&m&&m.mobile&&(e[h]=y),_&&"Macintosh"==e[u]&&r&&typeof r.standalone!==s&&r.maxTouchPoints&&r.maxTouchPoints>2&&(e[u]="iPad",e[h]=b),e},this.getEngine=function(){var e={};return e[d]=void 0,e[f]=void 0,z.call(e,i,w.engine),e},this.getOS=function(){var e={};return e[d]=void 0,e[f]=void 0,z.call(e,i,w.os),_&&!e[d]&&m&&"Unknown"!=m.platform&&(e[d]=m.platform.replace(/chrome os/i,H).replace(/macos/i,W)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===l&&e.length>350?J(e,350):e,this},this.setUA(i),this};if(Y.VERSION="1.0.35",Y.BROWSER=K([d,f,c]),Y.CPU=K([g]),Y.DEVICE=K([u,p,h,m,y,w,b,_,v]),Y.ENGINE=Y.OS=K([d,f]),typeof r!==s)t.exports&&(r=t.exports=Y),r.UAParser=Y;else if(typeof define===a&&define.amd)e.r,void 0!==Y&&e.v(Y);else typeof n!==s&&(n.UAParser=Y);var Q=typeof n!==s&&(n.jQuery||n.Zepto);if(Q&&!Q.ua){var Z=new Y;Q.ua=Z.getResult(),Q.ua.get=function(){return Z.getUA()},Q.ua.set=function(e){Z.setUA(e);var t=Z.getResult();for(var r in t)Q.ua[r]=t[r]}}}(this)}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}},s=!0;try{n[e].call(r.exports,r,r.exports,a),s=!1}finally{s&&delete i[e]}return r.exports}a.ab="/ROOT/node_modules/.pnpm/next@16.1.4_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/next/dist/compiled/ua-parser-js/",t.exports=a(226)},131266,(e,t,r)=>{"use strict";var n={H:null,A:null};function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=Array.isArray;function s(){}var o=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.for("react.view_transition"),b=Symbol.iterator,w=Object.prototype.hasOwnProperty,_=Object.assign;function v(e,t,r){var n=r.ref;return{$$typeof:o,type:e,key:t,ref:void 0!==n?n:null,props:r}}function x(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var E=/\/+/g;function S(e,t){var r,n;return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,n={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return n[e]})):t.toString(36)}function k(e,t,r){if(null==e)return e;var n=[],c=0;return!function e(t,r,n,c,u){var d,h,p,f=typeof t;("undefined"===f||"boolean"===f)&&(t=null);var m=!1;if(null===t)m=!0;else switch(f){case"bigint":case"string":case"number":m=!0;break;case"object":switch(t.$$typeof){case o:case l:m=!0;break;case g:return e((m=t._init)(t._payload),r,n,c,u)}}if(m)return u=u(t),m=""===c?"."+S(t,0):c,a(u)?(n="",null!=m&&(n=m.replace(E,"$&/")+"/"),e(u,r,n,"",function(e){return e})):null!=u&&(x(u)&&(d=u,h=n+(null==u.key||t&&t.key===u.key?"":(""+u.key).replace(E,"$&/")+"/")+m,u=v(d.type,h,d.props)),r.push(u)),1;m=0;var y=""===c?".":c+":";if(a(t))for(var w=0;w<t.length;w++)f=y+S(c=t[w],w),m+=e(c,r,n,f,u);else if("function"==typeof(w=null===(p=t)||"object"!=typeof p?null:"function"==typeof(p=b&&p[b]||p["@@iterator"])?p:null))for(t=w.call(t),w=0;!(c=t.next()).done;)f=y+S(c=c.value,w++),m+=e(c,r,n,f,u);else if("object"===f){if("function"==typeof t.then)return e(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(s,s):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(t),r,n,c,u);throw Error(i(31,"[object Object]"===(r=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":r))}return m}(e,n,"","",function(e){return t.call(r,e,c++)}),n}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}function A(){return new WeakMap}function R(){return{s:0,v:void 0,o:null,p:null}}r.Activity=m,r.Children={map:k,forEach:function(e,t,r){k(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return k(e,function(){t++}),t},toArray:function(e){return k(e,function(e){return e})||[]},only:function(e){if(!x(e))throw Error(i(143));return e}},r.Fragment=c,r.Profiler=d,r.StrictMode=u,r.Suspense=p,r.ViewTransition=y,r.__SERVER_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,r.cache=function(e){return function(){var t=n.A;if(!t)return e.apply(null,arguments);var r=t.getCacheForType(A);void 0===(t=r.get(e))&&(t=R(),r.set(e,t)),r=0;for(var i=arguments.length;r<i;r++){var a=arguments[r];if("function"==typeof a||"object"==typeof a&&null!==a){var s=t.o;null===s&&(t.o=s=new WeakMap),void 0===(t=s.get(a))&&(t=R(),s.set(a,t))}else null===(s=t.p)&&(t.p=s=new Map),void 0===(t=s.get(a))&&(t=R(),s.set(a,t))}if(1===t.s)return t.v;if(2===t.s)throw t.v;try{var o=e.apply(null,arguments);return(r=t).s=1,r.v=o}catch(e){throw(o=t).s=2,o.v=e,e}}},r.cacheSignal=function(){var e=n.A;return e?e.cacheSignal():null},r.captureOwnerStack=function(){return null},r.cloneElement=function(e,t,r){if(null==e)throw Error(i(267,e));var n=_({},e.props),a=e.key;if(null!=t)for(s in void 0!==t.key&&(a=""+t.key),t)w.call(t,s)&&"key"!==s&&"__self"!==s&&"__source"!==s&&("ref"!==s||void 0!==t.ref)&&(n[s]=t[s]);var s=arguments.length-2;if(1===s)n.children=r;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];n.children=o}return v(e.type,a,n)},r.createElement=function(e,t,r){var n,i={},a=null;if(null!=t)for(n in void 0!==t.key&&(a=""+t.key),t)w.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(i[n]=t[n]);var s=arguments.length-2;if(1===s)i.children=r;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===i[n]&&(i[n]=s[n]);return v(e,a,i)},r.createRef=function(){return{current:null}},r.forwardRef=function(e){return{$$typeof:h,render:e}},r.isValidElement=x,r.lazy=function(e){return{$$typeof:g,_payload:{_status:-1,_result:e},_init:T}},r.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},r.use=function(e){return n.H.use(e)},r.useCallback=function(e,t){return n.H.useCallback(e,t)},r.useDebugValue=function(){},r.useId=function(){return n.H.useId()},r.useMemo=function(e,t){return n.H.useMemo(e,t)},r.version="19.3.0-canary-f93b9fd4-20251217"},773397,(e,t,r)=>{"use strict";t.exports=e.r(131266)},595384,e=>{"use strict";let t=(0,e.i(643003).createAsyncLocalStorage)();e.s([],930759),e.i(930759),e.s(["actionAsyncStorage",0,t],595384)},723150,277802,722667,39513,360576,419499,362862,537104,312153,501017,813566,110520,920977,67132,442823,e=>{"use strict";let t="next-router-prefetch",r=["rsc","next-router-state-tree",t,"next-hmr-refresh","next-router-segment-prefetch"];e.s(["FLIGHT_HEADERS",0,r,"NEXT_REWRITTEN_PATH_HEADER",0,"x-nextjs-rewritten-path","NEXT_REWRITTEN_QUERY_HEADER",0,"x-nextjs-rewritten-query","NEXT_ROUTER_PREFETCH_HEADER",0,t,"NEXT_RSC_UNION_QUERY",0,"_rsc","RSC_HEADER",0,"rsc"],723150);var n,i,a=e.i(643003);let s=(0,a.createAsyncLocalStorage)();e.s(["workAsyncStorageInstance",0,s],277802),e.s([],722667);let o=(0,a.createAsyncLocalStorage)();e.s(["workUnitAsyncStorageInstance",0,o],39513);class l extends Error{constructor(e,t){super(`Invariant: ${e.endsWith(".")?e:e+"."} This is a bug in Next.js.`,t),this.name="InvariantError"}}function c(e){throw Object.defineProperty(Error(`\`${e}\` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context`),"__NEXT_ERROR_CODE",{value:"E251",enumerable:!1,configurable:!0})}e.s(["InvariantError",()=>l],360576),e.s(["throwForMissingRequestStore",()=>c],419499);var u=e.i(773397);let d="DYNAMIC_SERVER_USAGE";class h extends Error{constructor(e){super(`Dynamic server usage: ${e}`),this.description=e,this.digest=d}}function p(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===d}e.s(["DynamicServerError",()=>h,"isDynamicServerError",()=>p],362862);class f extends Error{constructor(...e){super(...e),this.code="NEXT_STATIC_GEN_BAILOUT"}}function g(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===m}e.s(["StaticGenBailoutError",()=>f],537104);let m="HANGING_PROMISE_REJECTION";class y extends Error{constructor(e,t){super(`During prerendering, ${t} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${t} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${e}".`),this.route=e,this.expression=t,this.digest=m}}let b=new WeakMap;function w(e,t,r){if(e.aborted)return Promise.reject(new y(t,r));{let n=new Promise((n,i)=>{let a=i.bind(null,new y(t,r)),s=b.get(e);if(s)s.push(a);else{let t=[a];b.set(e,t),e.addEventListener("abort",()=>{for(let e=0;e<t.length;e++)t[e]()},{once:!0})}});return n.catch(_),n}}function _(){}function v(e,t,r){return t.stagedRendering?t.stagedRendering.delayUntilStage(r,void 0,e):new Promise(t=>{setTimeout(()=>{t(e)},0)})}function x(e){return"object"==typeof e&&null!==e&&"digest"in e&&"BAILOUT_TO_CLIENT_SIDE_RENDERING"===e.digest}e.s(["isHangingPromiseRejectionError",()=>g,"makeDevtoolsIOAwarePromise",()=>v,"makeHangingPromise",()=>w],312153),e.s(["isBailoutToCSRError",()=>x],501017);let E="function"==typeof u.default.unstable_postpone;function S(e,t,r){let n=Object.defineProperty(new h(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.revalidate=0,t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}function k(e){switch(e.type){case"cache":case"unstable-cache":case"private-cache":return}}function T(e,t,r,n){if(!1===n.controller.signal.aborted){let i,a;i=I(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`),n.controller.abort(i),(a=n.dynamicTracking)&&a.dynamicAccesses.push({stack:a.isDebugDynamicAccesses?Error().stack:void 0,expression:t});let s=n.dynamicTracking;s&&null===s.syncDynamicErrorWithStack&&(s.syncDynamicErrorWithStack=r)}throw I(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`)}function A(e,t,r){(function(){if(!E)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})})(),r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:t}),u.default.unstable_postpone(R(e,t))}function R(e,t){return`Route ${e} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function O(e){return"object"==typeof e&&null!==e&&"string"==typeof e.message&&C(e.message)}function C(e){return e.includes("needs to bail out of prerendering at this point because it used")&&e.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===C(R("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let P="NEXT_PRERENDER_INTERRUPTED";function I(e){let t=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t.digest=P,t}function j(e){return"object"==typeof e&&null!==e&&e.digest===P&&"name"in e&&"message"in e&&e instanceof Error}function $(e,t){return e.runtimeStagePromise?e.runtimeStagePromise.then(()=>t):t}RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at __next_root_layout_boundary__ \\([^\\n]*\\)`),RegExp(`\\n\\s+at __next_metadata_boundary__[\\n\\s]`),RegExp(`\\n\\s+at __next_viewport_boundary__[\\n\\s]`),RegExp(`\\n\\s+at __next_outlet_boundary__[\\n\\s]`),e.s(["abortAndThrowOnSynchronousRequestDataAccess",()=>T,"delayUntilRuntimeStage",()=>$,"isDynamicPostpone",()=>O,"isPrerenderInterruptedError",()=>j,"postponeWithTracking",()=>A,"throwToInterruptStaticGeneration",()=>S,"trackDynamicDataInDynamicRender",()=>k],813566);var N=((n={})[n.SeeOther=303]="SeeOther",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n);e.s(["RedirectStatusCode",()=>N],110520);let U="NEXT_REDIRECT";var D=((i={}).push="push",i.replace="replace",i);function L(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,n]=t,i=t.slice(2,-2).join(";"),a=Number(t.at(-2));return r===U&&("replace"===n||"push"===n)&&"string"==typeof i&&!isNaN(a)&&a in N}e.s(["REDIRECT_ERROR_CODE",0,U,"RedirectType",()=>D,"isRedirectError",()=>L],920977);let M=new Set(Object.values({NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401})),H="NEXT_HTTP_ERROR_FALLBACK";function W(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===H&&M.has(Number(r))}function B(e){return L(e)||W(e)}e.s(["HTTP_ERROR_FALLBACK_ERROR_CODE",0,H,"isHTTPAccessFallbackError",()=>W],67132),e.s(["isNextRouterError",()=>B],442823)},252461,e=>{"use strict";var t=e.i(312153);let r=Symbol.for("react.postpone");var n=e.i(501017),i=e.i(442823),a=e.i(813566),s=e.i(362862);e.s(["unstable_rethrow",()=>function e(o){if((0,i.isNextRouterError)(o)||(0,n.isBailoutToCSRError)(o)||(0,s.isDynamicServerError)(o)||(0,a.isDynamicPostpone)(o)||"object"==typeof o&&null!==o&&o.$$typeof===r||(0,t.isHangingPromiseRejectionError)(o)||(0,a.isPrerenderInterruptedError)(o))throw o;o instanceof Error&&"cause"in o&&e(o.cause)}],252461)},190894,e=>{"use strict";e.n(__import_unsupported("crypto"))},906367,e=>{"use strict";let t,r,n,i,a,s,o,l;async function c(){return"_ENTRIES"in globalThis&&_ENTRIES.middleware_instrumentation&&await _ENTRIES.middleware_instrumentation}let u=null;async function d(){if("phase-production-build"===process.env.NEXT_PHASE)return;u||(u=c());let e=await u;if(null==e?void 0:e.register)try{await e.register()}catch(e){throw e.message=`An error occurred while loading instrumentation hook: ${e.message}`,e}}async function h(...e){let t=await c();try{var r;await (null==t||null==(r=t.onRequestError)?void 0:r.call(t,...e))}catch(e){console.error("Error in instrumentation.onRequestError:",e)}}let p=null;function f(){return p||(p=d()),p}function g(e){return`The edge runtime does not support Node.js '${e}' module.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime`}process!==e.g.process&&(process.env=e.g.process.env,e.g.process=process);try{Object.defineProperty(globalThis,"__import_unsupported",{value:function(e){let t=new Proxy(function(){},{get(t,r){if("then"===r)return{};throw Object.defineProperty(Error(g(e)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})},construct(){throw Object.defineProperty(Error(g(e)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})},apply(r,n,i){if("function"==typeof i[0])return i[0](t);throw Object.defineProperty(Error(g(e)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}});return new Proxy({},{get:()=>t})},enumerable:!1,configurable:!1})}catch{}f();class m extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class y extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class b extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}let w="_N_T_",_={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"};function v(e){var t,r,n,i,a,s=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,a=!1;l();)if(","===(r=e.charAt(o))){for(n=o,o+=1,l(),i=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(a=!0,o=i,s.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!a||o>=e.length)&&s.push(e.substring(t,e.length))}return s}function x(e){let t={},r=[];if(e)for(let[n,i]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...v(i)),t[n]=1===r.length?r[0]:r):t[n]=i;return t}function E(e){try{return String(new URL(String(e)))}catch(t){throw Object.defineProperty(Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}({..._,GROUP:{builtinReact:[_.reactServerComponents,_.actionBrowser],serverOnly:[_.reactServerComponents,_.actionBrowser,_.instrument,_.middleware],neutralTarget:[_.apiNode,_.apiEdge],clientOnly:[_.serverSideRendering,_.appPagesBrowser],bundled:[_.reactServerComponents,_.actionBrowser,_.serverSideRendering,_.appPagesBrowser,_.shared,_.instrument,_.middleware],appPages:[_.reactServerComponents,_.serverSideRendering,_.appPagesBrowser,_.actionBrowser]}});let S=Symbol("response"),k=Symbol("passThrough"),T=Symbol("waitUntil");class A{constructor(e,t){this[k]=!1,this[T]=t?{kind:"external",function:t}:{kind:"internal",promises:[]}}respondWith(e){this[S]||(this[S]=Promise.resolve(e))}passThroughOnException(){this[k]=!0}waitUntil(e){if("external"===this[T].kind)return(0,this[T].function)(e);this[T].promises.push(e)}}class R extends A{constructor(e){var t;super(e.request,null==(t=e.context)?void 0:t.waitUntil),this.sourcePage=e.page}get request(){throw Object.defineProperty(new m({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}respondWith(){throw Object.defineProperty(new m({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}}function O(e){return e.replace(/\/$/,"")||"/"}function C(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}function P(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=C(e);return`${t}${r}${n}${i}`}function I(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=C(e);return`${r}${t}${n}${i}`}function j(e,t){if("string"!=typeof e)return!1;let{pathname:r}=C(e);return r===t||r.startsWith(t+"/")}let $=new WeakMap;function N(e,t){let r;if(!t)return{pathname:e};let n=$.get(t);n||(n=t.map(e=>e.toLowerCase()),$.set(t,n));let i=e.split("/",2);if(!i[1])return{pathname:e};let a=i[1].toLowerCase(),s=n.indexOf(a);return s<0?{pathname:e}:(r=t[s],{pathname:e=e.slice(r.length+1)||"/",detectedLocale:r})}let U=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function D(e,t){return new URL(String(e).replace(U,"localhost"),t&&String(t).replace(U,"localhost"))}let L=Symbol("NextURLInternal");class M{constructor(e,t,r){let n,i;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,i=r||{}):i=r||t||{},this[L]={url:D(e,n??i.base),options:i,basePath:""},this.analyze()}analyze(){var e,t,r,n,i;let a=function(e,t){let{basePath:r,i18n:n,trailingSlash:i}=t.nextConfig??{},a={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):i};r&&j(a.pathname,r)&&(a.pathname=function(e,t){if(!j(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:`/${r}`}(a.pathname,r),a.basePath=r);let s=a.pathname;if(a.pathname.startsWith("/_next/data/")&&a.pathname.endsWith(".json")){let e=a.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");a.buildId=e[0],s="index"!==e[1]?`/${e.slice(1).join("/")}`:"/",!0===t.parseData&&(a.pathname=s)}if(n){let e=t.i18nProvider?t.i18nProvider.analyze(a.pathname):N(a.pathname,n.locales);a.locale=e.detectedLocale,a.pathname=e.pathname??a.pathname,!e.detectedLocale&&a.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(s):N(s,n.locales)).detectedLocale&&(a.locale=e.detectedLocale)}return a}(this[L].url.pathname,{nextConfig:this[L].options.nextConfig,parseData:!0,i18nProvider:this[L].options.i18nProvider}),s=function(e,t){let r;if(t?.host&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}(this[L].url,this[L].options.headers);this[L].domainLocale=this[L].options.i18nProvider?this[L].options.i18nProvider.detectDomainLocale(s):function(e,t,r){if(e){for(let n of(r&&(r=r.toLowerCase()),e))if(t===n.domain?.split(":",1)[0].toLowerCase()||r===n.defaultLocale.toLowerCase()||n.locales?.some(e=>e.toLowerCase()===r))return n}}(null==(t=this[L].options.nextConfig)||null==(e=t.i18n)?void 0:e.domains,s);let o=(null==(r=this[L].domainLocale)?void 0:r.defaultLocale)||(null==(i=this[L].options.nextConfig)||null==(n=i.i18n)?void 0:n.defaultLocale);this[L].url.pathname=a.pathname,this[L].defaultLocale=o,this[L].basePath=a.basePath??"",this[L].buildId=a.buildId,this[L].locale=a.locale??o,this[L].trailingSlash=a.trailingSlash}formatPathname(){var e;let t;return t=function(e,t,r,n){if(!t||t===r)return e;let i=e.toLowerCase();return!n&&(j(i,"/api")||j(i,`/${t.toLowerCase()}`))?e:P(e,`/${t}`)}((e={basePath:this[L].basePath,buildId:this[L].buildId,defaultLocale:this[L].options.forceLocale?void 0:this[L].defaultLocale,locale:this[L].locale,pathname:this[L].url.pathname,trailingSlash:this[L].trailingSlash}).pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix),(e.buildId||!e.trailingSlash)&&(t=O(t)),e.buildId&&(t=I(P(t,`/_next/data/${e.buildId}`),"/"===e.pathname?"index.json":".json")),t=P(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:I(t,"/"):O(t)}formatSearch(){return this[L].url.search}get buildId(){return this[L].buildId}set buildId(e){this[L].buildId=e}get locale(){return this[L].locale??""}set locale(e){var t,r;if(!this[L].locale||!(null==(r=this[L].options.nextConfig)||null==(t=r.i18n)?void 0:t.locales.includes(e)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${e}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[L].locale=e}get defaultLocale(){return this[L].defaultLocale}get domainLocale(){return this[L].domainLocale}get searchParams(){return this[L].url.searchParams}get host(){return this[L].url.host}set host(e){this[L].url.host=e}get hostname(){return this[L].url.hostname}set hostname(e){this[L].url.hostname=e}get port(){return this[L].url.port}set port(e){this[L].url.port=e}get protocol(){return this[L].url.protocol}set protocol(e){this[L].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[L].url=D(e),this.analyze()}get origin(){return this[L].url.origin}get pathname(){return this[L].url.pathname}set pathname(e){this[L].url.pathname=e}get hash(){return this[L].url.hash}set hash(e){this[L].url.hash=e}get search(){return this[L].url.search}set search(e){this[L].url.search=e}get password(){return this[L].url.password}set password(e){this[L].url.password=e}get username(){return this[L].url.username}set username(e){this[L].url.username=e}get basePath(){return this[L].basePath}set basePath(e){this[L].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new M(String(this),this[L].options)}}var H,W,B,K,q,V,J,z,F,G,X,Y,Q,Z,ee,et,er,en,ei,ea,es,eo=e.i(245106);let el=Symbol("internal request");class ec extends Request{constructor(e,t={}){const r="string"!=typeof e&&"url"in e?e.url:String(e);E(r),e instanceof Request?super(e,t):super(r,t);const n=new M(r,{headers:x(this.headers),nextConfig:t.nextConfig});this[el]={cookies:new eo.RequestCookies(this.headers),nextUrl:n,url:n.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[el].cookies}get nextUrl(){return this[el].nextUrl}get page(){throw new y}get ua(){throw new b}get url(){return this[el].url}}class eu{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}let ed=Symbol("internal response"),eh=new Set([301,302,303,307,308]);function ep(e,t){var r;if(null==e||null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let r=[];for(let[n,i]of e.request.headers)t.set("x-middleware-request-"+n,i),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class ef extends Response{constructor(e,t={}){super(e,t);const r=this.headers,n=new Proxy(new eo.ResponseCookies(r),{get(e,n,i){switch(n){case"delete":case"set":return(...i)=>{let a=Reflect.apply(e[n],e,i),s=new Headers(r);return a instanceof eo.ResponseCookies&&r.set("x-middleware-set-cookie",a.getAll().map(e=>(0,eo.stringifyCookie)(e)).join(",")),ep(t,s),a};default:return eu.get(e,n,i)}}});this[ed]={cookies:n,url:t.url?new M(t.url,{headers:x(r),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[ed].cookies}static json(e,t){let r=Response.json(e,t);return new ef(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!eh.has(r))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let n="object"==typeof t?t:{},i=new Headers(null==n?void 0:n.headers);return i.set("Location",E(e)),new ef(null,{...n,headers:i,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",E(e)),ep(t,r),new ef(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),ep(e,t),new ef(null,{...e,headers:t})}}function eg(e,t){let r="string"==typeof t?new URL(t):t,n=new URL(e,t),i=n.origin===r.origin;return{url:i?n.toString().slice(r.origin.length):n.toString(),isRelative:i}}var em=e.i(723150);em.NEXT_RSC_UNION_QUERY;class ey extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new ey}}class eb extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,n){if("symbol"==typeof r)return eu.get(t,r,n);let i=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===i);if(void 0!==a)return eu.get(t,a,n)},set(t,r,n,i){if("symbol"==typeof r)return eu.set(t,r,n,i);let a=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===a);return eu.set(t,s??r,n,i)},has(t,r){if("symbol"==typeof r)return eu.has(t,r);let n=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0!==i&&eu.has(t,i)},deleteProperty(t,r){if("symbol"==typeof r)return eu.deleteProperty(t,r);let n=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0===i||eu.deleteProperty(t,i)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return ey.callable;default:return eu.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new eb(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}e.i(722667);var ew=e.i(277802),ew=ew;class e_ extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new e_}}class ev{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return e_.callable;default:return eu.get(e,t,r)}}})}}let ex=Symbol.for("next.mutated.cookies");class eE{static wrap(e,t){let r=new eo.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let n=[],i=new Set,a=()=>{let e=ew.workAsyncStorageInstance.getStore();if(e&&(e.pathWasRevalidated=1),n=r.getAll().filter(e=>i.has(e.name)),t){let e=[];for(let t of n){let r=new eo.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},s=new Proxy(r,{get(e,t,r){switch(t){case ex:return n;case"delete":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),s}finally{a()}};case"set":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),s}finally{a()}};default:return eu.get(e,t,r)}}});return s}}function eS(e){return"action"===e.phase}function ek(e,t){if(!eS(e))throw new e_}var eT=((ih=eT||{}).handleRequest="BaseServer.handleRequest",ih.run="BaseServer.run",ih.pipe="BaseServer.pipe",ih.getStaticHTML="BaseServer.getStaticHTML",ih.render="BaseServer.render",ih.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",ih.renderToResponse="BaseServer.renderToResponse",ih.renderToHTML="BaseServer.renderToHTML",ih.renderError="BaseServer.renderError",ih.renderErrorToResponse="BaseServer.renderErrorToResponse",ih.renderErrorToHTML="BaseServer.renderErrorToHTML",ih.render404="BaseServer.render404",ih),eA=((ip=eA||{}).loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",ip.loadComponents="LoadComponents.loadComponents",ip),eR=((ig=eR||{}).getRequestHandler="NextServer.getRequestHandler",ig.getRequestHandlerWithMetadata="NextServer.getRequestHandlerWithMetadata",ig.getServer="NextServer.getServer",ig.getServerRequestHandler="NextServer.getServerRequestHandler",ig.createServer="createServer.createServer",ig),eO=((im=eO||{}).compression="NextNodeServer.compression",im.getBuildId="NextNodeServer.getBuildId",im.createComponentTree="NextNodeServer.createComponentTree",im.clientComponentLoading="NextNodeServer.clientComponentLoading",im.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",im.generateStaticRoutes="NextNodeServer.generateStaticRoutes",im.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",im.generatePublicRoutes="NextNodeServer.generatePublicRoutes",im.generateImageRoutes="NextNodeServer.generateImageRoutes.route",im.sendRenderResult="NextNodeServer.sendRenderResult",im.proxyRequest="NextNodeServer.proxyRequest",im.runApi="NextNodeServer.runApi",im.render="NextNodeServer.render",im.renderHTML="NextNodeServer.renderHTML",im.imageOptimizer="NextNodeServer.imageOptimizer",im.getPagePath="NextNodeServer.getPagePath",im.getRoutesManifest="NextNodeServer.getRoutesManifest",im.findPageComponents="NextNodeServer.findPageComponents",im.getFontManifest="NextNodeServer.getFontManifest",im.getServerComponentManifest="NextNodeServer.getServerComponentManifest",im.getRequestHandler="NextNodeServer.getRequestHandler",im.renderToHTML="NextNodeServer.renderToHTML",im.renderError="NextNodeServer.renderError",im.renderErrorToHTML="NextNodeServer.renderErrorToHTML",im.render404="NextNodeServer.render404",im.startResponse="NextNodeServer.startResponse",im.route="route",im.onProxyReq="onProxyReq",im.apiResolver="apiResolver",im.internalFetch="internalFetch",im),eC=((iy=eC||{}).startServer="startServer.startServer",iy),eP=((ib=eP||{}).getServerSideProps="Render.getServerSideProps",ib.getStaticProps="Render.getStaticProps",ib.renderToString="Render.renderToString",ib.renderDocument="Render.renderDocument",ib.createBodyResult="Render.createBodyResult",ib),eI=((iw=eI||{}).renderToString="AppRender.renderToString",iw.renderToReadableStream="AppRender.renderToReadableStream",iw.getBodyResult="AppRender.getBodyResult",iw.fetch="AppRender.fetch",iw),ej=((i_=ej||{}).executeRoute="Router.executeRoute",i_),e$=((iv=e$||{}).runHandler="Node.runHandler",iv),eN=((ix=eN||{}).runHandler="AppRouteRouteHandlers.runHandler",ix),eU=((iE=eU||{}).generateMetadata="ResolveMetadata.generateMetadata",iE.generateViewport="ResolveMetadata.generateViewport",iE),eD=((iS=eD||{}).execute="Middleware.execute",iS);let eL=new Set(["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"]),eM=new Set(["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]);function eH(e){return null!==e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then}let eW=process.env.NEXT_OTEL_PERFORMANCE_PREFIX,{context:eB,propagation:eK,trace:eq,SpanStatusCode:eV,SpanKind:eJ,ROOT_CONTEXT:ez}=t=e.r(136965);class eF extends Error{constructor(e,t){super(),this.bubble=e,this.result=t}}let eG=(e,t)=>{"object"==typeof t&&null!==t&&t instanceof eF&&t.bubble?e.setAttribute("next.bubble",!0):(t&&(e.recordException(t),e.setAttribute("error.type",t.name)),e.setStatus({code:eV.ERROR,message:null==t?void 0:t.message})),e.end()},eX=new Map,eY=t.createContextKey("next.rootSpanId"),eQ=0,eZ={set(e,t,r){e.push({key:t,value:r})}},e0=(o=new class e{getTracerInstance(){return eq.getTracer("next.js","0.0.1")}getContext(){return eB}getTracePropagationData(){let e=eB.active(),t=[];return eK.inject(e,t,eZ),t}getActiveScopeSpan(){return eq.getSpan(null==eB?void 0:eB.active())}withPropagatedContext(e,t,r){let n=eB.active();if(eq.getSpanContext(n))return t();let i=eK.extract(n,e,r);return eB.with(i,t)}trace(...e){let[t,r,n]=e,{fn:i,options:a}="function"==typeof r?{fn:r,options:{}}:{fn:n,options:{...r}},s=a.spanName??t;if(!eL.has(t)&&"1"!==process.env.NEXT_OTEL_VERBOSE||a.hideSpan)return i();let o=this.getSpanContext((null==a?void 0:a.parentSpan)??this.getActiveScopeSpan());o||(o=(null==eB?void 0:eB.active())??ez);let l=o.getValue(eY),c="number"!=typeof l||!eX.has(l),u=eQ++;return a.attributes={"next.span_name":s,"next.span_type":t,...a.attributes},eB.with(o.setValue(eY,u),()=>this.getTracerInstance().startActiveSpan(s,a,e=>{let r;eW&&t&&eM.has(t)&&(r="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0);let n=!1,s=()=>{!n&&(n=!0,eX.delete(u),r&&performance.measure(`${eW}:next-${(t.split(".").pop()||"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}`,{start:r,end:performance.now()}))};if(c&&eX.set(u,new Map(Object.entries(a.attributes??{}))),i.length>1)try{return i(e,t=>eG(e,t))}catch(t){throw eG(e,t),t}finally{s()}try{let t=i(e);if(eH(t))return t.then(t=>(e.end(),t)).catch(t=>{throw eG(e,t),t}).finally(s);return e.end(),s(),t}catch(t){throw eG(e,t),s(),t}}))}wrap(...e){let t=this,[r,n,i]=3===e.length?e:[e[0],{},e[1]];return eL.has(r)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=n;"function"==typeof e&&"function"==typeof i&&(e=e.apply(this,arguments));let a=arguments.length-1,s=arguments[a];if("function"!=typeof s)return t.trace(r,e,()=>i.apply(this,arguments));{let n=t.getContext().bind(eB.active(),s);return t.trace(r,e,(e,t)=>(arguments[a]=function(e){return null==t||t(e),n.apply(this,arguments)},i.apply(this,arguments)))}}:i}startSpan(...e){let[t,r]=e,n=this.getSpanContext((null==r?void 0:r.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,r,n)}getSpanContext(e){return e?eq.setSpan(eB.active(),e):void 0}getRootSpanAttributes(){let e=eB.active().getValue(eY);return eX.get(e)}setRootSpanAttribute(e,t){let r=eB.active().getValue(eY),n=eX.get(r);n&&!n.has(e)&&n.set(e,t)}withSpan(e,t){let r=eq.setSpan(eB.active(),e);return eB.with(r,t)}},()=>o),e1="__prerender_bypass";Symbol("__next_preview_data"),Symbol(e1);class e2{constructor(e,t,r,n){var i;const a=e&&function(e,t){let r=eb.from(e.headers);return{isOnDemandRevalidate:r.get("x-prerender-revalidate")===t.previewModeId,revalidateOnlyGenerated:r.has("x-prerender-revalidate-if-generated")}}(t,e).isOnDemandRevalidate,s=null==(i=r.get(e1))?void 0:i.value;this._isEnabled=!!(!a&&s&&e&&s===e.previewModeId),this._previewModeId=null==e?void 0:e.previewModeId,this._mutableCookies=n}get isEnabled(){return this._isEnabled}enable(){if(!this._previewModeId)throw Object.defineProperty(Error("Invariant: previewProps missing previewModeId this should never happen"),"__NEXT_ERROR_CODE",{value:"E93",enumerable:!1,configurable:!0});this._mutableCookies.set({name:e1,value:this._previewModeId,httpOnly:!0,sameSite:"none",secure:!0,path:"/"}),this._isEnabled=!0}disable(){this._mutableCookies.set({name:e1,value:"",httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:new Date(0)}),this._isEnabled=!1}}function e5(e,t){if("x-middleware-set-cookie"in e.headers&&"string"==typeof e.headers["x-middleware-set-cookie"]){let r=e.headers["x-middleware-set-cookie"],n=new Headers;for(let e of v(r))n.append("set-cookie",e);for(let e of new eo.ResponseCookies(n).getAll())t.set(e)}}var e6=e.i(419499),e3=e.i(39513),e3=e3,e4=e.i(501858),e8=e.i(360576),ew=ew,e9=e.i(951615);process.env.NEXT_PRIVATE_DEBUG_CACHE,Symbol.for("@next/cache-handlers");let e7=Symbol.for("@next/cache-handlers-map"),te=Symbol.for("@next/cache-handlers-set"),tt=globalThis;function tr(){if(tt[e7])return tt[e7].entries()}async function tn(e,t){if(!e)return t();let r=ti(e);try{return await t()}finally{var n,i;let t,a,s=(n=r,i=ti(e),t=new Set(n.pendingRevalidatedTags.map(e=>{let t="object"==typeof e.profile?JSON.stringify(e.profile):e.profile||"";return`${e.tag}:${t}`})),a=new Set(n.pendingRevalidateWrites),{pendingRevalidatedTags:i.pendingRevalidatedTags.filter(e=>{let r="object"==typeof e.profile?JSON.stringify(e.profile):e.profile||"";return!t.has(`${e.tag}:${r}`)}),pendingRevalidates:Object.fromEntries(Object.entries(i.pendingRevalidates).filter(([e])=>!(e in n.pendingRevalidates))),pendingRevalidateWrites:i.pendingRevalidateWrites.filter(e=>!a.has(e))});await ts(e,s)}}function ti(e){return{pendingRevalidatedTags:e.pendingRevalidatedTags?[...e.pendingRevalidatedTags]:[],pendingRevalidates:{...e.pendingRevalidates},pendingRevalidateWrites:e.pendingRevalidateWrites?[...e.pendingRevalidateWrites]:[]}}async function ta(e,t,r){if(0===e.length)return;let n=function(){if(tt[te])return tt[te].values()}(),i=[],a=new Map;for(let t of e){let e,r=t.profile;for(let[t]of a)if("string"==typeof t&&"string"==typeof r&&t===r||"object"==typeof t&&"object"==typeof r&&JSON.stringify(t)===JSON.stringify(r)||t===r){e=t;break}let n=e||r;a.has(n)||a.set(n,[]),a.get(n).push(t.tag)}for(let[e,o]of a){let a;if(e){let t;if("object"==typeof e)t=e;else if("string"==typeof e){var s;if(!(t=null==r||null==(s=r.cacheLifeProfiles)?void 0:s[e]))throw Object.defineProperty(Error(`Invalid profile provided "${e}" must be configured under cacheLife in next.config or be "max"`),"__NEXT_ERROR_CODE",{value:"E873",enumerable:!1,configurable:!0})}t&&(a={expire:t.expire})}for(let t of n||[])e?i.push(null==t.updateTags?void 0:t.updateTags.call(t,o,a)):i.push(null==t.updateTags?void 0:t.updateTags.call(t,o));t&&i.push(t.revalidateTag(o,a))}await Promise.all(i)}async function ts(e,t){let r=(null==t?void 0:t.pendingRevalidatedTags)??e.pendingRevalidatedTags??[],n=(null==t?void 0:t.pendingRevalidates)??e.pendingRevalidates??{},i=(null==t?void 0:t.pendingRevalidateWrites)??e.pendingRevalidateWrites??[];return Promise.all([ta(r,e.incrementalCache,e),...Object.values(n),...i])}var to=e.i(643003),e3=e3;let tl=(0,to.createAsyncLocalStorage)();class tc{constructor({waitUntil:e,onClose:t,onTaskError:r}){this.workUnitStores=new Set,this.waitUntil=e,this.onClose=t,this.onTaskError=r,this.callbackQueue=new e4.default,this.callbackQueue.pause()}after(e){if(eH(e))this.waitUntil||tu(),this.waitUntil(e.catch(e=>this.reportTaskError("promise",e)));else if("function"==typeof e)this.addCallback(e);else throw Object.defineProperty(Error("`after()`: Argument must be a promise or a function"),"__NEXT_ERROR_CODE",{value:"E50",enumerable:!1,configurable:!0})}addCallback(e){this.waitUntil||tu();let t=e3.workUnitAsyncStorageInstance.getStore();t&&this.workUnitStores.add(t);let r=tl.getStore(),n=r?r.rootTaskSpawnPhase:null==t?void 0:t.phase;this.runCallbacksOnClosePromise||(this.runCallbacksOnClosePromise=this.runCallbacksOnClose(),this.waitUntil(this.runCallbacksOnClosePromise));let i=(0,to.bindSnapshot)(async()=>{try{await tl.run({rootTaskSpawnPhase:n},()=>e())}catch(e){this.reportTaskError("function",e)}});this.callbackQueue.add(i)}async runCallbacksOnClose(){return await new Promise(e=>this.onClose(e)),this.runCallbacks()}async runCallbacks(){if(0===this.callbackQueue.size)return;for(let e of this.workUnitStores)e.phase="after";let e=ew.workAsyncStorageInstance.getStore();if(!e)throw Object.defineProperty(new e8.InvariantError("Missing workStore in AfterContext.runCallbacks"),"__NEXT_ERROR_CODE",{value:"E547",enumerable:!1,configurable:!0});return tn(e,()=>(this.callbackQueue.start(),this.callbackQueue.onIdle()))}reportTaskError(e,t){if(console.error("promise"===e?"A promise passed to `after()` rejected:":"An error occurred in a function passed to `after()`:",t),this.onTaskError)try{null==this.onTaskError||this.onTaskError.call(this,t)}catch(e){console.error(Object.defineProperty(new e8.InvariantError("`onTaskError` threw while handling an error thrown from an `after` task",{cause:e}),"__NEXT_ERROR_CODE",{value:"E569",enumerable:!1,configurable:!0}))}}}function tu(){throw Object.defineProperty(Error("`after()` will not work correctly, because `waitUntil` is not available in the current environment."),"__NEXT_ERROR_CODE",{value:"E91",enumerable:!1,configurable:!0})}function td(e){let t,r={then:(n,i)=>(t||(t=Promise.resolve(e())),t.then(e=>{r.value=e}).catch(()=>{}),t.then(n,i))};return r}var ew=ew;class th{onClose(e){if(this.isClosed)throw Object.defineProperty(Error("Cannot subscribe to a closed CloseController"),"__NEXT_ERROR_CODE",{value:"E365",enumerable:!1,configurable:!0});this.target.addEventListener("close",e),this.listeners++}dispatchClose(){if(this.isClosed)throw Object.defineProperty(Error("Cannot close a CloseController multiple times"),"__NEXT_ERROR_CODE",{value:"E229",enumerable:!1,configurable:!0});this.listeners>0&&this.target.dispatchEvent(new Event("close")),this.isClosed=!0}constructor(){this.target=new EventTarget,this.listeners=0,this.isClosed=!1}}function tp(){return{previewModeId:process.env.__NEXT_PREVIEW_MODE_ID||"",previewModeSigningKey:process.env.__NEXT_PREVIEW_MODE_SIGNING_KEY||"",previewModeEncryptionKey:process.env.__NEXT_PREVIEW_MODE_ENCRYPTION_KEY||""}}let tf=Symbol.for("@next/request-context");async function tg(e,t,r){let n=new Set;for(let t of(e=>{let t=["/layout"];if(e.startsWith("/")){let r=e.split("/");for(let e=1;e<r.length+1;e++){let n=r.slice(0,e).join("/");n&&(n.endsWith("/page")||n.endsWith("/route")||(n=`${n}${!n.endsWith("/")?"/":""}layout`),t.push(n))}}return t})(e))t=`${w}${t}`,n.add(t);if(t.pathname&&(!r||0===r.size)){let e=`${w}${t.pathname}`;n.add(e)}n.has(`${w}/`)&&n.add(`${w}/index`),n.has(`${w}/index`)&&n.add(`${w}/`);let i=Array.from(n);return{tags:i,expirationsByCacheKind:function(e){let t=new Map,r=tr();if(r)for(let[n,i]of r)"getExpiration"in i&&t.set(n,td(async()=>i.getExpiration(e)));return t}(i)}}class tm extends ec{constructor(e){super(e.input,e.init),this.sourcePage=e.page}get request(){throw Object.defineProperty(new m({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}respondWith(){throw Object.defineProperty(new m({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}waitUntil(){throw Object.defineProperty(new m({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}}let ty={keys:e=>Array.from(e.keys()),get:(e,t)=>e.get(t)??void 0},tb=(e,t)=>e0().withPropagatedContext(e.headers,t,ty),tw=!1;async function t_(t){var r,n,i,a;let s,o,l,c,u;!function(){if(!tw&&(tw=!0,"true"===process.env.NEXT_PRIVATE_TEST_PROXY)){let{interceptTestApis:t,wrapRequestHandler:r}=e.r(167449);t(),tb=r(tb)}}(),await f();let d=void 0!==globalThis.__BUILD_MANIFEST;t.request.url=t.request.url.replace(/\.rsc($|\?)/,"$1");let h=t.bypassNextUrl?new URL(t.request.url):new M(t.request.url,{headers:t.request.headers,nextConfig:t.request.nextConfig});for(let e of[...h.searchParams.keys()]){let t=h.searchParams.getAll(e),r=function(e){for(let t of["nxtP","nxtI"])if(e!==t&&e.startsWith(t))return e.substring(t.length);return null}(e);if(r){for(let e of(h.searchParams.delete(r),t))h.searchParams.append(r,e);h.searchParams.delete(e)}}let p=process.env.__NEXT_BUILD_ID||"";"buildId"in h&&(p=h.buildId||"",h.buildId="");let g=function(e){let t=new Headers;for(let[r,n]of Object.entries(e))for(let e of Array.isArray(n)?n:[n])void 0!==e&&("number"==typeof e&&(e=e.toString()),t.append(r,e));return t}(t.request.headers),m=g.has("x-nextjs-data"),y="1"===g.get(em.RSC_HEADER);m&&"/index"===h.pathname&&(h.pathname="/");let b=new Map;if(!d)for(let e of em.FLIGHT_HEADERS){let t=g.get(e);null!==t&&(b.set(e,t),g.delete(e))}let w=h.searchParams.get(em.NEXT_RSC_UNION_QUERY),_=new tm({page:t.page,input:((c=(l="string"==typeof h)?new URL(h):h).searchParams.delete(em.NEXT_RSC_UNION_QUERY),l?c.toString():c).toString(),init:{body:t.request.body,headers:g,method:t.request.method,nextConfig:t.request.nextConfig,signal:t.request.signal}});m&&Object.defineProperty(_,"__isData",{enumerable:!1,value:!0}),!globalThis.__incrementalCacheShared&&t.IncrementalCache&&(globalThis.__incrementalCache=new t.IncrementalCache({CurCacheHandler:t.incrementalCacheHandler,minimalMode:!0,fetchCacheKeyPrefix:"",dev:!1,requestHeaders:t.request.headers,getPrerenderManifest:()=>({version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:tp()})}));let v=t.request.waitUntil??(null==(r=null==(u=globalThis[tf])?void 0:u.get())?void 0:r.waitUntil),x=new R({request:_,page:t.page,context:v?{waitUntil:v}:void 0});if((s=await tb(_,()=>{if("/middleware"===t.page||"/src/middleware"===t.page||"/proxy"===t.page||"/src/proxy"===t.page){let e=x.waitUntil.bind(x),r=new th;return e0().trace(eD.execute,{spanName:`middleware ${_.method}`,attributes:{"http.target":_.nextUrl.pathname,"http.method":_.method}},async()=>{try{var n,i,a,s,l,c;let u=tp(),d=await tg("/",_.nextUrl,null),h=(l=_.nextUrl,c=e=>{o=e},function(e,t,r,n,i,a,s,o,l,c,u,d){function h(e){r&&r.setHeader("Set-Cookie",e)}let p={};return{type:"request",phase:e,implicitTags:a,url:{pathname:n.pathname,search:n.search??""},rootParams:i,get headers(){return p.headers||(p.headers=function(e){let t=eb.from(e);for(let e of em.FLIGHT_HEADERS)t.delete(e);return eb.seal(t)}(t.headers)),p.headers},get cookies(){if(!p.cookies){let e=new eo.RequestCookies(eb.from(t.headers));e5(t,e),p.cookies=ev.seal(e)}return p.cookies},set cookies(value){p.cookies=value},get mutableCookies(){if(!p.mutableCookies){var f,g;let e,n=(f=t.headers,g=s||(r?h:void 0),e=new eo.RequestCookies(eb.from(f)),eE.wrap(e,g));e5(t,n),p.mutableCookies=n}return p.mutableCookies},get userspaceMutableCookies(){if(!p.userspaceMutableCookies){var m;let e;m=this,p.userspaceMutableCookies=e=new Proxy(m.mutableCookies,{get(t,r,n){switch(r){case"delete":return function(...r){return ek(m,"cookies().delete"),t.delete(...r),e};case"set":return function(...r){return ek(m,"cookies().set"),t.set(...r),e};default:return eu.get(t,r,n)}}})}return p.userspaceMutableCookies},get draftMode(){return p.draftMode||(p.draftMode=new e2(l,t,this.cookies,this.mutableCookies)),p.draftMode},renderResumeDataCache:null,isHmrRefresh:c,serverComponentsHmrCache:u||globalThis.__serverComponentsHmrCache,devFallbackParams:null}}("action",_,void 0,l,{},d,c,null,u,!1,void 0,null)),f=function({page:e,renderOpts:t,isPrefetchRequest:r,buildId:n,previouslyRevalidatedTags:i,nonce:a}){var s;let o=!t.shouldWaitOnAllReady&&!t.supportsDynamicResponse&&!t.isDraftMode&&!t.isPossibleServerAction,l=t.dev??!1,c=l||o&&(!!process.env.NEXT_DEBUG_BUILD||"1"===process.env.NEXT_SSG_FETCH_METRICS),u={isStaticGeneration:o,page:e,route:(s=e.split("/").reduce((e,t,r,n)=>t?"("===t[0]&&t.endsWith(")")||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:`${e}/${t}`:e,"")).startsWith("/")?s:`/${s}`,incrementalCache:t.incrementalCache||globalThis.__incrementalCache,cacheLifeProfiles:t.cacheLifeProfiles,isBuildTimePrerendering:t.nextExport,hasReadableErrorStacks:t.hasReadableErrorStacks,fetchCache:t.fetchCache,isOnDemandRevalidate:t.isOnDemandRevalidate,isDraftMode:t.isDraftMode,isPrefetchRequest:r,buildId:n,reactLoadableManifest:(null==t?void 0:t.reactLoadableManifest)||{},assetPrefix:(null==t?void 0:t.assetPrefix)||"",nonce:a,afterContext:function(e){let{waitUntil:t,onClose:r,onAfterTaskError:n}=e;return new tc({waitUntil:t,onClose:r,onTaskError:n})}(t),cacheComponentsEnabled:t.cacheComponents,dev:l,previouslyRevalidatedTags:i,refreshTagsByCacheKind:function(){let e=new Map,t=tr();if(t)for(let[r,n]of t)"refreshTags"in n&&e.set(r,td(async()=>n.refreshTags()));return e}(),runInCleanSnapshot:(0,to.createSnapshot)(),shouldTrackFetchMetrics:c,reactServerErrorsByDigest:new Map};return t.store=u,u}({page:"/",renderOpts:{cacheLifeProfiles:null==(i=t.request.nextConfig)||null==(n=i.experimental)?void 0:n.cacheLife,cacheComponents:!1,experimental:{isRoutePPREnabled:!1,authInterrupts:!!(null==(s=t.request.nextConfig)||null==(a=s.experimental)?void 0:a.authInterrupts)},supportsDynamicResponse:!0,waitUntil:e,onClose:r.onClose.bind(r),onAfterTaskError:void 0},isPrefetchRequest:"1"===_.headers.get(em.NEXT_ROUTER_PREFETCH_HEADER),buildId:p??"",previouslyRevalidatedTags:[]});return await ew.workAsyncStorageInstance.run(f,()=>e3.workUnitAsyncStorageInstance.run(h,t.handler,_,x))}finally{setTimeout(()=>{r.dispatchClose()},0)}})}return t.handler(_,x)}))&&!(s instanceof Response))throw Object.defineProperty(TypeError("Expected an instance of Response to be returned"),"__NEXT_ERROR_CODE",{value:"E567",enumerable:!1,configurable:!0});s&&o&&s.headers.set("set-cookie",o);let E=null==s?void 0:s.headers.get("x-middleware-rewrite");if(s&&E&&(y||!d)){let e=new M(E,{forceLocale:!0,headers:t.request.headers,nextConfig:t.request.nextConfig});d||e.host!==_.nextUrl.host||(e.buildId=p||e.buildId,s.headers.set("x-middleware-rewrite",String(e)));let{url:r,isRelative:o}=eg(e.toString(),h.toString());!d&&m&&s.headers.set("x-nextjs-rewrite",r);let l=!o&&(null==(a=t.request.nextConfig)||null==(i=a.experimental)||null==(n=i.clientParamParsingOrigins)?void 0:n.some(t=>new RegExp(t).test(e.origin)));y&&(o||l)&&(h.pathname!==e.pathname&&s.headers.set(em.NEXT_REWRITTEN_PATH_HEADER,e.pathname),h.search!==e.search&&s.headers.set(em.NEXT_REWRITTEN_QUERY_HEADER,e.search.slice(1)))}if(s&&E&&y&&w){let e=new URL(E);e.searchParams.has(em.NEXT_RSC_UNION_QUERY)||(e.searchParams.set(em.NEXT_RSC_UNION_QUERY,w),s.headers.set("x-middleware-rewrite",e.toString()))}let S=null==s?void 0:s.headers.get("Location");if(s&&S&&!d){let e=new M(S,{forceLocale:!1,headers:t.request.headers,nextConfig:t.request.nextConfig});s=new Response(s.body,s),e.host===h.host&&(e.buildId=p||e.buildId,s.headers.set("Location",eg(e,h).url)),m&&(s.headers.delete("Location"),s.headers.set("x-nextjs-redirect",eg(e.toString(),h.toString()).url))}let k=s||ef.next(),A=k.headers.get("x-middleware-override-headers"),O=[];if(A){for(let[e,t]of b)k.headers.set(`x-middleware-request-${e}`,t),O.push(e);O.length>0&&k.headers.set("x-middleware-override-headers",A+","+O.join(","))}return{response:k,waitUntil:("internal"===x[T].kind?Promise.all(x[T].promises).then(()=>{}):void 0)??Promise.resolve(),fetchMetrics:_.fetchMetrics}}var tv=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},tx=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};function tE(e){let t=e?"__Secure-":"";return{sessionToken:{name:`${t}authjs.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},callbackUrl:{name:`${t}authjs.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},csrfToken:{name:`${e?"__Host-":""}authjs.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},pkceCodeVerifier:{name:`${t}authjs.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},state:{name:`${t}authjs.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},nonce:{name:`${t}authjs.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},webauthnChallenge:{name:`${t}authjs.challenge`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}}}}class tS{constructor(e,t,r){if(ik.add(this),iT.set(this,{}),iA.set(this,void 0),iR.set(this,void 0),tv(this,iR,r,"f"),tv(this,iA,e,"f"),!t)return;const{name:n}=e;for(const[e,r]of Object.entries(t))e.startsWith(n)&&r&&(tx(this,iT,"f")[e]=r)}get value(){return Object.keys(tx(this,iT,"f")).sort((e,t)=>parseInt(e.split(".").pop()||"0")-parseInt(t.split(".").pop()||"0")).map(e=>tx(this,iT,"f")[e]).join("")}chunk(e,t){let r=tx(this,ik,"m",iC).call(this);for(let n of tx(this,ik,"m",iO).call(this,{name:tx(this,iA,"f").name,value:e,options:{...tx(this,iA,"f").options,...t}}))r[n.name]=n;return Object.values(r)}clean(){return Object.values(tx(this,ik,"m",iC).call(this))}}iT=new WeakMap,iA=new WeakMap,iR=new WeakMap,ik=new WeakSet,iO=function(e){let t=Math.ceil(e.value.length/3936);if(1===t)return tx(this,iT,"f")[e.name]=e.value,[e];let r=[];for(let n=0;n<t;n++){let t=`${e.name}.${n}`,i=e.value.substr(3936*n,3936);r.push({...e,name:t,value:i}),tx(this,iT,"f")[t]=i}return tx(this,iR,"f").debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:160,valueSize:e.value.length,chunks:r.map(e=>e.value.length+160)}),r},iC=function(){let e={};for(let t in tx(this,iT,"f"))delete tx(this,iT,"f")?.[t],e[t]={name:t,value:"",options:{...tx(this,iA,"f").options,maxAge:0}};return e};class tk extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);const r=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${r}`}}class tT extends tk{}tT.kind="signIn";class tA extends tk{}tA.type="AdapterError";class tR extends tk{}tR.type="AccessDenied";class tO extends tk{}tO.type="CallbackRouteError";class tC extends tk{}tC.type="ErrorPageLoop";class tP extends tk{}tP.type="EventError";class tI extends tk{}tI.type="InvalidCallbackUrl";class tj extends tT{constructor(){super(...arguments),this.code="credentials"}}tj.type="CredentialsSignin";class t$ extends tk{}t$.type="InvalidEndpoints";class tN extends tk{}tN.type="InvalidCheck";class tU extends tk{}tU.type="JWTSessionError";class tD extends tk{}tD.type="MissingAdapter";class tL extends tk{}tL.type="MissingAdapterMethods";class tM extends tk{}tM.type="MissingAuthorize";class tH extends tk{}tH.type="MissingSecret";class tW extends tT{}tW.type="OAuthAccountNotLinked";class tB extends tT{}tB.type="OAuthCallbackError";class tK extends tk{}tK.type="OAuthProfileParseError";class tq extends tk{}tq.type="SessionTokenError";class tV extends tk{}tV.type="SignOutError";class tJ extends tk{}tJ.type="UnknownAction";class tz extends tk{}tz.type="UnsupportedStrategy";class tF extends tk{}tF.type="InvalidProvider";class tG extends tk{}tG.type="UntrustedHost";class tX extends tk{}tX.type="Verification";class tY extends tT{}tY.type="MissingCSRF";let tQ=new Set(["CredentialsSignin","OAuthAccountNotLinked","OAuthCallbackError","AccessDenied","Verification","MissingCSRF","AccountNotLinked","WebAuthnVerificationError"]);class tZ extends tk{}tZ.type="DuplicateConditionalUI";class t0 extends tk{}t0.type="MissingWebAuthnAutocomplete";class t1 extends tk{}t1.type="WebAuthnVerificationError";class t2 extends tT{}t2.type="AccountNotLinked";class t5 extends tk{}t5.type="ExperimentalFeatureNotEnabled";let t6=!1;function t3(e,t){try{return/^https?:/.test(new URL(e,e.startsWith("/")?t:void 0).protocol)}catch{return!1}}let t4=!1,t8=!1,t9=!1,t7=["createVerificationToken","useVerificationToken","getUserByEmail"],re=["createUser","getUser","getUserByEmail","getUserByAccount","updateUser","linkAccount","createSession","getSessionAndUser","updateSession","deleteSession"],rt=["createUser","getUser","linkAccount","getAccount","getAuthenticator","createAuthenticator","listAuthenticatorsByUserId","updateAuthenticatorCounter"],rr=async(e,t,r,n,i)=>{let{crypto:{subtle:a}}=(()=>{if("u">typeof globalThis)return globalThis;if("u">typeof self)return self;throw Error("unable to locate global object")})();return new Uint8Array(await a.deriveBits({name:"HKDF",hash:`SHA-${e.substr(3)}`,salt:r,info:n},await a.importKey("raw",t,"HKDF",!1,["deriveBits"]),i<<3))};function rn(e,t){if("string"==typeof e)return new TextEncoder().encode(e);if(!(e instanceof Uint8Array))throw TypeError(`"${t}"" must be an instance of Uint8Array or a string`);return e}async function ri(e,t,r,n,i){return rr(function(e){switch(e){case"sha256":case"sha384":case"sha512":case"sha1":return e;default:throw TypeError('unsupported "digest" value')}}(e),function(e){let t=rn(e,"ikm");if(!t.byteLength)throw TypeError('"ikm" must be at least one byte in length');return t}(t),rn(r,"salt"),function(e){let t=rn(e,"info");if(t.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return t}(n),function(e,t){if("number"!=typeof e||!Number.isInteger(e)||e<1)throw TypeError('"keylen" must be a positive integer');if(e>255*(parseInt(t.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return e}(i,e))}let ra=new TextEncoder,rs=new TextDecoder;function ro(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t}function rl(e,t,r){if(t<0||t>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function rc(e){let t=Math.floor(e/0x100000000),r=new Uint8Array(8);return rl(r,t,0),rl(r,e%0x100000000,4),r}function ru(e){let t=new Uint8Array(4);return rl(t,e),t}function rd(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n>127)throw TypeError("non-ASCII string encountered in encode()");t[r]=n}return t}function rh(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof e?e:rs.decode(e),{alphabet:"base64url"});let t=e;t instanceof Uint8Array&&(t=rs.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/");try{var r=t;if(Uint8Array.fromBase64)return Uint8Array.fromBase64(r);let e=atob(r),n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function rp(e){let t=e;return("string"==typeof t&&(t=ra.encode(t)),Uint8Array.prototype.toBase64)?t.toBase64({alphabet:"base64url",omitPadding:!0}):(function(e){if(Uint8Array.prototype.toBase64)return e.toBase64();let t=[];for(let r=0;r<e.length;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join(""))})(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}e.s(["decode",()=>rh,"encode",()=>rp],498874);let rf=Symbol();class rg extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class rm extends rg{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class ry extends rg{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class rb extends rg{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class rw extends rg{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class r_ extends rg{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(e="decryption operation failed",t){super(e,t)}}class rv extends rg{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class rx extends rg{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class rE extends rg{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class rS extends rg{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t)}}function rk(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new rw(`Unsupported JWE Algorithm: ${e}`)}}function rT(e,t){if(t.length<<3!==rk(e))throw new rv("Invalid Initialization Vector length")}function rA(e,t){let r=e.byteLength<<3;if(r!==t)throw new rv(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)}let rR=(e,t="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`);function rO(e,t,r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if("AES-GCM"!==e.algorithm.name)throw rR("AES-GCM");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw rR(r,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if("AES-KW"!==e.algorithm.name)throw rR("AES-KW");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw rR(r,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":break;default:throw rR("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if("PBKDF2"!==e.algorithm.name)throw rR("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if("RSA-OAEP"!==e.algorithm.name)throw rR("RSA-OAEP");let r=parseInt(t.slice(9),10)||1;if(parseInt(e.algorithm.hash.name.slice(4),10)!==r)throw rR(`SHA-${r}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}if(r&&!e.usages.includes(r))throw TypeError(`CryptoKey does not support this operation, its usages must include ${r}.`)}function rC(e,t,...r){if((r=r.filter(Boolean)).length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let rP=(e,...t)=>rC("Key must be ",e,...t),rI=(e,t,...r)=>rC(`Key for the ${e} algorithm must be `,t,...r);function rj(e){if(!r$(e))throw Error("CryptoKey instance expected")}let r$=e=>{if(e?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return e instanceof CryptoKey}catch{return!1}},rN=e=>e?.[Symbol.toStringTag]==="KeyObject",rU=e=>r$(e)||rN(e);async function rD(e,t,r,n,i){if(!(r instanceof Uint8Array))throw TypeError(rP(r,"Uint8Array"));let a=parseInt(e.slice(1,4),10),s=await crypto.subtle.importKey("raw",r.subarray(a>>3),"AES-CBC",!1,["encrypt"]),o=await crypto.subtle.importKey("raw",r.subarray(0,a>>3),{hash:`SHA-${a<<1}`,name:"HMAC"},!1,["sign"]),l=new Uint8Array(await crypto.subtle.encrypt({iv:n,name:"AES-CBC"},s,t)),c=ro(i,n,l,rc(i.length<<3));return{ciphertext:l,tag:new Uint8Array((await crypto.subtle.sign("HMAC",o,c)).slice(0,a>>3)),iv:n}}async function rL(e,t,r,n,i){let a;r instanceof Uint8Array?a=await crypto.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(rO(r,e,"encrypt"),a=r);let s=new Uint8Array(await crypto.subtle.encrypt({additionalData:i,iv:n,name:"AES-GCM",tagLength:128},a,t)),o=s.slice(-16);return{ciphertext:s.slice(0,-16),tag:o,iv:n}}async function rM(e,t,r,n,i){if(!r$(r)&&!(r instanceof Uint8Array))throw TypeError(rP(r,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(n)rT(e,n);else n=crypto.getRandomValues(new Uint8Array(rk(e)>>3));switch(e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&rA(r,parseInt(e.slice(-3),10)),rD(e,t,r,n,i);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&rA(r,parseInt(e.slice(1,4),10)),rL(e,t,r,n,i);default:throw new rw("Unsupported JWE Content Encryption Algorithm")}}function rH(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function rW(e,t,r){return e instanceof Uint8Array?crypto.subtle.importKey("raw",e,"AES-KW",!0,[r]):(rO(e,t,r),e)}async function rB(e,t,r){let n=await rW(t,e,"wrapKey");rH(n,e);let i=await crypto.subtle.importKey("raw",r,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",i,n,"AES-KW"))}async function rK(e,t,r){let n=await rW(t,e,"unwrapKey");rH(n,e);let i=await crypto.subtle.unwrapKey("raw",r,n,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",i))}async function rq(e,t){let r=`SHA-${e.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(r,t))}function rV(e){return ro(ru(e.length),e)}async function rJ(e,t,r){let n=t>>3,i=Math.ceil(n/32),a=new Uint8Array(32*i);for(let t=1;t<=i;t++){let n=new Uint8Array(4+e.length+r.length);n.set(ru(t),0),n.set(e,4),n.set(r,4+e.length);let i=await rq("sha256",n);a.set(i,(t-1)*32)}return a.slice(0,n)}async function rz(e,t,r,n,i=new Uint8Array,a=new Uint8Array){var s;rO(e,"ECDH"),rO(t,"ECDH","deriveBits");let o=ro(rV(rd(r)),rV(i),rV(a),ru(n),new Uint8Array);return rJ(new Uint8Array(await crypto.subtle.deriveBits({name:e.algorithm.name,public:e},t,"X25519"===(s=e).algorithm.name?256:Math.ceil(parseInt(s.algorithm.namedCurve.slice(-3),10)/8)<<3)),n,o)}function rF(e){switch(e.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return"X25519"===e.algorithm.name}}async function rG(e,t,r,n){if(!(e instanceof Uint8Array)||e.length<8)throw new rv("PBES2 Salt Input must be 8 or more octets");let i=ro(rd(t),Uint8Array.of(0),e),a=parseInt(t.slice(13,16),10),s={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:i},o=await (n instanceof Uint8Array?crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveBits"]):(rO(n,t,"deriveBits"),n));return new Uint8Array(await crypto.subtle.deriveBits(s,o,a))}async function rX(e,t,r,n=2048,i=crypto.getRandomValues(new Uint8Array(16))){let a=await rG(i,e,n,t);return{encryptedKey:await rB(e.slice(-6),a,r),p2c:n,p2s:rp(i)}}async function rY(e,t,r,n,i){let a=await rG(i,e,n,t);return rK(e.slice(-6),a,r)}function rQ(e,t){if(e.startsWith("RS")||e.startsWith("PS")){let{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}}let rZ=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new rw(`alg ${e} is not supported either by JOSE or your javascript runtime`)}};async function r0(e,t,r){return rO(t,e,"encrypt"),rQ(e,t),new Uint8Array(await crypto.subtle.encrypt(rZ(e),t,r))}async function r1(e,t,r){return rO(t,e,"decrypt"),rQ(e,t),new Uint8Array(await crypto.subtle.decrypt(rZ(e),t,r))}function r2(e){if("object"!=typeof e||null===e||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}let r5=e=>r2(e)&&"string"==typeof e.kty;async function r6(e){if(!e.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:t,keyUsages:r}=function(e){let t,r;switch(e.kty){case"AKP":switch(e.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":t={name:e.alg},r=e.priv?["sign"]:["verify"];break;default:throw new rw('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new rw('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new rw('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"Ed25519":case"EdDSA":t={name:"Ed25519"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new rw('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new rw('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}(e),n={...e};return"AKP"!==n.kty&&delete n.alg,delete n.use,crypto.subtle.importKey("jwk",n,t,e.ext??(!e.d&&!e.priv),e.key_ops??r)}let r3=async(e,t,n,i=!1)=>{let a=(r||=new WeakMap).get(e);if(a?.[n])return a[n];let s=await r6({...t,alg:n});return i&&Object.freeze(e),a?a[n]=s:r.set(e,{[n]:s}),s};async function r4(e,t){if(e instanceof Uint8Array||r$(e))return e;if(rN(e)){if("secret"===e.type)return e.export();if("toCryptoKey"in e&&"function"==typeof e.toCryptoKey)try{return((e,t)=>{let n,i=(r||=new WeakMap).get(e);if(i?.[t])return i[t];let a="public"===e.type,s=!!a;if("x25519"===e.asymmetricKeyType){switch(t){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}n=e.toCryptoKey(e.asymmetricKeyType,s,a?[]:["deriveBits"])}if("ed25519"===e.asymmetricKeyType){if("EdDSA"!==t&&"Ed25519"!==t)throw TypeError("given KeyObject instance cannot be used for this algorithm");n=e.toCryptoKey(e.asymmetricKeyType,s,[a?"verify":"sign"])}switch(e.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(t!==e.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");n=e.toCryptoKey(e.asymmetricKeyType,s,[a?"verify":"sign"])}if("rsa"===e.asymmetricKeyType){let r;switch(t){case"RSA-OAEP":r="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":r="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":r="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":r="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(t.startsWith("RSA-OAEP"))return e.toCryptoKey({name:"RSA-OAEP",hash:r},s,a?["encrypt"]:["decrypt"]);n=e.toCryptoKey({name:t.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:r},s,[a?"verify":"sign"])}if("ec"===e.asymmetricKeyType){let r=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(e.asymmetricKeyDetails?.namedCurve);if(!r)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===t&&"P-256"===r&&(n=e.toCryptoKey({name:"ECDSA",namedCurve:r},s,[a?"verify":"sign"])),"ES384"===t&&"P-384"===r&&(n=e.toCryptoKey({name:"ECDSA",namedCurve:r},s,[a?"verify":"sign"])),"ES512"===t&&"P-521"===r&&(n=e.toCryptoKey({name:"ECDSA",namedCurve:r},s,[a?"verify":"sign"])),t.startsWith("ECDH-ES")&&(n=e.toCryptoKey({name:"ECDH",namedCurve:r},s,a?[]:["deriveBits"]))}if(!n)throw TypeError("given KeyObject instance cannot be used for this algorithm");return i?i[t]=n:r.set(e,{[t]:n}),n})(e,t)}catch(e){if(e instanceof TypeError)throw e}let n=e.export({format:"jwk"});return r3(e,n,t)}if(r5(e))return e.k?rh(e.k):r3(e,e,t,!0);throw Error("unreachable")}function r8(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new rw(`Unsupported JWE Algorithm: ${e}`)}}let r9=e=>crypto.getRandomValues(new Uint8Array(r8(e)>>3));async function r7(e){if(rN(e))if("secret"!==e.type)return e.export({format:"jwk"});else e=e.export();if(e instanceof Uint8Array)return{kty:"oct",k:rp(e)};if(!r$(e))throw TypeError(rP(e,"CryptoKey","KeyObject","Uint8Array"));if(!e.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:t,key_ops:r,alg:n,use:i,...a}=await crypto.subtle.exportKey("jwk",e);return"AKP"===a.kty&&(a.alg=n),a}async function ne(e){return r7(e)}async function nt(e,t){if(!(e instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let r={name:"HMAC",hash:"SHA-256"},n=await crypto.subtle.generateKey(r,!1,["sign"]),i=new Uint8Array(await crypto.subtle.sign(r,n,e)),a=new Uint8Array(await crypto.subtle.sign(r,n,t)),s=0,o=-1;for(;++o<32;)s|=i[o]^a[o];return 0===s}async function nr(e,t,r,n,i,a){let s,o;if(!(t instanceof Uint8Array))throw TypeError(rP(t,"Uint8Array"));let l=parseInt(e.slice(1,4),10),c=await crypto.subtle.importKey("raw",t.subarray(l>>3),"AES-CBC",!1,["decrypt"]),u=await crypto.subtle.importKey("raw",t.subarray(0,l>>3),{hash:`SHA-${l<<1}`,name:"HMAC"},!1,["sign"]),d=ro(a,n,r,rc(a.length<<3)),h=new Uint8Array((await crypto.subtle.sign("HMAC",u,d)).slice(0,l>>3));try{s=await nt(i,h)}catch{}if(!s)throw new r_;try{o=new Uint8Array(await crypto.subtle.decrypt({iv:n,name:"AES-CBC"},c,r))}catch{}if(!o)throw new r_;return o}async function nn(e,t,r,n,i,a){let s;t instanceof Uint8Array?s=await crypto.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(rO(t,e,"decrypt"),s=t);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:a,iv:n,name:"AES-GCM",tagLength:128},s,ro(r,i)))}catch{throw new r_}}async function ni(e,t,r,n,i,a){if(!r$(t)&&!(t instanceof Uint8Array))throw TypeError(rP(t,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!n)throw new rv("JWE Initialization Vector missing");if(!i)throw new rv("JWE Authentication Tag missing");switch(rT(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&rA(t,parseInt(e.slice(-3),10)),nr(e,t,r,n,i,a);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&rA(t,parseInt(e.slice(1,4),10)),nn(e,t,r,n,i,a);default:throw new rw("Unsupported JWE Content Encryption Algorithm")}}async function na(e,t,r,n){let i=e.slice(0,7),a=await rM(i,r,t,n,new Uint8Array);return{encryptedKey:a.ciphertext,iv:rp(a.iv),tag:rp(a.tag)}}async function ns(e,t,r,n,i){return ni(e.slice(0,7),t,r,n,i,new Uint8Array)}async function no(e,t,r,n,i={}){let a,s,o;switch(e){case"dir":o=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let l;if(rj(r),!rF(r))throw new rw("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:c,apv:u}=i;l=i.epk?await r4(i.epk,e):(await crypto.subtle.generateKey(r.algorithm,!0,["deriveBits"])).privateKey;let{x:d,y:h,crv:p,kty:f}=await ne(l),g=await rz(r,l,"ECDH-ES"===e?t:e,"ECDH-ES"===e?r8(t):parseInt(e.slice(-5,-2),10),c,u);if(s={epk:{x:d,crv:p,kty:f}},"EC"===f&&(s.epk.y=h),c&&(s.apu=rp(c)),u&&(s.apv=rp(u)),"ECDH-ES"===e){o=g;break}o=n||r9(t);let m=e.slice(-6);a=await rB(m,g,o);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":o=n||r9(t),rj(r),a=await r0(e,r,o);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{o=n||r9(t);let{p2c:l,p2s:c}=i;({encryptedKey:a,...s}=await rX(e,r,o,l,c));break}case"A128KW":case"A192KW":case"A256KW":o=n||r9(t),a=await rB(e,r,o);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{o=n||r9(t);let{iv:l}=i;({encryptedKey:a,...s}=await na(e,r,o,l));break}default:throw new rw('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:o,encryptedKey:a,parameters:s}}function nl(...e){let t,r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0}function nc(e,t,r,n,i){let a;if(void 0!==i.crit&&n?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let s of(a=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,n.crit)){if(!a.has(s))throw new rw(`Extension Header Parameter "${s}" is not recognized`);if(void 0===i[s])throw new e(`Extension Header Parameter "${s}" is missing`);if(a.get(s)&&void 0===n[s])throw new e(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(n.crit)}let nu=e=>e?.[Symbol.toStringTag],nd=(e,t,r)=>{if(void 0!==t.use){let e;switch(r){case"sign":case"verify":e="sig";break;case"encrypt":case"decrypt":e="enc"}if(t.use!==e)throw TypeError(`Invalid key for this operation, its "use" must be "${e}" when present`)}if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, its "alg" must be "${e}" when present`);if(Array.isArray(t.key_ops)){let n;switch(!0){case"sign"===r||"verify"===r:case"dir"===e:case e.includes("CBC-HS"):n=r;break;case e.startsWith("PBES2"):n="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(e):n=!e.includes("GCM")&&e.endsWith("KW")?"encrypt"===r?"wrapKey":"unwrapKey":r;break;case"encrypt"===r&&e.startsWith("RSA"):n="wrapKey";break;case"decrypt"===r:n=e.startsWith("RSA")?"unwrapKey":"deriveBits"}if(n&&t.key_ops?.includes?.(n)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${n}" when present`)}return!0};function nh(e,t,r){switch(e.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":((e,t,r)=>{if(!(t instanceof Uint8Array)){if(r5(t)){if("oct"===t.kty&&"string"==typeof t.k&&nd(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!rU(t))throw TypeError(rI(e,t,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==t.type)throw TypeError(`${nu(t)} instances for symmetric algorithms must be of type "secret"`)}})(e,t,r);break;default:((e,t,r)=>{if(r5(t))switch(r){case"decrypt":case"sign":if("oct"!==t.kty&&("AKP"===t.kty&&"string"==typeof t.priv||"string"==typeof t.d)&&nd(e,t,r))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if("oct"!==t.kty&&void 0===t.d&&void 0===t.priv&&nd(e,t,r))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!rU(t))throw TypeError(rI(e,t,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===t.type)throw TypeError(`${nu(t)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===t.type)switch(r){case"sign":throw TypeError(`${nu(t)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${nu(t)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===t.type)switch(r){case"verify":throw TypeError(`${nu(t)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${nu(t)} instances for asymmetric algorithm encryption must be of type "public"`)}})(e,t,r)}}class np{#e;#t;#r;#n;#i;#a;#s;#o;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#e=e}setKeyManagementParameters(e){if(this.#o)throw TypeError("setKeyManagementParameters can only be called once");return this.#o=e,this}setProtectedHeader(e){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setSharedUnprotectedHeader(e){if(this.#r)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#r=e,this}setUnprotectedHeader(e){if(this.#n)throw TypeError("setUnprotectedHeader can only be called once");return this.#n=e,this}setAdditionalAuthenticatedData(e){return this.#i=e,this}setContentEncryptionKey(e){if(this.#a)throw TypeError("setContentEncryptionKey can only be called once");return this.#a=e,this}setInitializationVector(e){if(this.#s)throw TypeError("setInitializationVector can only be called once");return this.#s=e,this}async encrypt(e,t){let r,n,i,a,s,o;if(!this.#t&&!this.#n&&!this.#r)throw new rv("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!nl(this.#t,this.#n,this.#r))throw new rv("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let l={...this.#t,...this.#n,...this.#r};if(nc(rv,new Map,t?.crit,this.#t,l),void 0!==l.zip)throw new rw('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:c,enc:u}=l;if("string"!=typeof c||!c)throw new rv('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof u||!u)throw new rv('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this.#a&&("dir"===c||"ECDH-ES"===c))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${c}`);nh("dir"===c?u:c,e,"encrypt");{let i,a=await r4(e,c);({cek:n,encryptedKey:r,parameters:i}=await no(c,u,a,this.#a,this.#o)),i&&(t&&rf in t?this.#n?this.#n={...this.#n,...i}:this.setUnprotectedHeader(i):this.#t?this.#t={...this.#t,...i}:this.setProtectedHeader(i))}if(this.#t?s=rd(a=rp(JSON.stringify(this.#t))):(a="",s=new Uint8Array),this.#i){let e=rd(o=rp(this.#i));i=ro(s,rd("."),e)}else i=s;let{ciphertext:d,tag:h,iv:p}=await rM(u,this.#e,n,this.#s,i),f={ciphertext:rp(d)};return p&&(f.iv=rp(p)),h&&(f.tag=rp(h)),r&&(f.encrypted_key=rp(r)),o&&(f.aad=o),this.#t&&(f.protected=a),this.#r&&(f.unprotected=this.#r),this.#n&&(f.header=this.#n),f}}class nf{#l;constructor(e){this.#l=new np(e)}setContentEncryptionKey(e){return this.#l.setContentEncryptionKey(e),this}setInitializationVector(e){return this.#l.setInitializationVector(e),this}setProtectedHeader(e){return this.#l.setProtectedHeader(e),this}setKeyManagementParameters(e){return this.#l.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this.#l.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}let ng=e=>Math.floor(e.getTime()/1e3),nm=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function ny(e){let t,r=nm.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let n=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*n);break;case"day":case"days":case"d":t=Math.round(86400*n);break;case"week":case"weeks":case"w":t=Math.round(604800*n);break;default:t=Math.round(0x1e187e0*n)}return"-"===r[1]||"ago"===r[4]?-t:t}function nb(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}let nw=e=>e.includes("/")?e.toLowerCase():`application/${e.toLowerCase()}`;class n_{#c;constructor(e){if(!r2(e))throw TypeError("JWT Claims Set MUST be an object");this.#c=structuredClone(e)}data(){return ra.encode(JSON.stringify(this.#c))}get iss(){return this.#c.iss}set iss(e){this.#c.iss=e}get sub(){return this.#c.sub}set sub(e){this.#c.sub=e}get aud(){return this.#c.aud}set aud(e){this.#c.aud=e}set jti(e){this.#c.jti=e}set nbf(e){"number"==typeof e?this.#c.nbf=nb("setNotBefore",e):e instanceof Date?this.#c.nbf=nb("setNotBefore",ng(e)):this.#c.nbf=ng(new Date)+ny(e)}set exp(e){"number"==typeof e?this.#c.exp=nb("setExpirationTime",e):e instanceof Date?this.#c.exp=nb("setExpirationTime",ng(e)):this.#c.exp=ng(new Date)+ny(e)}set iat(e){void 0===e?this.#c.iat=ng(new Date):e instanceof Date?this.#c.iat=nb("setIssuedAt",ng(e)):"string"==typeof e?this.#c.iat=nb("setIssuedAt",ng(new Date)+ny(e)):this.#c.iat=nb("setIssuedAt",e)}}class nv{#a;#s;#o;#t;#u;#d;#h;#p;constructor(e={}){this.#p=new n_(e)}setIssuer(e){return this.#p.iss=e,this}setSubject(e){return this.#p.sub=e,this}setAudience(e){return this.#p.aud=e,this}setJti(e){return this.#p.jti=e,this}setNotBefore(e){return this.#p.nbf=e,this}setExpirationTime(e){return this.#p.exp=e,this}setIssuedAt(e){return this.#p.iat=e,this}setProtectedHeader(e){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setKeyManagementParameters(e){if(this.#o)throw TypeError("setKeyManagementParameters can only be called once");return this.#o=e,this}setContentEncryptionKey(e){if(this.#a)throw TypeError("setContentEncryptionKey can only be called once");return this.#a=e,this}setInitializationVector(e){if(this.#s)throw TypeError("setInitializationVector can only be called once");return this.#s=e,this}replicateIssuerAsHeader(){return this.#u=!0,this}replicateSubjectAsHeader(){return this.#d=!0,this}replicateAudienceAsHeader(){return this.#h=!0,this}async encrypt(e,t){let r=new nf(this.#p.data());return this.#t&&(this.#u||this.#d||this.#h)&&(this.#t={...this.#t,iss:this.#u?this.#p.iss:void 0,sub:this.#d?this.#p.sub:void 0,aud:this.#h?this.#p.aud:void 0}),r.setProtectedHeader(this.#t),this.#s&&r.setInitializationVector(this.#s),this.#a&&r.setContentEncryptionKey(this.#a),this.#o&&r.setKeyManagementParameters(this.#o),r.encrypt(e,t)}}var nx=e.i(498874),nx=nx;let nE=(e,t)=>{if("string"!=typeof e||!e)throw new rE(`${t} missing or invalid`)};async function nS(e,t){let r,n;if(r5(e))r=e;else if(rU(e))r=await ne(e);else throw TypeError(rP(e,"CryptoKey","KeyObject","JSON Web Key"));if("sha256"!==(t??="sha256")&&"sha384"!==t&&"sha512"!==t)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(r.kty){case"AKP":nE(r.alg,'"alg" (Algorithm) Parameter'),nE(r.pub,'"pub" (Public key) Parameter'),n={alg:r.alg,kty:r.kty,pub:r.pub};break;case"EC":nE(r.crv,'"crv" (Curve) Parameter'),nE(r.x,'"x" (X Coordinate) Parameter'),nE(r.y,'"y" (Y Coordinate) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x,y:r.y};break;case"OKP":nE(r.crv,'"crv" (Subtype of Key Pair) Parameter'),nE(r.x,'"x" (Public Key) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x};break;case"RSA":nE(r.e,'"e" (Exponent) Parameter'),nE(r.n,'"n" (Modulus) Parameter'),n={e:r.e,kty:r.kty,n:r.n};break;case"oct":nE(r.k,'"k" (Key Value) Parameter'),n={k:r.k,kty:r.kty};break;default:throw new rw('"kty" (Key Type) Parameter missing or unsupported')}let i=rd(JSON.stringify(n));return rp(await rq(t,i))}async function nk(e,t,r){let n;if(!r2(e))throw TypeError("JWK must be an object");switch(t??=e.alg,n??=r?.extractable??e.ext,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return rh(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new rw('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return r6({...e,alg:t,ext:n});case"AKP":if("string"!=typeof e.alg||!e.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(void 0!==t&&t!==e.alg)throw TypeError("JWK alg and alg option value mismatch");return r6({...e,ext:n});case"EC":case"OKP":return r6({...e,alg:t,ext:n});default:throw new rw('Unsupported "kty" (Key Type) Parameter value')}}async function nT(e,t,r,n,i){switch(e){case"dir":if(void 0!==r)throw new rv("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new rv("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let i,a;if(!r2(n.epk))throw new rv('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(rj(t),!rF(t))throw new rw("ECDH with the provided key is not allowed or not supported by your javascript runtime");let s=await nk(n.epk,e);if(rj(s),void 0!==n.apu){if("string"!=typeof n.apu)throw new rv('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{i=rh(n.apu)}catch{throw new rv("Failed to base64url decode the apu")}}if(void 0!==n.apv){if("string"!=typeof n.apv)throw new rv('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=rh(n.apv)}catch{throw new rv("Failed to base64url decode the apv")}}let o=await rz(s,t,"ECDH-ES"===e?n.enc:e,"ECDH-ES"===e?r8(n.enc):parseInt(e.slice(-5,-2),10),i,a);if("ECDH-ES"===e)return o;if(void 0===r)throw new rv("JWE Encrypted Key missing");return rK(e.slice(-6),o,r)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new rv("JWE Encrypted Key missing");return rj(t),r1(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let a;if(void 0===r)throw new rv("JWE Encrypted Key missing");if("number"!=typeof n.p2c)throw new rv('JOSE Header "p2c" (PBES2 Count) missing or invalid');let s=i?.maxPBES2Count||1e4;if(n.p2c>s)throw new rv('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof n.p2s)throw new rv('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{a=rh(n.p2s)}catch{throw new rv("Failed to base64url decode the p2s")}return rY(e,t,r,n.p2c,a)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new rv("JWE Encrypted Key missing");return rK(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let i,a;if(void 0===r)throw new rv("JWE Encrypted Key missing");if("string"!=typeof n.iv)throw new rv('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof n.tag)throw new rv('JOSE Header "tag" (Authentication Tag) missing or invalid');try{i=rh(n.iv)}catch{throw new rv("Failed to base64url decode the iv")}try{a=rh(n.tag)}catch{throw new rv("Failed to base64url decode the tag")}return ns(e,t,r,i,a)}default:throw new rw('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function nA(e,t){if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)}async function nR(e,t,r){let n,i,a,s,o,l,c;if(!r2(e))throw new rv("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new rv("JOSE Header missing");if(void 0!==e.iv&&"string"!=typeof e.iv)throw new rv("JWE Initialization Vector incorrect type");if("string"!=typeof e.ciphertext)throw new rv("JWE Ciphertext missing or incorrect type");if(void 0!==e.tag&&"string"!=typeof e.tag)throw new rv("JWE Authentication Tag incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new rv("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new rv("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new rv("JWE AAD incorrect type");if(void 0!==e.header&&!r2(e.header))throw new rv("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!r2(e.unprotected))throw new rv("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=rh(e.protected);n=JSON.parse(rs.decode(t))}catch{throw new rv("JWE Protected Header is invalid")}if(!nl(n,e.header,e.unprotected))throw new rv("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let u={...n,...e.header,...e.unprotected};if(nc(rv,new Map,r?.crit,n,u),void 0!==u.zip)throw new rw('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:d,enc:h}=u;if("string"!=typeof d||!d)throw new rv("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof h||!h)throw new rv("missing JWE Encryption Algorithm (enc) in JWE Header");let p=r&&nA("keyManagementAlgorithms",r.keyManagementAlgorithms),f=r&&nA("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(p&&!p.has(d)||!p&&d.startsWith("PBES2"))throw new rb('"alg" (Algorithm) Header Parameter value not allowed');if(f&&!f.has(h))throw new rb('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==e.encrypted_key)try{i=rh(e.encrypted_key)}catch{throw new rv("Failed to base64url decode the encrypted_key")}let g=!1;"function"==typeof t&&(t=await t(n,e),g=!0),nh("dir"===d?h:d,t,"decrypt");let m=await r4(t,d);try{a=await nT(d,m,i,u,r)}catch(e){if(e instanceof TypeError||e instanceof rv||e instanceof rw)throw e;a=r9(h)}if(void 0!==e.iv)try{s=rh(e.iv)}catch{throw new rv("Failed to base64url decode the iv")}if(void 0!==e.tag)try{o=rh(e.tag)}catch{throw new rv("Failed to base64url decode the tag")}let y=void 0!==e.protected?rd(e.protected):new Uint8Array;l=void 0!==e.aad?ro(y,rd("."),rd(e.aad)):y;try{c=rh(e.ciphertext)}catch{throw new rv("Failed to base64url decode the ciphertext")}let b={plaintext:await ni(h,a,c,s,o,l)};if(void 0!==e.protected&&(b.protectedHeader=n),void 0!==e.aad)try{b.additionalAuthenticatedData=rh(e.aad)}catch{throw new rv("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(b.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(b.unprotectedHeader=e.header),g)?{...b,key:m}:b}async function nO(e,t,r){if(e instanceof Uint8Array&&(e=rs.decode(e)),"string"!=typeof e)throw new rv("Compact JWE must be a string or Uint8Array");let{0:n,1:i,2:a,3:s,4:o,length:l}=e.split(".");if(5!==l)throw new rv("Invalid Compact JWE");let c=await nR({ciphertext:s,iv:a||void 0,protected:n,tag:o||void 0,encrypted_key:i||void 0},t,r),u={plaintext:c.plaintext,protectedHeader:c.protectedHeader};return"function"==typeof t?{...u,key:c.key}:u}async function nC(e,t,r){let n=await nO(e,t,r),i=function(e,t,r={}){var n,i;let a,s;try{a=JSON.parse(rs.decode(t))}catch{}if(!r2(a))throw new rx("JWT Claims Set must be a top-level JSON object");let{typ:o}=r;if(o&&("string"!=typeof e.typ||nw(e.typ)!==nw(o)))throw new rm('unexpected "typ" JWT header value',a,"typ","check_failed");let{requiredClaims:l=[],issuer:c,subject:u,audience:d,maxTokenAge:h}=r,p=[...l];for(let e of(void 0!==h&&p.push("iat"),void 0!==d&&p.push("aud"),void 0!==u&&p.push("sub"),void 0!==c&&p.push("iss"),new Set(p.reverse())))if(!(e in a))throw new rm(`missing required "${e}" claim`,a,e,"missing");if(c&&!(Array.isArray(c)?c:[c]).includes(a.iss))throw new rm('unexpected "iss" claim value',a,"iss","check_failed");if(u&&a.sub!==u)throw new rm('unexpected "sub" claim value',a,"sub","check_failed");if(d&&(n=a.aud,i="string"==typeof d?[d]:d,"string"==typeof n?!i.includes(n):!(Array.isArray(n)&&i.some(Set.prototype.has.bind(new Set(n))))))throw new rm('unexpected "aud" claim value',a,"aud","check_failed");switch(typeof r.clockTolerance){case"string":s=ny(r.clockTolerance);break;case"number":s=r.clockTolerance;break;case"undefined":s=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:f}=r,g=ng(f||new Date);if((void 0!==a.iat||h)&&"number"!=typeof a.iat)throw new rm('"iat" claim must be a number',a,"iat","invalid");if(void 0!==a.nbf){if("number"!=typeof a.nbf)throw new rm('"nbf" claim must be a number',a,"nbf","invalid");if(a.nbf>g+s)throw new rm('"nbf" claim timestamp check failed',a,"nbf","check_failed")}if(void 0!==a.exp){if("number"!=typeof a.exp)throw new rm('"exp" claim must be a number',a,"exp","invalid");if(a.exp<=g-s)throw new ry('"exp" claim timestamp check failed',a,"exp","check_failed")}if(h){let e=g-a.iat;if(e-s>("number"==typeof h?h:ny(h)))throw new ry('"iat" claim timestamp check failed (too far in the past)',a,"iat","check_failed");if(e<0-s)throw new rm('"iat" claim timestamp check failed (it should be in the past)',a,"iat","check_failed")}return a}(n.protectedHeader,n.plaintext,r),{protectedHeader:a}=n;if(void 0!==a.iss&&a.iss!==i.iss)throw new rm('replicated "iss" claim header parameter mismatch',i,"iss","mismatch");if(void 0!==a.sub&&a.sub!==i.sub)throw new rm('replicated "sub" claim header parameter mismatch',i,"sub","mismatch");if(void 0!==a.aud&&JSON.stringify(a.aud)!==JSON.stringify(i.aud))throw new rm('replicated "aud" claim header parameter mismatch',i,"aud","mismatch");let s={payload:i,protectedHeader:a};return"function"==typeof t?{...s,key:n.key}:s}let nP=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,nI=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,nj=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n$=/^[\u0020-\u003A\u003D-\u007E]*$/,nN=Object.prototype.toString,nU=((l=function(){}).prototype=Object.create(null),l);function nD(e,t){let r=new nU,n=e.length;if(n<2)return r;let i=t?.decode||nW,a=0;do{let t=e.indexOf("=",a);if(-1===t)break;let s=e.indexOf(";",a),o=-1===s?n:s;if(t>o){a=e.lastIndexOf(";",t-1)+1;continue}let l=nL(e,a,t),c=nM(e,t,l),u=e.slice(l,c);if(void 0===r[u]){let n=nL(e,t+1,o),a=nM(e,o,n),s=i(e.slice(n,a));r[u]=s}a=o+1}while(a<n)return r}function nL(e,t,r){do{let r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<r)return r}function nM(e,t,r){for(;t>r;){let r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return r}function nH(e,t,r){let n=r?.encode||encodeURIComponent;if(!nP.test(e))throw TypeError(`argument name is invalid: ${e}`);let i=n(t);if(!nI.test(i))throw TypeError(`argument val is invalid: ${t}`);let a=e+"="+i;if(!r)return a;if(void 0!==r.maxAge){if(!Number.isInteger(r.maxAge))throw TypeError(`option maxAge is invalid: ${r.maxAge}`);a+="; Max-Age="+r.maxAge}if(r.domain){if(!nj.test(r.domain))throw TypeError(`option domain is invalid: ${r.domain}`);a+="; Domain="+r.domain}if(r.path){if(!n$.test(r.path))throw TypeError(`option path is invalid: ${r.path}`);a+="; Path="+r.path}if(r.expires){var s;if(s=r.expires,"[object Date]"!==nN.call(s)||!Number.isFinite(r.expires.valueOf()))throw TypeError(`option expires is invalid: ${r.expires}`);a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.partitioned&&(a+="; Partitioned"),r.priority)switch("string"==typeof r.priority?r.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${r.sameSite}`)}return a}function nW(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}e.s(["parse",()=>nD,"serialize",()=>nH],746930);var nB=e.i(746930);let{parse:nK}=nB,nq="A256CBC-HS512";async function nV(e){let{token:t={},secret:r,maxAge:n=2592e3,salt:i}=e,a=Array.isArray(r)?r:[r],s=await nz(nq,a[0],i),o=await nS({kty:"oct",k:nx.encode(s)},`sha${s.byteLength<<3}`);return await new nv(t).setProtectedHeader({alg:"dir",enc:nq,kid:o}).setIssuedAt().setExpirationTime((Date.now()/1e3|0)+n).setJti(crypto.randomUUID()).encrypt(s)}async function nJ(e){let{token:t,secret:r,salt:n}=e,i=Array.isArray(r)?r:[r];if(!t)return null;let{payload:a}=await nC(t,async({kid:e,enc:t})=>{for(let r of i){let i=await nz(t,r,n);if(void 0===e||e===await nS({kty:"oct",k:nx.encode(i)},`sha${i.byteLength<<3}`))return i}throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:["dir"],contentEncryptionAlgorithms:[nq,"A256GCM"]});return a}async function nz(e,t,r){let n;switch(e){case"A256CBC-HS512":n=64;break;case"A256GCM":n=32;break;default:throw Error("Unsupported JWT Content Encryption Algorithm")}return await ri("sha256",t,r,`Auth.js Generated Encryption Key (${r})`,n)}async function nF({options:e,paramValue:t,cookieValue:r}){let{url:n,callbacks:i}=e,a=n.origin;return t?a=await i.redirect({url:t,baseUrl:n.origin}):r&&(a=await i.redirect({url:r,baseUrl:n.origin})),{callbackUrl:a,callbackUrlCookie:a!==r?a:void 0}}let nG="\x1b[31m",nX="\x1b[0m",nY={error(e){let t=e instanceof tk?e.type:e.name;if(console.error(`${nG}[auth][error]${nX} ${t}: ${e.message}`),e.cause&&"object"==typeof e.cause&&"err"in e.cause&&e.cause.err instanceof Error){let{err:t,...r}=e.cause;console.error(`${nG}[auth][cause]${nX}:`,t.stack),r&&console.error(`${nG}[auth][details]${nX}:`,JSON.stringify(r,null,2))}else e.stack&&console.error(e.stack.replace(/.*/,"").substring(1))},warn(e){console.warn(`\x1b[33m[auth][warn][${e}]${nX}`,"Read more: https://warnings.authjs.dev")},debug(e,t){console.log(`\x1b[90m[auth][debug]:${nX} ${e}`,JSON.stringify(t,null,2))}};function nQ(e){let t={...nY};return e.debug||(t.debug=()=>{}),e.logger?.error&&(t.error=e.logger.error),e.logger?.warn&&(t.warn=e.logger.warn),e.logger?.debug&&(t.debug=e.logger.debug),e.logger??(e.logger=t),t}let nZ=["providers","session","csrf","signin","signout","callback","verify-request","error","webauthn-options"],{parse:n0,serialize:n1}=nB;async function n2(e){if(!("body"in e)||!e.body||"POST"!==e.method)return;let t=e.headers.get("content-type");return t?.includes("application/json")?await e.json():t?.includes("application/x-www-form-urlencoded")?Object.fromEntries(new URLSearchParams(await e.text())):void 0}async function n5(e,t){try{if("GET"!==e.method&&"POST"!==e.method)throw new tJ("Only GET and POST requests are supported");t.basePath??(t.basePath="/auth");let r=new URL(e.url),{action:n,providerId:i}=function(e,t){let r=e.match(RegExp(`^${t}(.+)`));if(null===r)throw new tJ(`Cannot parse action at ${e}`);let n=r.at(-1).replace(/^\//,"").split("/").filter(Boolean);if(1!==n.length&&2!==n.length)throw new tJ(`Cannot parse action at ${e}`);let[i,a]=n;if(!nZ.includes(i)||a&&!["signin","callback","webauthn-options"].includes(i))throw new tJ(`Cannot parse action at ${e}`);return{action:i,providerId:"undefined"==a?void 0:a}}(r.pathname,t.basePath);return{url:r,action:n,providerId:i,method:e.method,headers:Object.fromEntries(e.headers),body:e.body?await n2(e):void 0,cookies:n0(e.headers.get("cookie")??"")??{},error:r.searchParams.get("error")??void 0,query:Object.fromEntries(r.searchParams)}}catch(n){let r=nQ(t);r.error(n),r.debug("request",e)}}function n6(e){let t=new Headers(e.headers);e.cookies?.forEach(e=>{let{name:r,value:n,options:i}=e,a=n1(r,n,i);t.has("Set-Cookie")?t.append("Set-Cookie",a):t.set("Set-Cookie",a)});let r=e.body;"application/json"===t.get("content-type")?r=JSON.stringify(e.body):"application/x-www-form-urlencoded"===t.get("content-type")&&(r=new URLSearchParams(e.body).toString());let n=new Response(r,{headers:t,status:e.redirect?302:e.status??200});return e.redirect&&n.headers.set("Location",e.redirect),n}async function n3(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("").toString()}function n4(e){return Array.from(crypto.getRandomValues(new Uint8Array(e))).reduce((e,t)=>e+("0"+t.toString(16)).slice(-2),"")}async function n8({options:e,cookieValue:t,isPost:r,bodyValue:n}){if(t){let[i,a]=t.split("|");if(a===await n3(`${i}${e.secret}`))return{csrfTokenVerified:r&&i===n,csrfToken:i}}let i=n4(32),a=await n3(`${i}${e.secret}`);return{cookie:`${i}|${a}`,csrfToken:i}}function n9(e,t){if(!t)throw new tY(`CSRF token was missing during an action ${e}`)}function n7(e){return null!==e&&"object"==typeof e}function ie(e,...t){if(!t.length)return e;let r=t.shift();if(n7(e)&&n7(r))for(let t in r)n7(r[t])?(n7(e[t])||(e[t]=Array.isArray(r[t])?[]:{}),ie(e[t],r[t])):void 0!==r[t]&&(e[t]=r[t]);return ie(e,...t)}let it=Symbol("skip-csrf-check"),ir=Symbol("return-type-raw"),ii=Symbol("custom-fetch"),ia=Symbol("conform-internal"),is=e=>il({id:e.sub??e.id??crypto.randomUUID(),name:e.name??e.nickname??e.preferred_username,email:e.email,image:e.picture}),io=e=>il({access_token:e.access_token,id_token:e.id_token,refresh_token:e.refresh_token,expires_at:e.expires_at,scope:e.scope,token_type:e.token_type,session_state:e.session_state});function il(e){let t={};for(let[r,n]of Object.entries(e))void 0!==n&&(t[r]=n);return t}function ic(e,t){if(!e&&t)return;if("string"==typeof e)return{url:new URL(e)};let r=new URL(e?.url??"https://authjs.dev");if(e?.params!=null)for(let[t,n]of Object.entries(e.params))"claims"===t&&(n=JSON.stringify(n)),r.searchParams.set(t,String(n));return{url:r,request:e?.request,conform:e?.conform,...e?.clientPrivateKey?{clientPrivateKey:e?.clientPrivateKey}:null}}let iu={signIn:()=>!0,redirect:({url:e,baseUrl:t})=>e.startsWith("/")?`${t}${e}`:new URL(e).origin===t?e:t,session:({session:e})=>({user:{name:e.user?.name,email:e.user?.email,image:e.user?.image},expires:e.expires?.toISOString?.()??e.expires}),jwt:({token:e})=>e};async function id({authOptions:e,providerId:t,action:r,url:n,cookies:i,callbackUrl:a,csrfToken:s,csrfDisabled:o,isPost:l}){var c,u;let d=nQ(e),{providers:h,provider:p}=function(e){let{providerId:t,config:r}=e,n=new URL(r.basePath??"/auth",e.url.origin),i=r.providers.map(e=>{let t="function"==typeof e?e():e,{options:i,...a}=t,s=i?.id??a.id,o=ie(a,i,{signinUrl:`${n}/signin/${s}`,callbackUrl:`${n}/callback/${s}`});if("oauth"===t.type||"oidc"===t.type){var l;let e,t,n,a;o.redirectProxyUrl??(o.redirectProxyUrl=i?.redirectProxyUrl??r.redirectProxyUrl);let s=((l=o).issuer&&(l.wellKnown??(l.wellKnown=`${l.issuer}/.well-known/openid-configuration`)),(e=ic(l.authorization,l.issuer))&&!e.url?.searchParams.has("scope")&&e.url.searchParams.set("scope","openid profile email"),t=ic(l.token,l.issuer),n=ic(l.userinfo,l.issuer),a=l.checks??["pkce"],l.redirectProxyUrl&&(a.includes("state")||a.push("state"),l.redirectProxyUrl=`${l.redirectProxyUrl}/callback/${l.id}`),{...l,authorization:e,token:t,checks:a,userinfo:n,profile:l.profile??is,account:l.account??io});return s.authorization?.url.searchParams.get("response_mode")==="form_post"&&delete s.redirectProxyUrl,s[ii]??(s[ii]=i?.[ii]),s}return o}),a=i.find(({id:e})=>e===t);if(t&&!a){let e=i.map(e=>e.id).join(", ");throw Error(`Provider with id "${t}" not found. Available providers: [${e}].`)}return{providers:i,provider:a}}({url:n,providerId:t,config:e}),f=!1;if((p?.type==="oauth"||p?.type==="oidc")&&p.redirectProxyUrl)try{f=new URL(p.redirectProxyUrl).origin===n.origin}catch{throw TypeError(`redirectProxyUrl must be a valid URL. Received: ${p.redirectProxyUrl}`)}let g={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...e,url:n,action:r,provider:p,cookies:ie(tE(e.useSecureCookies??"https:"===n.protocol),e.cookies),providers:h,session:{strategy:e.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>crypto.randomUUID(),...e.session},jwt:{secret:e.secret,maxAge:e.session?.maxAge??2592e3,encode:nV,decode:nJ,...e.jwt},events:(c=e.events??{},u=d,Object.keys(c).reduce((e,t)=>(e[t]=async(...e)=>{try{let r=c[t];return await r(...e)}catch(e){u.error(new tP(e))}},e),{})),adapter:function(e,t){if(e)return Object.keys(e).reduce((r,n)=>(r[n]=async(...r)=>{try{t.debug(`adapter_${n}`,{args:r});let i=e[n];return await i(...r)}catch(r){let e=new tA(r);throw t.error(e),e}},r),{})}(e.adapter,d),callbacks:{...iu,...e.callbacks},logger:d,callbackUrl:n.origin,isOnRedirectProxy:f,experimental:{...e.experimental}},m=[];if(o)g.csrfTokenVerified=!0;else{let{csrfToken:e,cookie:t,csrfTokenVerified:r}=await n8({options:g,cookieValue:i?.[g.cookies.csrfToken.name],isPost:l,bodyValue:s});g.csrfToken=e,g.csrfTokenVerified=r,t&&m.push({name:g.cookies.csrfToken.name,value:t,options:g.cookies.csrfToken.options})}let{callbackUrl:y,callbackUrlCookie:b}=await nF({options:g,cookieValue:i?.[g.cookies.callbackUrl.name],paramValue:a});return g.callbackUrl=y,b&&m.push({name:g.cookies.callbackUrl.name,value:b,options:g.cookies.callbackUrl.options}),{options:g,cookies:m}}var ih,ip,ig,im,iy,ib,iw,i_,iv,ix,iE,iS,ik,iT,iA,iR,iO,iC,iP,iI,ij,i$,iN,iU,iD,iL,iM,iH,iW={},iB=[],iK=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,iq=Array.isArray;function iV(e,t){for(var r in t)e[r]=t[r];return e}function iJ(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function iz(e,t,r,n,i){var a={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==i?++ij:i,__i:-1,__u:0};return null==i&&null!=iI.vnode&&iI.vnode(a),a}function iF(e){return e.children}function iG(e,t){this.props=e,this.context=t}function iX(e,t){if(null==t)return e.__?iX(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?iX(e):null}function iY(e){(!e.__d&&(e.__d=!0)&&i$.push(e)&&!iQ.__r++||iN!==iI.debounceRendering)&&((iN=iI.debounceRendering)||iU)(iQ)}function iQ(){var e,t,r,n,i,a,s,o;for(i$.sort(iD);e=i$.shift();)e.__d&&(t=i$.length,n=void 0,a=(i=(r=e).__v).__e,s=[],o=[],r.__P&&((n=iV({},i)).__v=i.__v+1,iI.vnode&&iI.vnode(n),i5(r.__P,n,i,r.__n,r.__P.namespaceURI,32&i.__u?[a]:null,s,null==a?iX(i):a,!!(32&i.__u),o),n.__v=i.__v,n.__.__k[n.__i]=n,function(e,t,r){t.__d=void 0;for(var n=0;n<r.length;n++)i6(r[n],r[++n],r[++n]);iI.__c&&iI.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){iI.__e(e,t.__v)}})}(s,n,o),n.__e!=a&&function e(t){var r,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if(null!=(n=t.__k[r])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return e(t)}}(n)),i$.length>t&&i$.sort(iD));iQ.__r=0}function iZ(e,t,r,n,i,a,s,o,l,c,u){var d,h,p,f,g,m=n&&n.__k||iB,y=t.length;for(r.__d=l,function(e,t,r){var n,i,a,s,o,l=t.length,c=r.length,u=c,d=0;for(e.__k=[],n=0;n<l;n++)null!=(i=t[n])&&"boolean"!=typeof i&&"function"!=typeof i?(s=n+d,(i=e.__k[n]="string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?iz(null,i,null,null,null):iq(i)?iz(iF,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?iz(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=e,i.__b=e.__b+1,a=null,-1!==(o=i.__i=function(e,t,r,n){var i=e.key,a=e.type,s=r-1,o=r+1,l=t[r];if(null===l||l&&i==l.key&&a===l.type&&0==(131072&l.__u))return r;if(n>+(null!=l&&0==(131072&l.__u)))for(;s>=0||o<t.length;){if(s>=0){if((l=t[s])&&0==(131072&l.__u)&&i==l.key&&a===l.type)return s;s--}if(o<t.length){if((l=t[o])&&0==(131072&l.__u)&&i==l.key&&a===l.type)return o;o++}}return -1}(i,r,s,u))&&(u--,(a=r[o])&&(a.__u|=131072)),null==a||null===a.__v?(-1==o&&d--,"function"!=typeof i.type&&(i.__u|=65536)):o!==s&&(o==s-1?d--:o==s+1?d++:(o>s?d--:d++,i.__u|=65536))):i=e.__k[n]=null;if(u)for(n=0;n<c;n++)null!=(a=r[n])&&0==(131072&a.__u)&&(a.__e==e.__d&&(e.__d=iX(a)),function e(t,r,n){var i,a;if(iI.unmount&&iI.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||i6(i,null,r)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){iI.__e(e,r)}i.base=i.__P=null}if(i=t.__k)for(a=0;a<i.length;a++)i[a]&&e(i[a],r,n||"function"!=typeof t.type);n||iJ(t.__e),t.__c=t.__=t.__e=t.__d=void 0}(a,a))}(r,t,m),l=r.__d,d=0;d<y;d++)null!=(p=r.__k[d])&&(h=-1===p.__i?iW:m[p.__i]||iW,p.__i=d,i5(e,p,h,i,a,s,o,l,c,u),f=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&i6(h.ref,null,p),u.push(p.ref,p.__c||f,p)),null==g&&null!=f&&(g=f),65536&p.__u||h.__k===p.__k?l=function e(t,r,n){var i,a;if("function"==typeof t.type){for(i=t.__k,a=0;i&&a<i.length;a++)i[a]&&(i[a].__=t,r=e(i[a],r,n));return r}t.__e!=r&&(r&&t.type&&!n.contains(r)&&(r=iX(t)),n.insertBefore(t.__e,r||null),r=t.__e);do r=r&&r.nextSibling;while(null!=r&&8===r.nodeType)return r}(p,l,e):"function"==typeof p.type&&void 0!==p.__d?l=p.__d:f&&(l=f.nextSibling),p.__d=void 0,p.__u&=-196609);r.__d=l,r.__e=g}function i0(e,t,r){"-"===t[0]?e.setProperty(t,null==r?"":r):e[t]=null==r?"":"number"!=typeof r||iK.test(t)?r:r+"px"}function i1(e,t,r,n,i){var a;e:if("style"===t)if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||i0(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||i0(e.style,t,r[t])}else if("o"===t[0]&&"n"===t[1])a=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=r,r?n?r.u=n.u:(r.u=iL,e.addEventListener(t,a?iH:iM,a)):e.removeEventListener(t,a?iH:iM,a);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==r?"":r))}}function i2(e){return function(t){if(this.l){var r=this.l[t.type+e];if(null==t.t)t.t=iL++;else if(t.t<r.u)return;return r(iI.event?iI.event(t):t)}}}function i5(e,t,r,n,i,a,s,o,l,c){var u,d,h,p,f,g,m,y,b,w,_,v,x,E,S,k,T=t.type;if(void 0!==t.constructor)return null;128&r.__u&&(l=!!(32&r.__u),a=[o=t.__e=r.__e]),(u=iI.__b)&&u(t);e:if("function"==typeof T)try{if(y=t.props,b="prototype"in T&&T.prototype.render,w=(u=T.contextType)&&n[u.__c],_=u?w?w.props.value:u.__:n,r.__c?m=(d=t.__c=r.__c).__=d.__E:(b?t.__c=d=new T(y,_):(t.__c=d=new iG(y,_),d.constructor=T,d.render=i3),w&&w.sub(d),d.props=y,d.state||(d.state={}),d.context=_,d.__n=n,h=d.__d=!0,d.__h=[],d._sb=[]),b&&null==d.__s&&(d.__s=d.state),b&&null!=T.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=iV({},d.__s)),iV(d.__s,T.getDerivedStateFromProps(y,d.__s))),p=d.props,f=d.state,d.__v=t,h)b&&null==T.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),b&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(b&&null==T.getDerivedStateFromProps&&y!==p&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(y,_),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(y,d.__s,_)||t.__v===r.__v)){for(t.__v!==r.__v&&(d.props=y,d.state=d.__s,d.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(e){e&&(e.__=t)}),v=0;v<d._sb.length;v++)d.__h.push(d._sb[v]);d._sb=[],d.__h.length&&s.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(y,d.__s,_),b&&null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(p,f,g)})}if(d.context=_,d.props=y,d.__P=e,d.__e=!1,x=iI.__r,E=0,b){for(d.state=d.__s,d.__d=!1,x&&x(t),u=d.render(d.props,d.state,d.context),S=0;S<d._sb.length;S++)d.__h.push(d._sb[S]);d._sb=[]}else do d.__d=!1,x&&x(t),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++E<25)d.state=d.__s,null!=d.getChildContext&&(n=iV(iV({},n),d.getChildContext())),b&&!h&&null!=d.getSnapshotBeforeUpdate&&(g=d.getSnapshotBeforeUpdate(p,f)),iZ(e,iq(k=null!=u&&u.type===iF&&null==u.key?u.props.children:u)?k:[k],t,r,n,i,a,s,o,l,c),d.base=t.__e,t.__u&=-161,d.__h.length&&s.push(d),m&&(d.__E=d.__=null)}catch(e){if(t.__v=null,l||null!=a){for(t.__u|=l?160:128;o&&8===o.nodeType&&o.nextSibling;)o=o.nextSibling;a[a.indexOf(o)]=null,t.__e=o}else t.__e=r.__e,t.__k=r.__k;iI.__e(e,t,r)}else null==a&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=function(e,t,r,n,i,a,s,o,l){var c,u,d,h,p,f,g,m=r.props,y=t.props,b=t.type;if("svg"===b?i="http://www.w3.org/2000/svg":"math"===b?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),null!=a){for(c=0;c<a.length;c++)if((p=a[c])&&"setAttribute"in p==!!b&&(b?p.localName===b:3===p.nodeType)){e=p,a[c]=null;break}}if(null==e){if(null===b)return document.createTextNode(y);e=document.createElementNS(i,b,y.is&&y),o&&(iI.__m&&iI.__m(t,a),o=!1),a=null}if(null===b)m===y||o&&e.data===y||(e.data=y);else{if(a=a&&iP.call(e.childNodes),m=r.props||iW,!o&&null!=a)for(m={},c=0;c<e.attributes.length;c++)m[(p=e.attributes[c]).name]=p.value;for(c in m)if(p=m[c],"children"==c);else if("dangerouslySetInnerHTML"==c)d=p;else if(!(c in y)){if("value"==c&&"defaultValue"in y||"checked"==c&&"defaultChecked"in y)continue;i1(e,c,null,p,i)}for(c in y)p=y[c],"children"==c?h=p:"dangerouslySetInnerHTML"==c?u=p:"value"==c?f=p:"checked"==c?g=p:o&&"function"!=typeof p||m[c]===p||i1(e,c,p,m[c],i);if(u)o||d&&(u.__html===d.__html||u.__html===e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(d&&(e.innerHTML=""),iZ(e,iq(h)?h:[h],t,r,n,"foreignObject"===b?"http://www.w3.org/1999/xhtml":i,a,s,a?a[0]:r.__k&&iX(r,0),o,l),null!=a)for(c=a.length;c--;)iJ(a[c]);o||(c="value","progress"===b&&null==f?e.removeAttribute("value"):void 0===f||f===e[c]&&("progress"!==b||f)&&("option"!==b||f===m[c])||i1(e,c,f,m[c],i),c="checked",void 0!==g&&g!==e[c]&&i1(e,c,g,m[c],i))}return e}(r.__e,t,r,n,i,a,s,l,c);(u=iI.diffed)&&u(t)}function i6(e,t,r){try{if("function"==typeof e){var n="function"==typeof e.__u;n&&e.__u(),n&&null==t||(e.__u=e(t))}else e.current=t}catch(e){iI.__e(e,r)}}function i3(e,t,r){return this.constructor(e,r)}iP=iB.slice,iI={__e:function(e,t,r,n){for(var i,a,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&null!=a.getDerivedStateFromError&&(i.setState(a.getDerivedStateFromError(e)),s=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,n||{}),s=i.__d),s)return i.__E=i}catch(t){e=t}throw e}},ij=0,iG.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=iV({},this.state),"function"==typeof e&&(e=e(iV({},r),this.props)),e&&iV(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),iY(this))},iG.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),iY(this))},iG.prototype.render=iF,i$=[],iU="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,iD=function(e,t){return e.__v.__b-t.__v.__b},iQ.__r=0,iL=0,iM=i2(!1),iH=i2(!0);var i4=/[\s\n\\/='"\0<>]/,i8=/^(xlink|xmlns|xml)([A-Z])/,i9=/^accessK|^auto[A-Z]|^cell|^ch|^col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z]/,i7=/^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/,ae=new Set(["draggable","spellcheck"]),at=/["&<]/;function ar(e){if(0===e.length||!1===at.test(e))return e;for(var t=0,r=0,n="",i="";r<e.length;r++){switch(e.charCodeAt(r)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;default:continue}r!==t&&(n+=e.slice(t,r)),n+=i,t=r+1}return r!==t&&(n+=e.slice(t,r)),n}var an={},ai=new Set(["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","fill-opacity","flex","flex-grow","flex-negative","flex-order","flex-positive","flex-shrink","flood-opacity","font-weight","grid-column","grid-row","line-clamp","line-height","opacity","order","orphans","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","widows","z-index","zoom"]),aa=/[A-Z]/g;function as(){this.__d=!0}function ao(e,t,r){if(!e.s){if(r instanceof ah){if(!r.s)return void(r.o=ao.bind(null,e,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(ao.bind(null,e,t),ao.bind(null,e,2));e.s=t,e.v=r;let n=e.o;n&&n(e)}}var al,ac,au,ad,ah=function(){function e(){}return e.prototype.then=function(t,r){var n=new e,i=this.s;if(i){var a=1&i?t:r;if(a){try{ao(n,1,a(this.v))}catch(e){ao(n,2,e)}return n}return this}return this.o=function(e){try{var i=e.v;1&e.s?ao(n,1,t?t(i):i):r?ao(n,1,r(i)):ao(n,2,i)}catch(e){ao(n,2,e)}},n},e}(),ap={},af=[],ag=Array.isArray,am=Object.assign;function ay(e,t){var r,n=e.type,i=!0;return e.__c?(i=!1,(r=e.__c).state=r.__s):r=new n(e.props,t),e.__c=r,r.__v=e,r.props=e.props,r.context=t,r.__d=!0,null==r.state&&(r.state=ap),null==r.__s&&(r.__s=r.state),n.getDerivedStateFromProps?r.state=am({},r.state,n.getDerivedStateFromProps(r.props,r.state)):i&&r.componentWillMount?(r.componentWillMount(),r.state=r.__s!==r.state?r.__s:r.state):!i&&r.componentWillUpdate&&r.componentWillUpdate(),au&&au(e),r.render(r.props,r.state,t)}var ab=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),aw=0;function a_(e,t,r,n,i,a){t||(t={});var s,o,l=t;"ref"in t&&(s=t.ref,delete t.ref);var c={type:e,props:l,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--aw,__i:-1,__u:0,__source:i,__self:a};if("function"==typeof e&&(s=e.defaultProps))for(o in s)void 0===l[o]&&(l[o]=s[o]);return iI.vnode&&iI.vnode(c),c}async function av(e,t){let r=window.SimpleWebAuthnBrowser;async function n(r){let n=new URL(`${e}/webauthn-options/${t}`);r&&n.searchParams.append("action",r),a().forEach(e=>{n.searchParams.append(e.name,e.value)});let i=await fetch(n);return i.ok?i.json():void console.error("Failed to fetch options",i)}function i(){let e=`#${t}-form`,r=document.querySelector(e);if(!r)throw Error(`Form '${e}' not found`);return r}function a(){return Array.from(i().querySelectorAll("input[data-form-field]"))}async function s(e,t){let r=i();if(e){let t=document.createElement("input");t.type="hidden",t.name="action",t.value=e,r.appendChild(t)}if(t){let e=document.createElement("input");e.type="hidden",e.name="data",e.value=JSON.stringify(t),r.appendChild(e)}return r.submit()}async function o(e,t){let n=await r.startAuthentication(e,t);return await s("authenticate",n)}async function l(e){a().forEach(e=>{if(e.required&&!e.value)throw Error(`Missing required field: ${e.name}`)});let t=await r.startRegistration(e);return await s("register",t)}async function c(){if(!r.browserSupportsWebAuthnAutofill())return;let e=await n("authenticate");if(!e)return void console.error("Failed to fetch option for autofill authentication");try{await o(e.options,!0)}catch(e){console.error(e)}}(async function(){let e=i();if(!r.browserSupportsWebAuthn()){e.style.display="none";return}e&&e.addEventListener("submit",async e=>{e.preventDefault();let t=await n(void 0);if(!t)return void console.error("Failed to fetch options for form submission");if("authenticate"===t.action)try{await o(t.options,!1)}catch(e){console.error(e)}else if("register"===t.action)try{await l(t.options)}catch(e){console.error(e)}})})(),c()}let ax={default:"Unable to sign in.",Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallbackError:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page."},aE=`:root {
  --border-width: 1px;
  --border-radius: 0.5rem;
  --color-error: #c94b4b;
  --color-info: #157efb;
  --color-info-hover: #0f6ddb;
  --color-info-text: #fff;
}

.__next-auth-theme-auto,
.__next-auth-theme-light {
  --color-background: #ececec;
  --color-background-hover: rgba(236, 236, 236, 0.8);
  --color-background-card: #fff;
  --color-text: #000;
  --color-primary: #444;
  --color-control-border: #bbb;
  --color-button-active-background: #f9f9f9;
  --color-button-active-border: #aaa;
  --color-separator: #ccc;
  --provider-bg: #fff;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #fff
  );
}

.__next-auth-theme-dark {
  --color-background: #161b22;
  --color-background-hover: rgba(22, 27, 34, 0.8);
  --color-background-card: #0d1117;
  --color-text: #fff;
  --color-primary: #ccc;
  --color-control-border: #555;
  --color-button-active-background: #060606;
  --color-button-active-border: #666;
  --color-separator: #444;
  --provider-bg: #161b22;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #000
  );
}

.__next-auth-theme-dark img[src$="42-school.svg"],
  .__next-auth-theme-dark img[src$="apple.svg"],
  .__next-auth-theme-dark img[src$="boxyhq-saml.svg"],
  .__next-auth-theme-dark img[src$="eveonline.svg"],
  .__next-auth-theme-dark img[src$="github.svg"],
  .__next-auth-theme-dark img[src$="mailchimp.svg"],
  .__next-auth-theme-dark img[src$="medium.svg"],
  .__next-auth-theme-dark img[src$="okta.svg"],
  .__next-auth-theme-dark img[src$="patreon.svg"],
  .__next-auth-theme-dark img[src$="ping-id.svg"],
  .__next-auth-theme-dark img[src$="roblox.svg"],
  .__next-auth-theme-dark img[src$="threads.svg"],
  .__next-auth-theme-dark img[src$="wikimedia.svg"] {
    filter: invert(1);
  }

.__next-auth-theme-dark #submitButton {
    background-color: var(--provider-bg, var(--color-info));
  }

@media (prefers-color-scheme: dark) {
  .__next-auth-theme-auto {
    --color-background: #161b22;
    --color-background-hover: rgba(22, 27, 34, 0.8);
    --color-background-card: #0d1117;
    --color-text: #fff;
    --color-primary: #ccc;
    --color-control-border: #555;
    --color-button-active-background: #060606;
    --color-button-active-border: #666;
    --color-separator: #444;
    --provider-bg: #161b22;
    --provider-bg-hover: color-mix(
      in srgb,
      var(--provider-brand-color) 30%,
      #000
    );
  }
    .__next-auth-theme-auto img[src$="42-school.svg"],
    .__next-auth-theme-auto img[src$="apple.svg"],
    .__next-auth-theme-auto img[src$="boxyhq-saml.svg"],
    .__next-auth-theme-auto img[src$="eveonline.svg"],
    .__next-auth-theme-auto img[src$="github.svg"],
    .__next-auth-theme-auto img[src$="mailchimp.svg"],
    .__next-auth-theme-auto img[src$="medium.svg"],
    .__next-auth-theme-auto img[src$="okta.svg"],
    .__next-auth-theme-auto img[src$="patreon.svg"],
    .__next-auth-theme-auto img[src$="ping-id.svg"],
    .__next-auth-theme-auto img[src$="roblox.svg"],
    .__next-auth-theme-auto img[src$="threads.svg"],
    .__next-auth-theme-auto img[src$="wikimedia.svg"] {
      filter: invert(1);
    }
    .__next-auth-theme-auto #submitButton {
      background-color: var(--provider-bg, var(--color-info));
    }
}

html {
  box-sizing: border-box;
}

*,
*:before,
*:after {
  box-sizing: inherit;
  margin: 0;
  padding: 0;
}

body {
  background-color: var(--color-background);
  margin: 0;
  padding: 0;
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    Arial,
    "Noto Sans",
    sans-serif,
    "Apple Color Emoji",
    "Segoe UI Emoji",
    "Segoe UI Symbol",
    "Noto Color Emoji";
}

h1 {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  font-weight: 400;
  color: var(--color-text);
}

p {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  color: var(--color-text);
}

form {
  margin: 0;
  padding: 0;
}

label {
  font-weight: 500;
  text-align: left;
  margin-bottom: 0.25rem;
  display: block;
  color: var(--color-text);
}

input[type] {
  box-sizing: border-box;
  display: block;
  width: 100%;
  padding: 0.5rem 1rem;
  border: var(--border-width) solid var(--color-control-border);
  background: var(--color-background-card);
  font-size: 1rem;
  border-radius: var(--border-radius);
  color: var(--color-text);
}

p {
  font-size: 1.1rem;
  line-height: 2rem;
}

a.button {
  text-decoration: none;
  line-height: 1rem;
}

a.button:link,
  a.button:visited {
    background-color: var(--color-background);
    color: var(--color-primary);
  }

button,
a.button {
  padding: 0.75rem 1rem;
  color: var(--provider-color, var(--color-primary));
  background-color: var(--provider-bg, var(--color-background));
  border: 1px solid #00000031;
  font-size: 0.9rem;
  height: 50px;
  border-radius: var(--border-radius);
  transition: background-color 250ms ease-in-out;
  font-weight: 300;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

:is(button,a.button):hover {
    background-color: var(--provider-bg-hover, var(--color-background-hover));
    cursor: pointer;
  }

:is(button,a.button):active {
    cursor: pointer;
  }

:is(button,a.button) span {
    color: var(--provider-bg);
  }

#submitButton {
  color: var(--button-text-color, var(--color-info-text));
  background-color: var(--brand-color, var(--color-info));
  width: 100%;
}

#submitButton:hover {
    background-color: var(
      --button-hover-bg,
      var(--color-info-hover)
    ) !important;
  }

a.site {
  color: var(--color-primary);
  text-decoration: none;
  font-size: 1rem;
  line-height: 2rem;
}

a.site:hover {
    text-decoration: underline;
  }

.page {
  position: absolute;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.page > div {
    text-align: center;
  }

.error a.button {
    padding-left: 2rem;
    padding-right: 2rem;
    margin-top: 0.5rem;
  }

.error .message {
    margin-bottom: 1.5rem;
  }

.signin input[type="text"] {
    margin-left: auto;
    margin-right: auto;
    display: block;
  }

.signin hr {
    display: block;
    border: 0;
    border-top: 1px solid var(--color-separator);
    margin: 2rem auto 1rem auto;
    overflow: visible;
  }

.signin hr::before {
      content: "or";
      background: var(--color-background-card);
      color: #888;
      padding: 0 0.4rem;
      position: relative;
      top: -0.7rem;
    }

.signin .error {
    background: #f5f5f5;
    font-weight: 500;
    border-radius: 0.3rem;
    background: var(--color-error);
  }

.signin .error p {
      text-align: left;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      line-height: 1.2rem;
      color: var(--color-info-text);
    }

.signin > div,
  .signin form {
    display: block;
  }

.signin > div input[type], .signin form input[type] {
      margin-bottom: 0.5rem;
    }

.signin > div button, .signin form button {
      width: 100%;
    }

.signin .provider + .provider {
    margin-top: 1rem;
  }

.logo {
  display: inline-block;
  max-width: 150px;
  margin: 1.25rem 0;
  max-height: 70px;
}

.card {
  background-color: var(--color-background-card);
  border-radius: 1rem;
  padding: 1.25rem 2rem;
}

.card .header {
    color: var(--color-primary);
  }

.card input[type]::-moz-placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type]::placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type] {
    background: color-mix(in srgb, var(--color-background-card) 95%, black);
  }

.section-header {
  color: var(--color-text);
}

@media screen and (min-width: 450px) {
  .card {
    margin: 2rem 0;
    width: 368px;
  }
}

@media screen and (max-width: 450px) {
  .card {
    margin: 1rem 0;
    width: 343px;
  }
}
`;function aS({html:e,title:t,status:r,cookies:n,theme:i,headTags:a}){return{cookies:n,status:r,headers:{"Content-Type":"text/html"},body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${aE}</style><title>${t}</title>${a??""}</head><body class="__next-auth-theme-${i?.colorScheme??"auto"}"><div class="page">${function(e,t,r){var n=iI.__s;iI.__s=!0,al=iI.__b,ac=iI.diffed,au=iI.__r,ad=iI.unmount;var i=function(e,t,r){var n,i,a,s={};for(a in t)"key"==a?n=t[a]:"ref"==a?i=t[a]:s[a]=t[a];if(arguments.length>2&&(s.children=arguments.length>3?iP.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===s[a]&&(s[a]=e.defaultProps[a]);return iz(e,s,n,i,null)}(iF,null);i.__k=[e];try{var a=function e(t,r,n,i,a,s,o){if(null==t||!0===t||!1===t||""===t)return"";var l=typeof t;if("object"!=l)return"function"==l?"":"string"==l?ar(t):t+"";if(ag(t)){var c,u="";a.__k=t;for(var d=0;d<t.length;d++){var h=t[d];if(null!=h&&"boolean"!=typeof h){var p,f=e(h,r,n,i,a,s,o);"string"==typeof f?u+=f:(c||(c=[]),u&&c.push(u),u="",ag(f)?(p=c).push.apply(p,f):c.push(f))}}return c?(u&&c.push(u),c):u}if(void 0!==t.constructor)return"";t.__=a,al&&al(t);var g=t.type,m=t.props;if("function"==typeof g){var y,b,w,_=r;if(g===iF){if("tpl"in m){for(var v="",x=0;x<m.tpl.length;x++)if(v+=m.tpl[x],m.exprs&&x<m.exprs.length){var E=m.exprs[x];if(null==E)continue;"object"==typeof E&&(void 0===E.constructor||ag(E))?v+=e(E,r,n,i,t,s,o):v+=E}return v}if("UNSTABLE_comment"in m)return"<!--"+ar(m.UNSTABLE_comment)+"-->";b=m.children}else{if(null!=(y=g.contextType)){var S=r[y.__c];_=S?S.props.value:y.__}var k=g.prototype&&"function"==typeof g.prototype.render;if(k)b=ay(t,_),w=t.__c;else{t.__c=w={__v:t,context:_,props:t.props,setState:as,forceUpdate:as,__d:!0,__h:[]};for(var T=0;w.__d&&T++<25;)w.__d=!1,au&&au(t),b=g.call(w,m,_);w.__d=!0}if(null!=w.getChildContext&&(r=am({},r,w.getChildContext())),k&&iI.errorBoundaries&&(g.getDerivedStateFromError||w.componentDidCatch)){b=null!=b&&b.type===iF&&null==b.key&&null==b.props.tpl?b.props.children:b;try{return e(b,r,n,i,t,s,o)}catch(a){return g.getDerivedStateFromError&&(w.__s=g.getDerivedStateFromError(a)),w.componentDidCatch&&w.componentDidCatch(a,ap),w.__d?(b=ay(t,r),null!=(w=t.__c).getChildContext&&(r=am({},r,w.getChildContext())),e(b=null!=b&&b.type===iF&&null==b.key&&null==b.props.tpl?b.props.children:b,r,n,i,t,s,o)):""}finally{ac&&ac(t),t.__=null,ad&&ad(t)}}}b=null!=b&&b.type===iF&&null==b.key&&null==b.props.tpl?b.props.children:b;try{var A=e(b,r,n,i,t,s,o);return ac&&ac(t),t.__=null,iI.unmount&&iI.unmount(t),A}catch(a){if(!s&&o&&o.onError){var R=o.onError(a,t,function(a){return e(a,r,n,i,t,s,o)});if(void 0!==R)return R;var O=iI.__e;return O&&O(a,t),""}if(!s||!a||"function"!=typeof a.then)throw a;return a.then(function a(){try{return e(b,r,n,i,t,s,o)}catch(l){if(!l||"function"!=typeof l.then)throw l;return l.then(function(){return e(b,r,n,i,t,s,o)},a)}})}}var C,P="<"+g,I="";for(var j in m){var $=m[j];if("function"!=typeof $||"class"===j||"className"===j){switch(j){case"children":C=$;continue;case"key":case"ref":case"__self":case"__source":continue;case"htmlFor":if("for"in m)continue;j="for";break;case"className":if("class"in m)continue;j="class";break;case"defaultChecked":j="checked";break;case"defaultSelected":j="selected";break;case"defaultValue":case"value":switch(j="value",g){case"textarea":C=$;continue;case"select":i=$;continue;case"option":i!=$||"selected"in m||(P+=" selected")}break;case"dangerouslySetInnerHTML":I=$&&$.__html;continue;case"style":"object"==typeof $&&($=function(e){var t="";for(var r in e){var n=e[r];if(null!=n&&""!==n){var i="-"==r[0]?r:an[r]||(an[r]=r.replace(aa,"-$&").toLowerCase()),a=";";"number"!=typeof n||i.startsWith("--")||ai.has(i)||(a="px;"),t=t+i+":"+n+a}}return t||void 0}($));break;case"acceptCharset":j="accept-charset";break;case"httpEquiv":j="http-equiv";break;default:if(i8.test(j))j=j.replace(i8,"$1:$2").toLowerCase();else{if(i4.test(j))continue;("-"===j[4]||ae.has(j))&&null!=$?$+="":n?i7.test(j)&&(j="panose1"===j?"panose-1":j.replace(/([A-Z])/g,"-$1").toLowerCase()):i9.test(j)&&(j=j.toLowerCase())}}null!=$&&!1!==$&&(P=!0===$||""===$?P+" "+j:P+" "+j+'="'+("string"==typeof $?ar($):$+"")+'"')}}if(i4.test(g))throw Error(g+" is not a valid HTML tag name in "+P+">");if(I||("string"==typeof C?I=ar(C):null!=C&&!1!==C&&!0!==C&&(I=e(C,r,"svg"===g||"foreignObject"!==g&&n,i,t,s,o))),ac&&ac(t),t.__=null,ad&&ad(t),!I&&ab.has(g))return P+"/>";var N="</"+g+">",U=P+">";return ag(I)?[U].concat(I,[N]):"string"!=typeof I?[U,I,N]:U+I+N}(e,ap,!1,void 0,i,!1,void 0);return ag(a)?a.join(""):a}catch(e){if(e.then)throw Error('Use "renderToStringAsync" for suspenseful rendering.');throw e}finally{iI.__c&&iI.__c(e,af),iI.__s=n,af.length=0}}(e)}</div></body></html>`}}function ak(e){let{url:t,theme:r,query:n,cookies:i,pages:a,providers:s}=e;return{csrf:(e,t,r)=>e?(t.logger.warn("csrf-disabled"),r.push({name:t.cookies.csrfToken.name,value:"",options:{...t.cookies.csrfToken.options,maxAge:0}}),{status:404,cookies:r}):{headers:{"Content-Type":"application/json","Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"},body:{csrfToken:t.csrfToken},cookies:r},providers:e=>({headers:{"Content-Type":"application/json"},body:e.reduce((e,{id:t,name:r,type:n,signinUrl:i,callbackUrl:a})=>(e[t]={id:t,name:r,type:n,signinUrl:i,callbackUrl:a},e),{})}),signin(t,o){if(t)throw new tJ("Unsupported action");if(a?.signIn){let t=`${a.signIn}${a.signIn.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:e.callbackUrl??"/"})}`;return o&&(t=`${t}&${new URLSearchParams({error:o})}`),{redirect:t,cookies:i}}let l=s?.find(e=>"webauthn"===e.type&&e.enableConditionalUI&&!!e.simpleWebAuthnBrowserVersion),c="";if(l){let{simpleWebAuthnBrowserVersion:e}=l;c=`<script src="https://unpkg.com/@simplewebauthn/browser@${e}/dist/bundle/index.umd.min.js" crossorigin="anonymous"></script>`}return aS({cookies:i,theme:r,html:function(e){let{csrfToken:t,providers:r=[],callbackUrl:n,theme:i,email:a,error:s}=e;"u">typeof document&&i?.brandColor&&document.documentElement.style.setProperty("--brand-color",i.brandColor),"u">typeof document&&i?.buttonText&&document.documentElement.style.setProperty("--button-text-color",i.buttonText);let o=s&&(ax[s]??ax.default),l=r.find(e=>"webauthn"===e.type&&e.enableConditionalUI)?.id;return a_("div",{className:"signin",children:[i?.brandColor&&a_("style",{dangerouslySetInnerHTML:{__html:`:root {--brand-color: ${i.brandColor}}`}}),i?.buttonText&&a_("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${i.buttonText}
        }
      `}}),a_("div",{className:"card",children:[o&&a_("div",{className:"error",children:a_("p",{children:o})}),i?.logo&&a_("img",{src:i.logo,alt:"Logo",className:"logo"}),r.map((e,i)=>{let s,o,l;("oauth"===e.type||"oidc"===e.type)&&({bg:s="#fff",brandColor:o,logo:l=`https://authjs.dev/img/providers/${e.id}.svg`}=e.style??{});let c=o??s??"#fff";return a_("div",{className:"provider",children:["oauth"===e.type||"oidc"===e.type?a_("form",{action:e.signinUrl,method:"POST",children:[a_("input",{type:"hidden",name:"csrfToken",value:t}),n&&a_("input",{type:"hidden",name:"callbackUrl",value:n}),a_("button",{type:"submit",className:"button",style:{"--provider-brand-color":c},tabIndex:0,children:[a_("span",{style:{filter:"invert(1) grayscale(1) brightness(1.3) contrast(9000)","mix-blend-mode":"luminosity",opacity:.95},children:["Sign in with ",e.name]}),l&&a_("img",{loading:"lazy",height:24,src:l})]})]}):null,("email"===e.type||"credentials"===e.type||"webauthn"===e.type)&&i>0&&"email"!==r[i-1].type&&"credentials"!==r[i-1].type&&"webauthn"!==r[i-1].type&&a_("hr",{}),"email"===e.type&&a_("form",{action:e.signinUrl,method:"POST",children:[a_("input",{type:"hidden",name:"csrfToken",value:t}),a_("label",{className:"section-header",htmlFor:`input-email-for-${e.id}-provider`,children:"Email"}),a_("input",{id:`input-email-for-${e.id}-provider`,autoFocus:!0,type:"email",name:"email",value:a,placeholder:"email@example.com",required:!0}),a_("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),"credentials"===e.type&&a_("form",{action:e.callbackUrl,method:"POST",children:[a_("input",{type:"hidden",name:"csrfToken",value:t}),Object.keys(e.credentials).map(t=>a_("div",{children:[a_("label",{className:"section-header",htmlFor:`input-${t}-for-${e.id}-provider`,children:e.credentials[t].label??t}),a_("input",{name:t,id:`input-${t}-for-${e.id}-provider`,type:e.credentials[t].type??"text",placeholder:e.credentials[t].placeholder??"",...e.credentials[t]})]},`input-group-${e.id}`)),a_("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),"webauthn"===e.type&&a_("form",{action:e.callbackUrl,method:"POST",id:`${e.id}-form`,children:[a_("input",{type:"hidden",name:"csrfToken",value:t}),Object.keys(e.formFields).map(t=>a_("div",{children:[a_("label",{className:"section-header",htmlFor:`input-${t}-for-${e.id}-provider`,children:e.formFields[t].label??t}),a_("input",{name:t,"data-form-field":!0,id:`input-${t}-for-${e.id}-provider`,type:e.formFields[t].type??"text",placeholder:e.formFields[t].placeholder??"",...e.formFields[t]})]},`input-group-${e.id}`)),a_("button",{id:`submitButton-${e.id}`,type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),("email"===e.type||"credentials"===e.type||"webauthn"===e.type)&&i+1<r.length&&a_("hr",{})]},e.id)})]}),l&&a_(iF,{children:a_("script",{dangerouslySetInnerHTML:{__html:`
const currentURL = window.location.href;
const authURL = currentURL.substring(0, currentURL.lastIndexOf('/'));
(${av})(authURL, "${l}");
`}})})]})}({csrfToken:e.csrfToken,providers:e.providers?.filter(e=>["email","oauth","oidc"].includes(e.type)||"credentials"===e.type&&e.credentials||"webauthn"===e.type&&e.formFields||!1),callbackUrl:e.callbackUrl,theme:e.theme,error:o,...n}),title:"Sign In",headTags:c})},signout:()=>a?.signOut?{redirect:a.signOut,cookies:i}:aS({cookies:i,theme:r,html:function(e){let{url:t,csrfToken:r,theme:n}=e;return a_("div",{className:"signout",children:[n?.brandColor&&a_("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n.brandColor}
        }
      `}}),n?.buttonText&&a_("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${n.buttonText}
        }
      `}}),a_("div",{className:"card",children:[n?.logo&&a_("img",{src:n.logo,alt:"Logo",className:"logo"}),a_("h1",{children:"Signout"}),a_("p",{children:"Are you sure you want to sign out?"}),a_("form",{action:t?.toString(),method:"POST",children:[a_("input",{type:"hidden",name:"csrfToken",value:r}),a_("button",{id:"submitButton",type:"submit",children:"Sign out"})]})]})]})}({csrfToken:e.csrfToken,url:t,theme:r}),title:"Sign Out"}),verifyRequest:e=>a?.verifyRequest?{redirect:`${a.verifyRequest}${t?.search??""}`,cookies:i}:aS({cookies:i,theme:r,html:function(e){let{url:t,theme:r}=e;return a_("div",{className:"verify-request",children:[r.brandColor&&a_("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${r.brandColor}
        }
      `}}),a_("div",{className:"card",children:[r.logo&&a_("img",{src:r.logo,alt:"Logo",className:"logo"}),a_("h1",{children:"Check your email"}),a_("p",{children:"A sign in link has been sent to your email address."}),a_("p",{children:a_("a",{className:"site",href:t.origin,children:t.host})})]})]})}({url:t,theme:r,...e}),title:"Verify Request"}),error:e=>a?.error?{redirect:`${a.error}${a.error.includes("?")?"&":"?"}error=${e}`,cookies:i}:aS({cookies:i,theme:r,...function(e){let{url:t,error:r="default",theme:n}=e,i=`${t}/signin`,a={default:{status:200,heading:"Error",message:a_("p",{children:a_("a",{className:"site",href:t?.origin,children:t?.host})})},Configuration:{status:500,heading:"Server error",message:a_("div",{children:[a_("p",{children:"There is a problem with the server configuration."}),a_("p",{children:"Check the server logs for more information."})]})},AccessDenied:{status:403,heading:"Access Denied",message:a_("div",{children:[a_("p",{children:"You do not have permission to sign in."}),a_("p",{children:a_("a",{className:"button",href:i,children:"Sign in"})})]})},Verification:{status:403,heading:"Unable to sign in",message:a_("div",{children:[a_("p",{children:"The sign in link is no longer valid."}),a_("p",{children:"It may have been used already or it may have expired."})]}),signin:a_("a",{className:"button",href:i,children:"Sign in"})}},{status:s,heading:o,message:l,signin:c}=a[r]??a.default;return{status:s,html:a_("div",{className:"error",children:[n?.brandColor&&a_("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n?.brandColor}
        }
      `}}),a_("div",{className:"card",children:[n?.logo&&a_("img",{src:n?.logo,alt:"Logo",className:"logo"}),a_("h1",{children:o}),a_("div",{className:"message",children:l}),c]})]})}}({url:t,theme:r,error:e}),title:"Error"})}}function aT(e,t=Date.now()){return new Date(t+1e3*e)}async function aA(e,t,r,n){if(!r?.providerAccountId||!r.type)throw Error("Missing or invalid provider account");if(!["email","oauth","oidc","webauthn"].includes(r.type))throw Error("Provider not supported");let{adapter:i,jwt:a,events:s,session:{strategy:o,generateSessionToken:l}}=n;if(!i)return{user:t,account:r};let c=r,{createUser:u,updateUser:d,getUser:h,getUserByAccount:p,getUserByEmail:f,linkAccount:g,createSession:m,getSessionAndUser:y,deleteSession:b}=i,w=null,_=null,v=!1,x="jwt"===o;if(e)if(x)try{let t=n.cookies.sessionToken.name;(w=await a.decode({...a,token:e,salt:t}))&&"sub"in w&&w.sub&&(_=await h(w.sub))}catch{}else{let t=await y(e);t&&(w=t.session,_=t.user)}if("email"===c.type){let r=await f(t.email);return r?(_?.id!==r.id&&!x&&e&&await b(e),_=await d({id:r.id,emailVerified:new Date}),await s.updateUser?.({user:_})):(_=await u({...t,emailVerified:new Date}),await s.createUser?.({user:_}),v=!0),{session:w=x?{}:await m({sessionToken:l(),userId:_.id,expires:aT(n.session.maxAge)}),user:_,isNewUser:v}}if("webauthn"===c.type){let e=await p({providerAccountId:c.providerAccountId,provider:c.provider});if(e){if(_){if(e.id===_.id){let e={...c,userId:_.id};return{session:w,user:_,isNewUser:v,account:e}}throw new t2("The account is already associated with another user",{provider:c.provider})}w=x?{}:await m({sessionToken:l(),userId:e.id,expires:aT(n.session.maxAge)});let t={...c,userId:e.id};return{session:w,user:e,isNewUser:v,account:t}}{if(_){await g({...c,userId:_.id}),await s.linkAccount?.({user:_,account:c,profile:t});let e={...c,userId:_.id};return{session:w,user:_,isNewUser:v,account:e}}if(t.email?await f(t.email):null)throw new t2("Another account already exists with the same e-mail address",{provider:c.provider});_=await u({...t}),await s.createUser?.({user:_}),await g({...c,userId:_.id}),await s.linkAccount?.({user:_,account:c,profile:t}),w=x?{}:await m({sessionToken:l(),userId:_.id,expires:aT(n.session.maxAge)});let e={...c,userId:_.id};return{session:w,user:_,isNewUser:!0,account:e}}}let E=await p({providerAccountId:c.providerAccountId,provider:c.provider});if(E){if(_){if(E.id===_.id)return{session:w,user:_,isNewUser:v};throw new tW("The account is already associated with another user",{provider:c.provider})}return{session:w=x?{}:await m({sessionToken:l(),userId:E.id,expires:aT(n.session.maxAge)}),user:E,isNewUser:v}}{let{provider:e}=n,{type:r,provider:i,providerAccountId:a,userId:o,...d}=c;if(c=Object.assign(e.account(d)??{},{providerAccountId:a,provider:i,type:r,userId:o}),_)return await g({...c,userId:_.id}),await s.linkAccount?.({user:_,account:c,profile:t}),{session:w,user:_,isNewUser:v};let h=t.email?await f(t.email):null;if(h){let e=n.provider;if(e?.allowDangerousEmailAccountLinking)_=h,v=!1;else throw new tW("Another account already exists with the same e-mail address",{provider:c.provider})}else _=await u({...t,emailVerified:null}),v=!0;return await s.createUser?.({user:_}),await g({...c,userId:_.id}),await s.linkAccount?.({user:_,account:c,profile:t}),{session:w=x?{}:await m({sessionToken:l(),userId:_.id,expires:aT(n.session.maxAge)}),user:_,isNewUser:v}}}function aR(e,t){if(null==e)return!1;try{return e instanceof t||Object.getPrototypeOf(e)[Symbol.toStringTag]===t.prototype[Symbol.toStringTag]}catch{return!1}}("u"<typeof navigator||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(n="oauth4webapi/v3.8.3");let aO="ERR_INVALID_ARG_VALUE",aC="ERR_INVALID_ARG_TYPE";function aP(e,t,r){let n=TypeError(e,{cause:r});return Object.assign(n,{code:t}),n}let aI=Symbol(),aj=Symbol(),a$=Symbol(),aN=Symbol(),aU=Symbol(),aD=Symbol();Symbol();let aL=new TextEncoder,aM=new TextDecoder;function aH(e){return"string"==typeof e?aL.encode(e):aM.decode(e)}function aW(e){return"string"==typeof e?a(e):i(e)}i=Uint8Array.prototype.toBase64?e=>(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e.toBase64({alphabet:"base64url",omitPadding:!0})):e=>{e instanceof ArrayBuffer&&(e=new Uint8Array(e));let t=[];for(let r=0;r<e.byteLength;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},a=Uint8Array.fromBase64?e=>{try{return Uint8Array.fromBase64(e,{alphabet:"base64url"})}catch(e){throw aP("The input to be decoded is not correctly encoded.",aO,e)}}:e=>{try{let t=atob(e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}catch(e){throw aP("The input to be decoded is not correctly encoded.",aO,e)}};class aB extends Error{code;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=sK,Error.captureStackTrace?.(this,this.constructor)}}class aK extends Error{code;constructor(e,t){super(e,t),this.name=this.constructor.name,t?.code&&(this.code=t?.code),Error.captureStackTrace?.(this,this.constructor)}}function aq(e,t,r){return new aK(e,{code:t,cause:r})}function aV(e){return!(null===e||"object"!=typeof e||Array.isArray(e))}function aJ(e){aR(e,Headers)&&(e=Object.fromEntries(e.entries()));let t=new Headers(e??{});if(n&&!t.has("user-agent")&&t.set("user-agent",n),t.has("authorization"))throw aP('"options.headers" must not include the "authorization" header name',aO);return t}function az(e,t){if(void 0!==t){if("function"==typeof t&&(t=t(e.href)),!(t instanceof AbortSignal))throw aP('"options.signal" must return or be an instance of AbortSignal',aC);return t}}function aF(e){return e.includes("//")?e.replace("//","/"):e}async function aG(e,t,r,n){if(!(e instanceof URL))throw aP(`"${t}" must be an instance of URL`,aC);st(e,n?.[aI]!==!0);let i=r(new URL(e.href)),a=aJ(n?.headers);return a.set("accept","application/json"),(n?.[aN]||fetch)(i.href,{body:void 0,headers:Object.fromEntries(a.entries()),method:"GET",redirect:"manual",signal:az(i,n?.signal)})}async function aX(e,t){return aG(e,"issuerIdentifier",e=>{switch(t?.algorithm){case void 0:case"oidc":e.pathname=aF(`${e.pathname}/.well-known/openid-configuration`);break;case"oauth2":!function(e,t,r=!1){"/"===e.pathname?e.pathname=t:e.pathname=aF(`${t}/${r?e.pathname:e.pathname.replace(/(\/)$/,"")}`)}(e,".well-known/oauth-authorization-server");break;default:throw aP('"options.algorithm" must be "oidc" (default), or "oauth2"',aO)}return e},t)}function aY(e,t,r,n,i){try{if("number"!=typeof e||!Number.isFinite(e))throw aP(`${r} must be a number`,aC,i);if(e>0)return;if(t){if(0!==e)throw aP(`${r} must be a non-negative number`,aO,i);return}throw aP(`${r} must be a positive number`,aO,i)}catch(e){if(n)throw aq(e.message,n,i);throw e}}function aQ(e,t,r,n){try{if("string"!=typeof e)throw aP(`${t} must be a string`,aC,n);if(0===e.length)throw aP(`${t} must not be empty`,aO,n)}catch(e){if(r)throw aq(e.message,r,n);throw e}}async function aZ(e,t){if(!(e instanceof URL)&&e!==ot)throw aP('"expectedIssuerIdentifier" must be an instance of URL',aC);if(!aR(t,Response))throw aP('"response" must be an instance of Response',aC);if(200!==t.status)throw aq('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',sG,t);s5(t);let r=await oe(t);if(aQ(r.issuer,'"response" body "issuer" property',sz,{body:r}),e!==ot&&new URL(r.issuer).href!==e.href)throw aq('"response" body "issuer" property does not match the expected value',s0,{expected:e.href,body:r,attribute:"issuer"});return r}function a0(e){var t=e,r="application/json";if(sb(t)!==r)throw function(e,...t){let r='"response" content-type must be ';if(t.length>2){let e=t.pop();r+=`${t.join(", ")}, or ${e}`}else 2===t.length?r+=`${t[0]} or ${t[1]}`:r+=t[0];return aq(r,sF,e)}(t,r)}function a1(){return aW(crypto.getRandomValues(new Uint8Array(32)))}async function a2(e){return aQ(e,"codeVerifier"),aW(await crypto.subtle.digest("SHA-256",aH(e)))}function a5(e){let t=e?.[aj];return"number"==typeof t&&Number.isFinite(t)?t:0}function a6(e){let t=e?.[a$];return"number"==typeof t&&Number.isFinite(t)&&-1!==Math.sign(t)?t:30}function a3(){return Math.floor(Date.now()/1e3)}function a4(e){if("object"!=typeof e||null===e)throw aP('"as" must be an object',aC);aQ(e.issuer,'"as.issuer"')}function a8(e){if("object"!=typeof e||null===e)throw aP('"client" must be an object',aC);aQ(e.client_id,'"client.client_id"')}function a9(e,t){let r=a3()+a5(t);return{jti:a1(),aud:e.issuer,exp:r+60,iat:r,nbf:r,iss:t.client_id,sub:t.client_id}}async function a7(e,t,r){if(!r.usages.includes("sign"))throw aP('CryptoKey instances used for signing assertions must include "sign" in their "usages"',aO);let n=`${aW(aH(JSON.stringify(e)))}.${aW(aH(JSON.stringify(t)))}`,i=aW(await crypto.subtle.sign(function(e){switch(e.algorithm.name){case"ECDSA":return{name:e.algorithm.name,hash:function(e){let{algorithm:t}=e;switch(t.namedCurve){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new aB("unsupported ECDSA namedCurve",{cause:e})}}(e)};case"RSA-PSS":switch(s6(e),e.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:e.algorithm.name,saltLength:parseInt(e.algorithm.hash.name.slice(-3),10)>>3};default:throw new aB("unsupported RSA-PSS hash name",{cause:e})}case"RSASSA-PKCS1-v1_5":return s6(e),e.algorithm.name;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":case"Ed25519":return e.algorithm.name}throw new aB("unsupported CryptoKey algorithm name",{cause:e})}(r),r,aH(n)));return`${n}.${i}`}let se=URL.parse?(e,t)=>URL.parse(e,t):(e,t)=>{try{return new URL(e,t)}catch{return null}};function st(e,t){if(t&&"https:"!==e.protocol)throw aq("only requests to HTTPS are allowed",sX,e);if("https:"!==e.protocol&&"http:"!==e.protocol)throw aq("only HTTP and HTTPS requests are allowed",sY,e)}function sr(e,t,r,n){let i;if("string"!=typeof e||!(i=se(e)))throw aq(`authorization server metadata does not contain a valid ${r?`"as.mtls_endpoint_aliases.${t}"`:`"as.${t}"`}`,void 0===e?s1:s2,{attribute:r?`mtls_endpoint_aliases.${t}`:t});return st(i,n),i}function sn(e,t,r,n){return r&&e.mtls_endpoint_aliases&&t in e.mtls_endpoint_aliases?sr(e.mtls_endpoint_aliases[t],t,r,n):sr(e[t],t,r,n)}class si extends Error{cause;code;error;status;error_description;response;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=sB,this.cause=t.cause,this.error=t.cause.error,this.status=t.response.status,this.error_description=t.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:t.response}),Error.captureStackTrace?.(this,this.constructor)}}class sa extends Error{cause;code;error;error_description;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=sq,this.cause=t.cause,this.error=t.cause.get("error"),this.error_description=t.cause.get("error_description")??void 0,Error.captureStackTrace?.(this,this.constructor)}}class ss extends Error{cause;code;response;status;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=sW,this.cause=t.cause,this.status=t.response.status,this.response=t.response,Object.defineProperty(this,"response",{enumerable:!1}),Error.captureStackTrace?.(this,this.constructor)}}let so="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",sl=RegExp("^[,\\s]*("+so+")"),sc=RegExp("^[,\\s]*("+so+')\\s*=\\s*"((?:[^"\\\\]|\\\\[\\s\\S])*)"[,\\s]*(.*)'),su=RegExp("^[,\\s]*"+("("+so+")\\s*=\\s*(")+so+")[,\\s]*(.*)"),sd=RegExp("^([a-zA-Z0-9\\-\\._\\~\\+\\/]+={0,2})(?:$|[,\\s])(.*)");async function sh(e){if(e.status>399&&e.status<500){s5(e),a0(e);try{let t=await e.clone().json();if(aV(t)&&"string"==typeof t.error&&t.error.length)return t}catch{}}}async function sp(e,t,r){if(e.status!==t){let t;if(sT(e),t=await sh(e))throw await e.body?.cancel(),new si("server responded with an error in the response body",{cause:t,response:e});throw aq(`"response" is not a conform ${r} response (unexpected HTTP status code)`,sG,e)}}function sf(e){if(!sP.has(e))throw aP('"options.DPoP" is not a valid DPoPHandle',aO)}async function sg(e,t,r,n,i,a){if(aQ(e,'"accessToken"'),!(r instanceof URL))throw aP('"url" must be an instance of URL',aC);st(r,a?.[aI]!==!0),n=aJ(n),a?.DPoP&&(sf(a.DPoP),await a.DPoP.addProof(r,n,t.toUpperCase(),e)),n.set("authorization",`${n.has("dpop")?"DPoP":"Bearer"} ${e}`);let s=await (a?.[aN]||fetch)(r.href,{body:i,headers:Object.fromEntries(n.entries()),method:t,redirect:"manual",signal:az(r,a?.signal)});return a?.DPoP?.cacheNonce(s,r),s}async function sm(e,t,r,n){a4(e),a8(t);let i=sn(e,"userinfo_endpoint",t.use_mtls_endpoint_aliases,n?.[aI]!==!0),a=aJ(n?.headers);return t.userinfo_signed_response_alg?a.set("accept","application/jwt"):(a.set("accept","application/json"),a.append("accept","application/jwt")),sg(r,"GET",i,a,null,{...n,[aj]:a5(t)})}let sy=Symbol();function sb(e){return e.headers.get("content-type")?.split(";")[0]}async function sw(e,t,r,n,i){let a;if(a4(e),a8(t),!aR(n,Response))throw aP('"response" must be an instance of Response',aC);if(sT(n),200!==n.status)throw aq('"response" is not a conform UserInfo Endpoint response (unexpected HTTP status code)',sG,n);if(s5(n),"application/jwt"===sb(n)){let{claims:r,jwt:s}=await s3(await n.text(),s4.bind(void 0,t.userinfo_signed_response_alg,e.userinfo_signing_alg_values_supported,void 0),a5(t),a6(t),i?.[aD]).then(sA.bind(void 0,t.client_id)).then(sO.bind(void 0,e));sE.set(n,s),a=r}else{if(t.userinfo_signed_response_alg)throw aq("JWT UserInfo Response expected",sV,n);a=await oe(n)}if(aQ(a.sub,'"response" body "sub" property',sz,{body:a}),r===sy);else if(aQ(r,'"expectedSubject"'),a.sub!==r)throw aq('unexpected "response" body "sub" property value',s0,{expected:r,body:a,attribute:"sub"});return a}async function s_(e,t,r,n,i,a,s){return await r(e,t,i,a),a.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(s?.[aN]||fetch)(n.href,{body:i,headers:Object.fromEntries(a.entries()),method:"POST",redirect:"manual",signal:az(n,s?.signal)})}async function sv(e,t,r,n,i,a){let s=sn(e,"token_endpoint",t.use_mtls_endpoint_aliases,a?.[aI]!==!0);i.set("grant_type",n);let o=aJ(a?.headers);o.set("accept","application/json"),a?.DPoP!==void 0&&(sf(a.DPoP),await a.DPoP.addProof(s,o,"POST"));let l=await s_(e,t,r,s,i,o,a);return a?.DPoP?.cacheNonce(l,s),l}let sx=new WeakMap,sE=new WeakMap;function sS(e){if(!e.id_token)return;let t=sx.get(e);if(!t)throw aP('"ref" was already garbage collected or did not resolve from the proper sources',aO);return t}async function sk(e,t,r,n,i,a){if(a4(e),a8(t),!aR(r,Response))throw aP('"response" must be an instance of Response',aC);await sp(r,200,"Token Endpoint"),s5(r);let s=await oe(r);if(aQ(s.access_token,'"response" body "access_token" property',sz,{body:s}),aQ(s.token_type,'"response" body "token_type" property',sz,{body:s}),s.token_type=s.token_type.toLowerCase(),void 0!==s.expires_in){let e="number"!=typeof s.expires_in?parseFloat(s.expires_in):s.expires_in;aY(e,!0,'"response" body "expires_in" property',sz,{body:s}),s.expires_in=e}if(void 0!==s.refresh_token&&aQ(s.refresh_token,'"response" body "refresh_token" property',sz,{body:s}),void 0!==s.scope&&"string"!=typeof s.scope)throw aq('"response" body "scope" property must be a string',sz,{body:s});if(void 0!==s.id_token){aQ(s.id_token,'"response" body "id_token" property',sz,{body:s});let a=["aud","exp","iat","iss","sub"];!0===t.require_auth_time&&a.push("auth_time"),void 0!==t.default_max_age&&(aY(t.default_max_age,!0,'"client.default_max_age"'),a.push("auth_time")),n?.length&&a.push(...n);let{claims:o,jwt:l}=await s3(s.id_token,s4.bind(void 0,t.id_token_signed_response_alg,e.id_token_signing_alg_values_supported,"RS256"),a5(t),a6(t),i).then(sN.bind(void 0,a)).then(sC.bind(void 0,e)).then(sR.bind(void 0,t.client_id));if(Array.isArray(o.aud)&&1!==o.aud.length){if(void 0===o.azp)throw aq('ID Token "aud" (audience) claim includes additional untrusted audiences',sZ,{claims:o,claim:"aud"});if(o.azp!==t.client_id)throw aq('unexpected ID Token "azp" (authorized party) claim value',sZ,{expected:t.client_id,claims:o,claim:"azp"})}void 0!==o.auth_time&&aY(o.auth_time,!0,'ID Token "auth_time" (authentication time)',sz,{claims:o}),sE.set(r,l),sx.set(s,o)}if(a?.[s.token_type]!==void 0)a[s.token_type](r,s);else if("dpop"!==s.token_type&&"bearer"!==s.token_type)throw new aB("unsupported `token_type` value",{cause:{body:s}});return s}function sT(e){let t;if(t=function(e){if(!aR(e,Response))throw aP('"response" must be an instance of Response',aC);let t=e.headers.get("www-authenticate");if(null===t)return;let r=[],n=t;for(;n;){let e,t=n.match(sl),i=t?.["1"].toLowerCase();if(!i)return;let a=n.substring(t[0].length);if(a&&!a.match(/^[\s,]/))return;let s=a.match(/^\s+(.*)$/),o=!!s;n=s?s[1]:void 0;let l={};if(o)for(;n;){let r,i;if(t=n.match(sc)){if([,r,i,n]=t,i.includes("\\"))try{i=JSON.parse(`"${i}"`)}catch{}l[r.toLowerCase()]=i;continue}if(t=n.match(su)){[,r,i,n]=t,l[r.toLowerCase()]=i;continue}if(t=n.match(sd)){if(Object.keys(l).length)break;[,e,n]=t;break}return}else n=a||void 0;let c={scheme:i,parameters:l};e&&(c.token68=e),r.push(c)}if(r.length)return r}(e))throw new ss("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:t,response:e})}function sA(e,t){return void 0!==t.claims.aud?sR(e,t):t}function sR(e,t){if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e))throw aq('unexpected JWT "aud" (audience) claim value',sZ,{expected:e,claims:t.claims,claim:"aud"})}else if(t.claims.aud!==e)throw aq('unexpected JWT "aud" (audience) claim value',sZ,{expected:e,claims:t.claims,claim:"aud"});return t}function sO(e,t){return void 0!==t.claims.iss?sC(e,t):t}function sC(e,t){let r=e[or]?.(t)??e.issuer;if(t.claims.iss!==r)throw aq('unexpected JWT "iss" (issuer) claim value',sZ,{expected:r,claims:t.claims,claim:"iss"});return t}let sP=new WeakSet,sI=Symbol();async function sj(e,t,r,n,i,a,s){if(a4(e),a8(t),!sP.has(n))throw aP('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',aO);aQ(i,'"redirectUri"');let o=s8(n,"code");if(!o)throw aq('no authorization code in "callbackParameters"',sz);let l=new URLSearchParams(s?.additionalParameters);return l.set("redirect_uri",i),l.set("code",o),a!==sI&&(aQ(a,'"codeVerifier"'),l.set("code_verifier",a)),sv(e,t,r,"authorization_code",l,s)}let s$={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function sN(e,t){for(let r of e)if(void 0===t.claims[r])throw aq(`JWT "${r}" (${s$[r]}) claim missing`,sz,{claims:t.claims});return t}let sU=Symbol(),sD=Symbol();async function sL(e,t,r,n){return"string"==typeof n?.expectedNonce||"number"==typeof n?.maxAge||n?.requireIdToken?sM(e,t,r,n.expectedNonce,n.maxAge,n[aD],n.recognizedTokenTypes):sH(e,t,r,n?.[aD],n?.recognizedTokenTypes)}async function sM(e,t,r,n,i,a,s){let o=[];switch(n){case void 0:n=sU;break;case sU:break;default:aQ(n,'"expectedNonce" argument'),o.push("nonce")}switch(i??=t.default_max_age){case void 0:i=sD;break;case sD:break;default:aY(i,!0,'"maxAge" argument'),o.push("auth_time")}let l=await sk(e,t,r,o,a,s);aQ(l.id_token,'"response" body "id_token" property',sz,{body:l});let c=sS(l);if(i!==sD){let e=a3()+a5(t),r=a6(t);if(c.auth_time+i<e-r)throw aq("too much time has elapsed since the last End-User authentication",sQ,{claims:c,now:e,tolerance:r,claim:"auth_time"})}if(n===sU){if(void 0!==c.nonce)throw aq('unexpected ID Token "nonce" claim value',sZ,{expected:void 0,claims:c,claim:"nonce"})}else if(c.nonce!==n)throw aq('unexpected ID Token "nonce" claim value',sZ,{expected:n,claims:c,claim:"nonce"});return l}async function sH(e,t,r,n,i){let a=await sk(e,t,r,void 0,n,i),s=sS(a);if(s){if(void 0!==t.default_max_age){aY(t.default_max_age,!0,'"client.default_max_age"');let e=a3()+a5(t),r=a6(t);if(s.auth_time+t.default_max_age<e-r)throw aq("too much time has elapsed since the last End-User authentication",sQ,{claims:s,now:e,tolerance:r,claim:"auth_time"})}if(void 0!==s.nonce)throw aq('unexpected ID Token "nonce" claim value',sZ,{expected:void 0,claims:s,claim:"nonce"})}return a}let sW="OAUTH_WWW_AUTHENTICATE_CHALLENGE",sB="OAUTH_RESPONSE_BODY_ERROR",sK="OAUTH_UNSUPPORTED_OPERATION",sq="OAUTH_AUTHORIZATION_RESPONSE_ERROR",sV="OAUTH_JWT_USERINFO_EXPECTED",sJ="OAUTH_PARSE_ERROR",sz="OAUTH_INVALID_RESPONSE",sF="OAUTH_RESPONSE_IS_NOT_JSON",sG="OAUTH_RESPONSE_IS_NOT_CONFORM",sX="OAUTH_HTTP_REQUEST_FORBIDDEN",sY="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",sQ="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",sZ="OAUTH_JWT_CLAIM_COMPARISON_FAILED",s0="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",s1="OAUTH_MISSING_SERVER_METADATA",s2="OAUTH_INVALID_SERVER_METADATA";function s5(e){if(e.bodyUsed)throw aP('"response" body has been used already',aO)}function s6(e){let{algorithm:t}=e;if("number"!=typeof t.modulusLength||t.modulusLength<2048)throw new aB(`unsupported ${t.name} modulusLength`,{cause:e})}async function s3(e,t,r,n,i){let a,s,{0:o,1:l,length:c}=e.split(".");if(5===c)if(void 0!==i)e=await i(e),{0:o,1:l,length:c}=e.split(".");else throw new aB("JWE decryption is not configured",{cause:e});if(3!==c)throw aq("Invalid JWT",sz,e);try{a=JSON.parse(aH(aW(o)))}catch(e){throw aq("failed to parse JWT Header body as base64url encoded JSON",sJ,e)}if(!aV(a))throw aq("JWT Header must be a top level object",sz,e);if(t(a),void 0!==a.crit)throw new aB('no JWT "crit" header parameter extensions are supported',{cause:{header:a}});try{s=JSON.parse(aH(aW(l)))}catch(e){throw aq("failed to parse JWT Payload body as base64url encoded JSON",sJ,e)}if(!aV(s))throw aq("JWT Payload must be a top level object",sz,e);let u=a3()+r;if(void 0!==s.exp){if("number"!=typeof s.exp)throw aq('unexpected JWT "exp" (expiration time) claim type',sz,{claims:s});if(s.exp<=u-n)throw aq('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',sQ,{claims:s,now:u,tolerance:n,claim:"exp"})}if(void 0!==s.iat&&"number"!=typeof s.iat)throw aq('unexpected JWT "iat" (issued at) claim type',sz,{claims:s});if(void 0!==s.iss&&"string"!=typeof s.iss)throw aq('unexpected JWT "iss" (issuer) claim type',sz,{claims:s});if(void 0!==s.nbf){if("number"!=typeof s.nbf)throw aq('unexpected JWT "nbf" (not before) claim type',sz,{claims:s});if(s.nbf>u+n)throw aq('unexpected JWT "nbf" (not before) claim value',sQ,{claims:s,now:u,tolerance:n,claim:"nbf"})}if(void 0!==s.aud&&"string"!=typeof s.aud&&!Array.isArray(s.aud))throw aq('unexpected JWT "aud" (audience) claim type',sz,{claims:s});return{header:a,claims:s,jwt:e}}function s4(e,t,r,n){if(void 0!==e){if("string"==typeof e?n.alg!==e:!e.includes(n.alg))throw aq('unexpected JWT "alg" header parameter',sz,{header:n,expected:e,reason:"client configuration"});return}if(Array.isArray(t)){if(!t.includes(n.alg))throw aq('unexpected JWT "alg" header parameter',sz,{header:n,expected:t,reason:"authorization server metadata"});return}if(void 0!==r){if("string"==typeof r?n.alg!==r:"function"==typeof r?!r(n.alg):!r.includes(n.alg))throw aq('unexpected JWT "alg" header parameter',sz,{header:n,expected:r,reason:"default value"});return}throw aq('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client:e,issuer:t,fallback:r})}function s8(e,t){let{0:r,length:n}=e.getAll(t);if(n>1)throw aq(`"${t}" parameter must be provided only once`,sz);return r}let s9=Symbol(),s7=Symbol();async function oe(e,t=a0){let r;try{r=await e.json()}catch(r){throw t(e),aq('failed to parse "response" body as JSON',sJ,r)}if(!aV(r))throw aq('"response" body must be a top level object',sz,{body:r});return r}let ot=Symbol(),or=Symbol();async function on(e,t,r){let{cookies:n,logger:i}=r,a=n[e],s=new Date;s.setTime(s.getTime()+9e5),i.debug(`CREATE_${e.toUpperCase()}`,{name:a.name,payload:t,COOKIE_TTL:900,expires:s});let o=await nV({...r.jwt,maxAge:900,token:{value:t},salt:a.name}),l={...a.options,expires:s};return{name:a.name,value:o,options:l}}async function oi(e,t,r){try{let{logger:n,cookies:i,jwt:a}=r;if(n.debug(`PARSE_${e.toUpperCase()}`,{cookie:t}),!t)throw new tN(`${e} cookie was missing`);let s=await nJ({...a,token:t,salt:i[e].name});if(s?.value)return s.value;throw Error("Invalid cookie")}catch(t){throw new tN(`${e} value could not be parsed`,{cause:t})}}function oa(e,t,r){let{logger:n,cookies:i}=t,a=i[e];n.debug(`CLEAR_${e.toUpperCase()}`,{cookie:a}),r.push({name:a.name,value:"",options:{...i[e].options,maxAge:0}})}function os(e,t){return async function(r,n,i){let{provider:a,logger:s}=i;if(!a?.checks?.includes(e))return;let o=r?.[i.cookies[t].name];s.debug(`USE_${t.toUpperCase()}`,{value:o});let l=await oi(t,o,i);return oa(t,i,n),l}}let oo={async create(e){let t=a1(),r=await a2(t);return{cookie:await on("pkceCodeVerifier",t,e),value:r}},use:os("pkce","pkceCodeVerifier")},ol="encodedState",oc={async create(e,t){let{provider:r}=e;if(!r.checks.includes("state")){if(t)throw new tN("State data was provided but the provider is not configured to use state");return}let n={origin:t,random:a1()},i=await nV({secret:e.jwt.secret,token:n,salt:ol,maxAge:900});return{cookie:await on("state",i,e),value:i}},use:os("state","state"),async decode(e,t){try{t.logger.debug("DECODE_STATE",{state:e});let r=await nJ({secret:t.jwt.secret,token:e,salt:ol});if(r)return r;throw Error("Invalid state")}catch(e){throw new tN("State could not be decoded",{cause:e})}}},ou={async create(e){if(!e.provider.checks.includes("nonce"))return;let t=a1();return{cookie:await on("nonce",t,e),value:t}},use:os("nonce","nonce")},od="encodedWebauthnChallenge",oh={create:async(e,t,r)=>({cookie:await on("webauthnChallenge",await nV({secret:e.jwt.secret,token:{challenge:t,registerData:r},salt:od,maxAge:900}),e)}),async use(e,t,r){let n=t?.[e.cookies.webauthnChallenge.name],i=await oi("webauthnChallenge",n,e),a=await nJ({secret:e.jwt.secret,token:i,salt:od});if(oa("webauthnChallenge",e,r),!a)throw new tN("WebAuthn challenge was missing");return a}};function op(e){return encodeURIComponent(e).replace(/%20/g,"+")}async function of(e,t,r){var n,i;let a,s,o,l,c,{logger:u,provider:d}=r,{token:h,userinfo:p}=d;if(h?.url&&"authjs.dev"!==h.url.host||p?.url&&"authjs.dev"!==p.url.host)a={issuer:d.issuer??"https://authjs.dev",token_endpoint:h?.url.toString(),userinfo_endpoint:p?.url.toString()};else{let e=new URL(d.issuer),t=await aX(e,{[aI]:!0,[aN]:d[ii]});if(!(a=await aZ(e,t)).token_endpoint)throw TypeError("TODO: Authorization server did not provide a token endpoint.");if(!a.userinfo_endpoint)throw TypeError("TODO: Authorization server did not provide a userinfo endpoint.")}let f={client_id:d.clientId,...d.client};switch(f.token_endpoint_auth_method){case void 0:case"client_secret_basic":s=(e,t,r,n)=>{var i,a;let s,o,l;n.set("authorization",(i=d.clientId,a=d.clientSecret,s=op(i),o=op(a),l=btoa(`${s}:${o}`),`Basic ${l}`))};break;case"client_secret_post":aQ(n=d.clientSecret,'"clientSecret"'),s=(e,t,r,i)=>{r.set("client_id",t.client_id),r.set("client_secret",n)};break;case"client_secret_jwt":aQ(i=d.clientSecret,'"clientSecret"'),c=void 0,s=async(e,t,r,n)=>{l||=await crypto.subtle.importKey("raw",aH(i),{hash:"SHA-256",name:"HMAC"},!1,["sign"]);let a={alg:"HS256"},s=a9(e,t);c?.(a,s);let o=`${aW(aH(JSON.stringify(a)))}.${aW(aH(JSON.stringify(s)))}`,u=await crypto.subtle.sign(l.algorithm,l,aH(o));r.set("client_id",t.client_id),r.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),r.set("client_assertion",`${o}.${aW(new Uint8Array(u))}`)};break;case"private_key_jwt":s=function(e,t){let{key:r,kid:n}=e instanceof CryptoKey?{key:e}:e?.key instanceof CryptoKey?(void 0!==e.kid&&aQ(e.kid,'"kid"'),{key:e.key,kid:e.kid}):{};var i='"clientPrivateKey.key"';if(!(r instanceof CryptoKey))throw aP(`${i} must be a CryptoKey`,aC);if("private"!==r.type)throw aP(`${i} must be a private CryptoKey`,aO);return async(e,i,a,s)=>{let o={alg:function(e){switch(e.algorithm.name){case"RSA-PSS":switch(e.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new aB("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}case"RSASSA-PKCS1-v1_5":switch(e.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new aB("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}case"ECDSA":switch(e.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new aB("unsupported EcKeyAlgorithm namedCurve",{cause:e})}case"Ed25519":case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return e.algorithm.name;case"EdDSA":return"Ed25519";default:throw new aB("unsupported CryptoKey algorithm name",{cause:e})}}(r),kid:n},l=a9(e,i);t?.[aU]?.(o,l),a.set("client_id",i.client_id),a.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),a.set("client_assertion",await a7(o,l,r))}}(d.token.clientPrivateKey,{[aU](e,t){t.aud=[a.issuer,a.token_endpoint]}});break;case"none":s=(e,t,r,n)=>{r.set("client_id",t.client_id)};break;default:throw Error("unsupported client authentication method")}let g=[],m=await oc.use(t,g,r);try{o=function(e,t,r,n){var i;if(a4(e),a8(t),r instanceof URL&&(r=r.searchParams),!(r instanceof URLSearchParams))throw aP('"parameters" must be an instance of URLSearchParams, or URL',aC);if(s8(r,"response"))throw aq('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',sz,{parameters:r});let a=s8(r,"iss"),s=s8(r,"state");if(!a&&e.authorization_response_iss_parameter_supported)throw aq('response parameter "iss" (issuer) missing',sz,{parameters:r});if(a&&a!==e.issuer)throw aq('unexpected "iss" (issuer) response parameter value',sz,{expected:e.issuer,parameters:r});switch(n){case void 0:case s7:if(void 0!==s)throw aq('unexpected "state" response parameter encountered',sz,{expected:void 0,parameters:r});break;case s9:break;default:if(aQ(n,'"expectedState" argument'),s!==n)throw aq(void 0===s?'response parameter "state" missing':'unexpected "state" response parameter value',sz,{expected:n,parameters:r})}if(s8(r,"error"))throw new sa("authorization response from the server is an error",{cause:r});let o=s8(r,"id_token"),l=s8(r,"token");if(void 0!==o||void 0!==l)throw new aB("implicit and hybrid flows are not supported");return i=new URLSearchParams(r),sP.add(i),i}(a,f,new URLSearchParams(e),d.checks.includes("state")?m:s9)}catch(e){if(e instanceof sa){let t={providerId:d.id,...Object.fromEntries(e.cause.entries())};throw u.debug("OAuthCallbackError",t),new tB("OAuth Provider returned an error",t)}throw e}let y=await oo.use(t,g,r),b=d.callbackUrl;!r.isOnRedirectProxy&&d.redirectProxyUrl&&(b=d.redirectProxyUrl);let w=await sj(a,f,s,o,b,y??"decoy",{[aI]:!0,[aN]:(...e)=>(d.checks.includes("pkce")||e[1].body.delete("code_verifier"),(d[ii]??fetch)(...e))});d.token?.conform&&(w=await d.token.conform(w.clone())??w);let _={},v="oidc"===d.type;if(d[ia])switch(d.id){case"microsoft-entra-id":case"azure-ad":{let e=await w.clone().json();if(e.error){let t={providerId:d.id,...e};throw new tB(`OAuth Provider returned an error: ${e.error}`,t)}let{tid:t}=function(e){let t,r;if("string"!=typeof e)throw new rx("JWTs must use Compact JWS serialization, JWT must be a string");let{1:n,length:i}=e.split(".");if(5===i)throw new rx("Only JWTs using Compact JWS serialization can be decoded");if(3!==i)throw new rx("Invalid JWT");if(!n)throw new rx("JWTs must contain a payload");try{t=rh(n)}catch{throw new rx("Failed to base64url decode the payload")}try{r=JSON.parse(rs.decode(t))}catch{throw new rx("Failed to parse the decoded payload as JSON")}if(!r2(r))throw new rx("Invalid JWT Claims Set");return r}(e.id_token);if("string"==typeof t){let e=a.issuer?.match(/microsoftonline\.com\/(\w+)\/v2\.0/)?.[1]??"common",r=new URL(a.issuer.replace(e,t)),n=await aX(r,{[aN]:d[ii]});a=await aZ(r,n)}}}let x=await sL(a,f,w,{expectedNonce:await ou.use(t,g,r),requireIdToken:v});if(v){let t=sS(x);if(_=t,d[ia]&&"apple"===d.id)try{_.user=JSON.parse(e?.user)}catch{}if(!1===d.idToken){let e=await sm(a,f,x.access_token,{[aN]:d[ii],[aI]:!0});_=await sw(a,f,t.sub,e)}}else if(p?.request){let e=await p.request({tokens:x,provider:d});e instanceof Object&&(_=e)}else if(p?.url){let e=await sm(a,f,x.access_token,{[aN]:d[ii],[aI]:!0});_=await e.json()}else throw TypeError("No userinfo endpoint configured");return x.expires_in&&(x.expires_at=Math.floor(Date.now()/1e3)+Number(x.expires_in)),{...await og(_,d,x,u),profile:_,cookies:g}}async function og(e,t,r,n){try{let n=await t.profile(e,r);return{user:{...n,id:crypto.randomUUID(),email:n.email?.toLowerCase()},account:{...r,provider:t.id,type:t.type,providerAccountId:n.id??crypto.randomUUID()}}}catch(r){n.debug("getProfile error details",e),n.error(new tK(r,{provider:t.id}))}}async function om(e,t,r,n){let i=await ov(e,t,r),{cookie:a}=await oh.create(e,i.challenge,r);return{status:200,cookies:[...n??[],a],body:{action:"register",options:i},headers:{"Content-Type":"application/json"}}}async function oy(e,t,r,n){let i=await o_(e,t,r),{cookie:a}=await oh.create(e,i.challenge);return{status:200,cookies:[...n??[],a],body:{action:"authenticate",options:i},headers:{"Content-Type":"application/json"}}}async function ob(e,t,r){let n,{adapter:i,provider:a}=e,s=t.body&&"string"==typeof t.body.data?JSON.parse(t.body.data):void 0;if(!s||"object"!=typeof s||!("id"in s)||"string"!=typeof s.id)throw new tk("Invalid WebAuthn Authentication response");let o=oS(oE(s.id)),l=await i.getAuthenticator(o);if(!l)throw new tk(`WebAuthn authenticator not found in database: ${JSON.stringify({credentialID:o})}`);let{challenge:c}=await oh.use(e,t.cookies,r);try{var u;let r=a.getRelayingParty(e,t);n=await a.simpleWebAuthn.verifyAuthenticationResponse({...a.verifyAuthenticationOptions,expectedChallenge:c,response:s,authenticator:{...u=l,credentialDeviceType:u.credentialDeviceType,transports:ok(u.transports),credentialID:oE(u.credentialID),credentialPublicKey:oE(u.credentialPublicKey)},expectedOrigin:r.origin,expectedRPID:r.id})}catch(e){throw new t1(e)}let{verified:d,authenticationInfo:h}=n;if(!d)throw new t1("WebAuthn authentication response could not be verified");try{let{newCounter:e}=h;await i.updateAuthenticatorCounter(l.credentialID,e)}catch(e){throw new tA(`Failed to update authenticator counter. This may cause future authentication attempts to fail. ${JSON.stringify({credentialID:o,oldCounter:l.counter,newCounter:h.newCounter})}`,e)}let p=await i.getAccount(l.providerAccountId,a.id);if(!p)throw new tk(`WebAuthn account not found in database: ${JSON.stringify({credentialID:o,providerAccountId:l.providerAccountId})}`);let f=await i.getUser(p.userId);if(!f)throw new tk(`WebAuthn user not found in database: ${JSON.stringify({credentialID:o,providerAccountId:l.providerAccountId,userID:p.userId})}`);return{account:p,user:f}}async function ow(e,t,r){var n;let i,{provider:a}=e,s=t.body&&"string"==typeof t.body.data?JSON.parse(t.body.data):void 0;if(!s||"object"!=typeof s||!("id"in s)||"string"!=typeof s.id)throw new tk("Invalid WebAuthn Registration response");let{challenge:o,registerData:l}=await oh.use(e,t.cookies,r);if(!l)throw new tk("Missing user registration data in WebAuthn challenge cookie");try{let r=a.getRelayingParty(e,t);i=await a.simpleWebAuthn.verifyRegistrationResponse({...a.verifyRegistrationOptions,expectedChallenge:o,response:s,expectedOrigin:r.origin,expectedRPID:r.id})}catch(e){throw new t1(e)}if(!i.verified||!i.registrationInfo)throw new t1("WebAuthn registration response could not be verified");let c={providerAccountId:oS(i.registrationInfo.credentialID),provider:e.provider.id,type:a.type},u={providerAccountId:c.providerAccountId,counter:i.registrationInfo.counter,credentialID:oS(i.registrationInfo.credentialID),credentialPublicKey:oS(i.registrationInfo.credentialPublicKey),credentialBackedUp:i.registrationInfo.credentialBackedUp,credentialDeviceType:i.registrationInfo.credentialDeviceType,transports:(n=s.response.transports,n?.join(","))};return{user:l,account:c,authenticator:u}}async function o_(e,t,r){let{provider:n,adapter:i}=e,a=r&&r.id?await i.listAuthenticatorsByUserId(r.id):null,s=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateAuthenticationOptions({...n.authenticationOptions,rpID:s.id,allowCredentials:a?.map(e=>({id:oE(e.credentialID),type:"public-key",transports:ok(e.transports)}))})}async function ov(e,t,r){let{provider:n,adapter:i}=e,a=r.id?await i.listAuthenticatorsByUserId(r.id):null,s=n4(32),o=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateRegistrationOptions({...n.registrationOptions,userID:s,userName:r.email,userDisplayName:r.name??void 0,rpID:o.id,rpName:o.name,excludeCredentials:a?.map(e=>({id:oE(e.credentialID),type:"public-key",transports:ok(e.transports)}))})}function ox(e){let{provider:t,adapter:r}=e;if(!r)throw new tD("An adapter is required for the WebAuthn provider");if(!t||"webauthn"!==t.type)throw new tF("Provider must be WebAuthn");return{...e,provider:t,adapter:r}}function oE(e){return new Uint8Array(e9.Buffer.from(e,"base64"))}function oS(e){return e9.Buffer.from(e).toString("base64")}function ok(e){return e?e.split(","):void 0}async function oT(e,t,r,n){if(!t.provider)throw new tF("Callback route called without provider");let{query:i,body:a,method:s,headers:o}=e,{provider:l,adapter:c,url:u,callbackUrl:d,pages:h,jwt:p,events:f,callbacks:g,session:{strategy:m,maxAge:y},logger:b}=t,w="jwt"===m;try{if("oauth"===l.type||"oidc"===l.type){let s,o=l.authorization?.url.searchParams.get("response_mode")==="form_post"?a:i;if(t.isOnRedirectProxy&&o?.state){let e=await oc.decode(o.state,t);if(e?.origin&&new URL(e.origin).origin!==t.url.origin){let t=`${e.origin}?${new URLSearchParams(o)}`;return b.debug("Proxy redirecting to",t),{redirect:t,cookies:n}}}let m=await of(o,e.cookies,t);m.cookies.length&&n.push(...m.cookies),b.debug("authorization result",m);let{user:_,account:v,profile:x}=m;if(!_||!v||!x)return{redirect:`${u}/signin`,cookies:n};if(c){let{getUserByAccount:e}=c;s=await e({providerAccountId:v.providerAccountId,provider:l.id})}let E=await oA({user:s??_,account:v,profile:x},t);if(E)return{redirect:E,cookies:n};let{user:S,session:k,isNewUser:T}=await aA(r.value,_,v,t);if(w){let e={name:S.name,email:S.email,picture:S.image,sub:S.id?.toString()},i=await g.jwt({token:e,user:S,account:v,profile:x,isNewUser:T,trigger:T?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,a=await p.encode({...p,token:i,salt:e}),s=new Date;s.setTime(s.getTime()+1e3*y);let o=r.chunk(a,{expires:s});n.push(...o)}}else n.push({name:t.cookies.sessionToken.name,value:k.sessionToken,options:{...t.cookies.sessionToken.options,expires:k.expires}});if(await f.signIn?.({user:S,account:v,profile:x,isNewUser:T}),T&&h.newUser)return{redirect:`${h.newUser}${h.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}if("email"===l.type){let e=i?.token,a=i?.email;if(!e){let t=TypeError("Missing token. The sign-in URL was manually opened without token or the link was not sent correctly in the email.",{cause:{hasToken:!!e}});throw t.name="Configuration",t}let s=l.secret??t.secret,o=await c.useVerificationToken({identifier:a,token:await n3(`${e}${s}`)}),u=!!o,m=u&&o.expires.valueOf()<Date.now();if(!u||m||a&&o.identifier!==a)throw new tX({hasInvite:u,expired:m});let{identifier:b}=o,_=await c.getUserByEmail(b)??{id:crypto.randomUUID(),email:b,emailVerified:null},v={providerAccountId:_.email,userId:_.id,type:"email",provider:l.id},x=await oA({user:_,account:v},t);if(x)return{redirect:x,cookies:n};let{user:E,session:S,isNewUser:k}=await aA(r.value,_,v,t);if(w){let e={name:E.name,email:E.email,picture:E.image,sub:E.id?.toString()},i=await g.jwt({token:e,user:E,account:v,isNewUser:k,trigger:k?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,a=await p.encode({...p,token:i,salt:e}),s=new Date;s.setTime(s.getTime()+1e3*y);let o=r.chunk(a,{expires:s});n.push(...o)}}else n.push({name:t.cookies.sessionToken.name,value:S.sessionToken,options:{...t.cookies.sessionToken.options,expires:S.expires}});if(await f.signIn?.({user:E,account:v,isNewUser:k}),k&&h.newUser)return{redirect:`${h.newUser}${h.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}if("credentials"===l.type&&"POST"===s){let e=a??{};Object.entries(i??{}).forEach(([e,t])=>u.searchParams.set(e,t));let c=await l.authorize(e,new Request(u,{headers:o,method:s,body:JSON.stringify(a)}));if(c)c.id=c.id?.toString()??crypto.randomUUID();else throw new tj;let h={providerAccountId:c.id,type:"credentials",provider:l.id},m=await oA({user:c,account:h,credentials:e},t);if(m)return{redirect:m,cookies:n};let b={name:c.name,email:c.email,picture:c.image,sub:c.id},w=await g.jwt({token:b,user:c,account:h,isNewUser:!1,trigger:"signIn"});if(null===w)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,i=await p.encode({...p,token:w,salt:e}),a=new Date;a.setTime(a.getTime()+1e3*y);let s=r.chunk(i,{expires:a});n.push(...s)}return await f.signIn?.({user:c,account:h}),{redirect:d,cookies:n}}else if("webauthn"===l.type&&"POST"===s){let i,a,s,o=e.body?.action;if("string"!=typeof o||"authenticate"!==o&&"register"!==o)throw new tk("Invalid action parameter");let l=ox(t);switch(o){case"authenticate":{let t=await ob(l,e,n);i=t.user,a=t.account;break}case"register":{let r=await ow(t,e,n);i=r.user,a=r.account,s=r.authenticator}}await oA({user:i,account:a},t);let{user:c,isNewUser:u,session:m,account:b}=await aA(r.value,i,a,t);if(!b)throw new tk("Error creating or finding account");if(s&&c.id&&await l.adapter.createAuthenticator({...s,userId:c.id}),w){let e={name:c.name,email:c.email,picture:c.image,sub:c.id?.toString()},i=await g.jwt({token:e,user:c,account:b,isNewUser:u,trigger:u?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,a=await p.encode({...p,token:i,salt:e}),s=new Date;s.setTime(s.getTime()+1e3*y);let o=r.chunk(a,{expires:s});n.push(...o)}}else n.push({name:t.cookies.sessionToken.name,value:m.sessionToken,options:{...t.cookies.sessionToken.options,expires:m.expires}});if(await f.signIn?.({user:c,account:b,isNewUser:u}),u&&h.newUser)return{redirect:`${h.newUser}${h.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}throw new tF(`Callback for provider type (${l.type}) is not supported`)}catch(t){if(t instanceof tk)throw t;let e=new tO(t,{provider:l.id});throw b.debug("callback route error details",{method:s,query:i,body:a}),e}}async function oA(e,t){let r,{signIn:n,redirect:i}=t.callbacks;try{r=await n(e)}catch(e){if(e instanceof tk)throw e;throw new tR(e)}if(!r)throw new tR("AccessDenied");if("string"==typeof r)return await i({url:r,baseUrl:t.url.origin})}async function oR(e,t,r,n,i){let{adapter:a,jwt:s,events:o,callbacks:l,logger:c,session:{strategy:u,maxAge:d}}=e,h={body:null,headers:{"Content-Type":"application/json",...!n&&{"Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"}},cookies:r},p=t.value;if(!p)return h;if("jwt"===u){try{let r=e.cookies.sessionToken.name,a=await s.decode({...s,token:p,salt:r});if(!a)throw Error("Invalid JWT");let c=await l.jwt({token:a,...n&&{trigger:"update"},session:i}),u=aT(d);if(null!==c){let e={user:{name:c.name,email:c.email,image:c.picture},expires:u.toISOString()},n=await l.session({session:e,token:c});h.body=n;let i=await s.encode({...s,token:c,salt:r}),a=t.chunk(i,{expires:u});h.cookies?.push(...a),await o.session?.({session:n,token:c})}else h.cookies?.push(...t.clean())}catch(e){c.error(new tU(e)),h.cookies?.push(...t.clean())}return h}try{let{getSessionAndUser:r,deleteSession:s,updateSession:c}=a,u=await r(p);if(u&&u.session.expires.valueOf()<Date.now()&&(await s(p),u=null),u){let{user:t,session:r}=u,a=e.session.updateAge,s=r.expires.valueOf()-1e3*d+1e3*a,f=aT(d);s<=Date.now()&&await c({sessionToken:p,expires:f});let g=await l.session({session:{...r,user:t},user:t,newSession:i,...n?{trigger:"update"}:{}});h.body=g,h.cookies?.push({name:e.cookies.sessionToken.name,value:p,options:{...e.cookies.sessionToken.options,expires:f}}),await o.session?.({session:g})}else p&&h.cookies?.push(...t.clean())}catch(e){c.error(new tq(e))}return h}async function oO(e,t){let r,n,{logger:i,provider:a}=t,s=a.authorization?.url;if(!s||"authjs.dev"===s.host){let e=new URL(a.issuer),t=await aX(e,{[aN]:a[ii],[aI]:!0}),r=await aZ(e,t).catch(t=>{if(!(t instanceof TypeError)||"Invalid URL"!==t.message)throw t;throw TypeError(`Discovery request responded with an invalid issuer. expected: ${e}`)});if(!r.authorization_endpoint)throw TypeError("Authorization server did not provide an authorization endpoint.");s=new URL(r.authorization_endpoint)}let o=s.searchParams,l=a.callbackUrl;!t.isOnRedirectProxy&&a.redirectProxyUrl&&(l=a.redirectProxyUrl,n=a.callbackUrl,i.debug("using redirect proxy",{redirect_uri:l,data:n}));let c=Object.assign({response_type:"code",client_id:a.clientId,redirect_uri:l,...a.authorization?.params},Object.fromEntries(a.authorization?.url.searchParams??[]),e);for(let e in c)o.set(e,c[e]);let u=[];a.authorization?.url.searchParams.get("response_mode")==="form_post"&&(t.cookies.state.options.sameSite="none",t.cookies.state.options.secure=!0,t.cookies.nonce.options.sameSite="none",t.cookies.nonce.options.secure=!0);let d=await oc.create(t,n);if(d&&(o.set("state",d.value),u.push(d.cookie)),a.checks?.includes("pkce"))if(r&&!r.code_challenge_methods_supported?.includes("S256"))"oidc"===a.type&&(a.checks=["nonce"]);else{let{value:e,cookie:r}=await oo.create(t);o.set("code_challenge",e),o.set("code_challenge_method","S256"),u.push(r)}let h=await ou.create(t);return h&&(o.set("nonce",h.value),u.push(h.cookie)),"oidc"!==a.type||s.searchParams.has("scope")||s.searchParams.set("scope","openid profile email"),i.debug("authorization url is ready",{url:s,cookies:u,provider:a}),{redirect:s.toString(),cookies:u}}async function oC(e,t){let r,{body:n}=e,{provider:i,callbacks:a,adapter:s}=t,o=(i.normalizeIdentifier??function(e){if(!e)throw Error("Missing email from request body.");let[t,r]=e.toLowerCase().trim().split("@");return r=r.split(",")[0],`${t}@${r}`})(n?.email),l={id:crypto.randomUUID(),email:o,emailVerified:null},c=await s.getUserByEmail(o)??l,u={providerAccountId:o,userId:c.id,type:"email",provider:i.id};try{r=await a.signIn({user:c,account:u,email:{verificationRequest:!0}})}catch(e){throw new tR(e)}if(!r)throw new tR("AccessDenied");if("string"==typeof r)return{redirect:await a.redirect({url:r,baseUrl:t.url.origin})};let{callbackUrl:d,theme:h}=t,p=await i.generateVerificationToken?.()??n4(32),f=new Date(Date.now()+(i.maxAge??86400)*1e3),g=i.secret??t.secret,m=new URL(t.basePath,t.url.origin),y=i.sendVerificationRequest({identifier:o,token:p,expires:f,url:`${m}/callback/${i.id}?${new URLSearchParams({callbackUrl:d,token:p,email:o})}`,provider:i,theme:h,request:new Request(e.url,{headers:e.headers,method:e.method,body:"POST"===e.method?JSON.stringify(e.body??{}):void 0})}),b=s.createVerificationToken?.({identifier:o,token:await n3(`${p}${g}`),expires:f});return await Promise.all([y,b]),{redirect:`${m}/verify-request?${new URLSearchParams({provider:i.id,type:i.type})}`}}async function oP(e,t,r){let n=`${r.url.origin}${r.basePath}/signin`;if(!r.provider)return{redirect:n,cookies:t};switch(r.provider.type){case"oauth":case"oidc":{let{redirect:n,cookies:i}=await oO(e.query,r);return i&&t.push(...i),{redirect:n,cookies:t}}case"email":return{...await oC(e,r),cookies:t};default:return{redirect:n,cookies:t}}}async function oI(e,t,r){let{jwt:n,events:i,callbackUrl:a,logger:s,session:o}=r,l=t.value;if(!l)return{redirect:a,cookies:e};try{if("jwt"===o.strategy){let e=r.cookies.sessionToken.name,t=await n.decode({...n,token:l,salt:e});await i.signOut?.({token:t})}else{let e=await r.adapter?.deleteSession(l);await i.signOut?.({session:e})}}catch(e){s.error(new tV(e))}return e.push(...t.clean()),{redirect:a,cookies:e}}async function oj(e,t){let{adapter:r,jwt:n,session:{strategy:i}}=e,a=t.value;if(!a)return null;if("jwt"===i){let t=e.cookies.sessionToken.name,r=await n.decode({...n,token:a,salt:t});if(r&&r.sub)return{id:r.sub,name:r.name,email:r.email,image:r.picture}}else{let e=await r?.getSessionAndUser(a);if(e)return e.user}return null}async function o$(e,t,r,n){let i=ox(t),{provider:a}=i,{action:s}=e.query??{};if("register"!==s&&"authenticate"!==s&&void 0!==s)return{status:400,body:{error:"Invalid action"},cookies:n,headers:{"Content-Type":"application/json"}};let o=await oj(t,r),l=o?{user:o,exists:!0}:await a.getUserInfo(t,e),c=l?.user;switch(function(e,t,r){let{user:n,exists:i=!1}=r??{};switch(e){case"authenticate":return"authenticate";case"register":if(n&&t===i)return"register";break;case void 0:if(!t)if(!n)return"authenticate";else if(i)return"authenticate";else return"register"}return null}(s,!!o,l)){case"authenticate":return oy(i,e,c,n);case"register":if("string"==typeof c?.email)return om(i,e,c,n);break;default:return{status:400,body:{error:"Invalid request"},cookies:n,headers:{"Content-Type":"application/json"}}}}async function oN(e,t){let{action:r,providerId:n,error:i,method:a}=e,s=t.skipCSRFCheck===it,{options:o,cookies:l}=await id({authOptions:t,action:r,providerId:n,url:e.url,callbackUrl:e.body?.callbackUrl??e.query?.callbackUrl,csrfToken:e.body?.csrfToken,cookies:e.cookies,isPost:"POST"===a,csrfDisabled:s}),c=new tS(o.cookies.sessionToken,e.cookies,o.logger);if("GET"===a){let t=ak({...o,query:e.query,cookies:l});switch(r){case"callback":return await oT(e,o,c,l);case"csrf":return t.csrf(s,o,l);case"error":return t.error(i);case"providers":return t.providers(o.providers);case"session":return await oR(o,c,l);case"signin":return t.signin(n,i);case"signout":return t.signout();case"verify-request":return t.verifyRequest();case"webauthn-options":return await o$(e,o,c,l)}}else{let{csrfTokenVerified:t}=o;switch(r){case"callback":return"credentials"===o.provider.type&&n9(r,t),await oT(e,o,c,l);case"session":return n9(r,t),await oR(o,c,l,!0,e.body?.data);case"signin":return n9(r,t),await oP(e,l,o);case"signout":return n9(r,t),await oI(l,c,o)}}throw new tJ(`Cannot handle action: ${r}`)}function oU(e,t,r,n,i){let a,s=i?.basePath,o=n.AUTH_URL??n.NEXTAUTH_URL;if(o)a=new URL(o),s&&"/"!==s&&"/"!==a.pathname&&(a.pathname!==s&&nQ(i).warn("env-url-basepath-mismatch"),a.pathname="/");else{let e=r.get("x-forwarded-host")??r.get("host"),n=r.get("x-forwarded-proto")??t??"https",i=n.endsWith(":")?n:n+":";a=new URL(`${i}//${e}`)}let l=a.toString().replace(/\/$/,"");if(s){let t=s?.replace(/(^\/|\/$)/g,"")??"";return new URL(`${l}/${t}/${e}`)}return new URL(`${l}/${e}`)}async function oD(e,t){let r=nQ(t),n=await n5(e,t);if(!n)return Response.json("Bad request.",{status:400});let i=function(e,t){let{url:r}=e,n=[];if(!t6&&t.debug&&n.push("debug-enabled"),!t.trustHost)return new tG(`Host must be trusted. URL was: ${e.url}`);if(!t.secret?.length)return new tH("Please define a `secret`");let i=e.query?.callbackUrl;if(i&&!t3(i,r.origin))return new tI(`Invalid callback URL. Received: ${i}`);let{callbackUrl:a}=tE(t.useSecureCookies??"https:"===r.protocol),s=e.cookies?.[t.cookies?.callbackUrl?.name??a.name];if(s&&!t3(s,r.origin))return new tI(`Invalid callback URL. Received: ${s}`);let o=!1;for(let e of t.providers){let t="function"==typeof e?e():e;if(("oauth"===t.type||"oidc"===t.type)&&!(t.issuer??t.options?.issuer)){let e,{authorization:r,token:n,userinfo:i}=t;if("string"==typeof r||r?.url?"string"==typeof n||n?.url?"string"==typeof i||i?.url||(e="userinfo"):e="token":e="authorization",e)return new t$(`Provider "${t.id}" is missing both \`issuer\` and \`${e}\` endpoint config. At least one of them is required`)}if("credentials"===t.type)t4=!0;else if("email"===t.type)t8=!0;else if("webauthn"===t.type){var l;if(t9=!0,t.simpleWebAuthnBrowserVersion&&(l=t.simpleWebAuthnBrowserVersion,!/^v\d+(?:\.\d+){0,2}$/.test(l)))return new tk(`Invalid provider config for "${t.id}": simpleWebAuthnBrowserVersion "${t.simpleWebAuthnBrowserVersion}" must be a valid semver string.`);if(t.enableConditionalUI){if(o)return new tZ("Multiple webauthn providers have 'enableConditionalUI' set to True. Only one provider can have this option enabled at a time");if(o=!0,!Object.values(t.formFields).some(e=>e.autocomplete&&e.autocomplete.toString().indexOf("webauthn")>-1))return new t0(`Provider "${t.id}" has 'enableConditionalUI' set to True, but none of its formFields have 'webauthn' in their autocomplete param`)}}}if(t4){let e=t.session?.strategy==="database",r=!t.providers.some(e=>"credentials"!==("function"==typeof e?e():e).type);if(e&&r)return new tz("Signing in with credentials only supported if JWT strategy is enabled");if(t.providers.some(e=>{let t="function"==typeof e?e():e;return"credentials"===t.type&&!t.authorize}))return new tM("Must define an authorize() handler to use credentials authentication provider")}let{adapter:c,session:u}=t,d=[];if(t8||u?.strategy==="database"||!u?.strategy&&c)if(t8){if(!c)return new tD("Email login requires an adapter");d.push(...t7)}else{if(!c)return new tD("Database session requires an adapter");d.push(...re)}if(t9){if(!t.experimental?.enableWebAuthn)return new t5("WebAuthn is an experimental feature. To enable it, set `experimental.enableWebAuthn` to `true` in your config");if(n.push("experimental-webauthn"),!c)return new tD("WebAuthn requires an adapter");d.push(...rt)}if(c){let e=d.filter(e=>!(e in c));if(e.length)return new tL(`Required adapter methods were missing: ${e.join(", ")}`)}return t6||(t6=!0),n}(n,t);if(Array.isArray(i))i.forEach(r.warn);else if(i){if(r.error(i),!new Set(["signin","signout","error","verify-request"]).has(n.action)||"GET"!==n.method)return Response.json({message:"There was a problem with the server configuration. Check the server logs for more information."},{status:500});let{pages:e,theme:a}=t,s=e?.error&&n.url.searchParams.get("callbackUrl")?.startsWith(e.error);if(!e?.error||s)return s&&r.error(new tC(`The error page ${e?.error} should not require authentication`)),n6(ak({theme:a}).error("Configuration"));let o=`${n.url.origin}${e.error}?error=Configuration`;return Response.redirect(o)}let a=e.headers?.has("X-Auth-Return-Redirect"),s=t.raw===ir;try{let e=await oN(n,t);if(s)return e;let r=n6(e),i=r.headers.get("Location");if(!a||!i)return r;return Response.json({url:i},{headers:r.headers})}catch(d){r.error(d);let i=d instanceof tk;if(i&&s&&!a)throw d;if("POST"===e.method&&"session"===n.action)return Response.json(null,{status:400});let o=new URLSearchParams({error:d instanceof tk&&tQ.has(d.type)?d.type:"Configuration"});d instanceof tj&&o.set("code",d.code);let l=i&&d.kind||"error",c=t.pages?.[l]??`${t.basePath}/${l.toLowerCase()}`,u=`${n.url.origin}${c}?${o}`;if(a)return Response.json({url:u});return Response.redirect(u)}}e.i(389899),"u"<typeof URLPattern||URLPattern;var ew=ew,ew=ew,e3=e3,oL=e.i(813566),oM=e.i(537104),oH=e.i(312153);function oW(){let e=tl.getStore();return(null==e?void 0:e.rootTaskSpawnPhase)==="action"}function oB(e){let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!t)return e;let{origin:r}=new URL(t),{href:n,origin:i}=e.nextUrl;return new ec(n.replace(i,r),e)}function oK(e){try{e.secret??(e.secret=process.env.AUTH_SECRET??process.env.NEXTAUTH_SECRET);let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!t)return;let{pathname:r}=new URL(t);if("/"===r)return;e.basePath||(e.basePath=r)}catch{}finally{e.basePath||(e.basePath="/api/auth"),function(e,t,r=!1){try{let n=e.AUTH_URL;n&&(t.basePath?r||nQ(t).warn("env-url-basepath-redundant"):t.basePath=new URL(n).pathname)}catch{}finally{t.basePath??(t.basePath="/auth")}if(!t.secret?.length){t.secret=[];let r=e.AUTH_SECRET;for(let n of(r&&t.secret.push(r),[1,2,3])){let r=e[`AUTH_SECRET_${n}`];r&&t.secret.unshift(r)}}t.redirectProxyUrl??(t.redirectProxyUrl=e.AUTH_REDIRECT_PROXY_URL),t.trustHost??(t.trustHost=!!(e.AUTH_URL??e.AUTH_TRUST_HOST??e.VERCEL??e.CF_PAGES??"production"!==e.NODE_ENV)),t.providers=t.providers.map(t=>{let{id:r}="function"==typeof t?t({}):t,n=r.toUpperCase().replace(/-/g,"_"),i=e[`AUTH_${n}_ID`],a=e[`AUTH_${n}_SECRET`],s=e[`AUTH_${n}_ISSUER`],o=e[`AUTH_${n}_KEY`],l="function"==typeof t?t({clientId:i,clientSecret:a,issuer:s,apiKey:o}):t;return"oauth"===l.type||"oidc"===l.type?(l.clientId??(l.clientId=i),l.clientSecret??(l.clientSecret=a),l.issuer??(l.issuer=s)):"email"===l.type&&(l.apiKey??(l.apiKey=o)),l})}(process.env,e,!0)}}e.s([],456720),e.i(456720);var ew=ew,e3=e3,oq=e.i(773397);let oV={current:null},oJ="function"==typeof oq.cache?oq.cache:e=>e,oz=console.warn;function oF(e){return function(...t){oz(e(...t))}}function oG(){let e="cookies",t=ew.workAsyncStorageInstance.getStore(),r=e3.workUnitAsyncStorageInstance.getStore();if(t){if(r&&"after"===r.phase&&!oW())throw Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`cookies()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E843",enumerable:!1,configurable:!0});if(t.forceStatic)return oY(ev.seal(new eo.RequestCookies(new Headers({}))));if(t.dynamicShouldError)throw Object.defineProperty(new oM.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E849",enumerable:!1,configurable:!0});if(r)switch(r.type){case"cache":let a=Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E831",enumerable:!1,configurable:!0});throw Error.captureStackTrace(a,oG),t.invalidDynamicUsageError??=a,a;case"unstable-cache":throw Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E846",enumerable:!1,configurable:!0});case"prerender":var n=t,i=r;let s=oX.get(i);if(s)return s;let o=(0,oH.makeHangingPromise)(i.renderSignal,n.route,"`cookies()`");return oX.set(i,o),o;case"prerender-client":let l="`cookies`";throw Object.defineProperty(new e8.InvariantError(`${l} must not be used within a Client Component. Next.js should be preventing ${l} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,oL.postponeWithTracking)(t.route,e,r.dynamicTracking);case"prerender-legacy":return(0,oL.throwToInterruptStaticGeneration)(e,t,r);case"prerender-runtime":return(0,oL.delayUntilRuntimeStage)(r,oY(r.cookies));case"private-cache":return oY(r.cookies);case"request":return(0,oL.trackDynamicDataInDynamicRender)(r),oY(eS(r)?r.userspaceMutableCookies:r.cookies)}}(0,e6.throwForMissingRequestStore)(e)}oJ(e=>{try{oz(oV.current)}finally{oV.current=null}});let oX=new WeakMap;function oY(e){let t=oX.get(e);if(t)return t;let r=Promise.resolve(e);return oX.set(e,r),r}oF(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`cookies()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E830",enumerable:!1,configurable:!0})});var ew=ew,e3=e3;function oQ(){let e="headers",t=ew.workAsyncStorageInstance.getStore(),r=e3.workUnitAsyncStorageInstance.getStore();if(t){if(r&&"after"===r.phase&&!oW())throw Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`headers()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E839",enumerable:!1,configurable:!0});if(t.forceStatic)return o0(eb.seal(new Headers({})));if(r)switch(r.type){case"cache":{let e=Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E833",enumerable:!1,configurable:!0});throw Error.captureStackTrace(e,oQ),t.invalidDynamicUsageError??=e,e}case"unstable-cache":throw Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E838",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new oM.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E828",enumerable:!1,configurable:!0});if(r)switch(r.type){case"prerender":var n=t,i=r;let a=oZ.get(i);if(a)return a;let s=(0,oH.makeHangingPromise)(i.renderSignal,n.route,"`headers()`");return oZ.set(i,s),s;case"prerender-client":let o="`headers`";throw Object.defineProperty(new e8.InvariantError(`${o} must not be used within a client component. Next.js should be preventing ${o} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,oL.postponeWithTracking)(t.route,e,r.dynamicTracking);case"prerender-legacy":return(0,oL.throwToInterruptStaticGeneration)(e,t,r);case"prerender-runtime":return(0,oL.delayUntilRuntimeStage)(r,o0(r.headers));case"private-cache":return o0(r.headers);case"request":return(0,oL.trackDynamicDataInDynamicRender)(r),o0(r.headers)}}(0,e6.throwForMissingRequestStore)(e)}let oZ=new WeakMap;function o0(e){let t=oZ.get(e);if(t)return t;let r=Promise.resolve(e);return oZ.set(e,r),r}oF(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`headers()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E836",enumerable:!1,configurable:!0})});var ew=ew,e3=e3;async function o1(e,t){return oD(new Request(oU("session",e.get("x-forwarded-proto"),e,process.env,t),{headers:{cookie:e.get("cookie")??""}}),{...t,callbacks:{...t.callbacks,async session(...e){let r=await t.callbacks?.session?.(...e)??{...e[0].session,expires:e[0].session.expires?.toISOString?.()??e[0].session.expires};return{user:e[0].user??e[0].token,...r}}}})}function o2(e){return"function"==typeof e}function o5(e,t){return"function"==typeof e?async(...r)=>{if(!r.length){let r=await oQ(),n=await e(void 0);return t?.(n),o1(r,n).then(e=>e.json())}if(r[0]instanceof Request){let n=r[0],i=r[1],a=await e(n);return t?.(a),o6([n,i],a)}if(o2(r[0])){let n=r[0];return async(...r)=>{let i=await e(r[0]);return t?.(i),o6(r,i,n)}}let n="req"in r[0]?r[0].req:r[0],i="res"in r[0]?r[0].res:r[1],a=await e(n);return t?.(a),o1(new Headers(n.headers),a).then(async e=>{let t=await e.json();for(let t of e.headers.getSetCookie())"headers"in i?i.headers.append("set-cookie",t):i.appendHeader("set-cookie",t);return t})}:(...t)=>{if(!t.length)return Promise.resolve(oQ()).then(t=>o1(t,e).then(e=>e.json()));if(t[0]instanceof Request)return o6([t[0],t[1]],e);if(o2(t[0])){let r=t[0];return async(...t)=>o6(t,e,r).then(e=>e)}let r="req"in t[0]?t[0].req:t[0],n="res"in t[0]?t[0].res:t[1];return o1(new Headers(r.headers),e).then(async e=>{let t=await e.json();for(let t of e.headers.getSetCookie())"headers"in n?n.headers.append("set-cookie",t):n.appendHeader("set-cookie",t);return t})}}async function o6(e,t,r){let n=oB(e[0]),i=await o1(n.headers,t),a=await i.json(),s=!0;t.callbacks?.authorized&&(s=await t.callbacks.authorized({request:n,auth:a}));let o=ef.next?.();if(s instanceof Response){var l,c,u;let e,r;o=s;let i=s.headers.get("Location"),{pathname:a}=n.nextUrl;i&&(l=a,c=new URL(i).pathname,u=t,e=c.replace(`${l}/`,""),r=Object.values(u.pages??{}),(o3.has(e)||r.includes(c))&&c===l)&&(s=!0)}else if(r)n.auth=a,o=await r(n,e[1])??ef.next();else if(!s){let e=t.pages?.signIn??`${t.basePath}/signin`;if(n.nextUrl.pathname!==e){let t=n.nextUrl.clone();t.pathname=e,t.searchParams.set("callbackUrl",n.nextUrl.href),o=ef.redirect(t)}}let d=new Response(o?.body,o);for(let e of i.headers.getSetCookie())d.headers.append("set-cookie",e);return d}e.i(362862),new WeakMap,oF(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`draftMode()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E835",enumerable:!1,configurable:!0})});let o3=new Set(["providers","session","csrf","signin","signout","callback","verify-request","error"]);URLSearchParams;var o4=e.i(110520),o8=e.i(920977);let o9=e.r(595384).actionAsyncStorage;function o7(e,t){throw function(e,t,r=o4.RedirectStatusCode.TemporaryRedirect){let n=Object.defineProperty(Error(o8.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n.digest=`${o8.REDIRECT_ERROR_CODE};${t};${e};${r};`,n}(e,t??=o9?.getStore()?.isAction?o8.RedirectType.push:o8.RedirectType.replace,o4.RedirectStatusCode.TemporaryRedirect)}var le=e.i(67132);function lt(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}async function lr(e,t={},r,n){let i=new Headers(await oQ()),{redirect:a=!0,redirectTo:s,...o}=t instanceof FormData?Object.fromEntries(t):t,l=s?.toString()??i.get("Referer")??"/",c=oU("signin",i.get("x-forwarded-proto"),i,process.env,n);if(!e)return c.searchParams.append("callbackUrl",l),a&&o7(c.toString()),c.toString();let u=`${c}/${e}?${new URLSearchParams(r)}`,d={};for(let t of n.providers){let{options:r,...n}="function"==typeof t?t():t,i=r?.id??n.id;if(i===e){d={id:i,type:r?.type??n.type};break}}if(!d.id){let e=`${c}?${new URLSearchParams({callbackUrl:l})}`;return a&&o7(e),e}"credentials"===d.type&&(u=u.replace("signin","callback")),i.set("Content-Type","application/x-www-form-urlencoded");let h=new Request(u,{method:"POST",headers:i,body:new URLSearchParams({...o,callbackUrl:l})}),p=await oD(h,{...n,raw:ir,skipCSRFCheck:it}),f=await oG();for(let e of p?.cookies??[])f.set(e.name,e.value,e.options);let g=(p instanceof Response?p.headers.get("Location"):p.redirect)??u;return a?o7(g):g}async function ln(e,t){let r=new Headers(await oQ());r.set("Content-Type","application/x-www-form-urlencoded");let n=oU("signout",r.get("x-forwarded-proto"),r,process.env,t),i=new URLSearchParams({callbackUrl:e?.redirectTo??r.get("Referer")??"/"}),a=new Request(n,{method:"POST",headers:r,body:i}),s=await oD(a,{...t,raw:ir,skipCSRFCheck:it}),o=await oG();for(let e of s?.cookies??[])o.set(e.name,e.value,e.options);return e?.redirect??!0?o7(s.redirect):s}async function li(e,t){let r=new Headers(await oQ());r.set("Content-Type","application/json");let n=new Request(oU("session",r.get("x-forwarded-proto"),r,process.env,t),{method:"POST",headers:r,body:JSON.stringify({data:e})}),i=await oD(n,{...t,raw:ir,skipCSRFCheck:it}),a=await oG();for(let e of i?.cookies??[])a.set(e.name,e.value,e.options);return i.body}le.HTTP_ERROR_FALLBACK_ERROR_CODE,le.HTTP_ERROR_FALLBACK_ERROR_CODE,le.HTTP_ERROR_FALLBACK_ERROR_CODE,e.r(252461).unstable_rethrow,e.s(["unstable_isUnrecognizedActionError",()=>lt],911214),e.i(911214);class la extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class ls extends la{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class lo extends la{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ll extends la{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}(H=X||(X={})).Any="any",H.ApNortheast1="ap-northeast-1",H.ApNortheast2="ap-northeast-2",H.ApSouth1="ap-south-1",H.ApSoutheast1="ap-southeast-1",H.ApSoutheast2="ap-southeast-2",H.CaCentral1="ca-central-1",H.EuCentral1="eu-central-1",H.EuWest1="eu-west-1",H.EuWest2="eu-west-2",H.EuWest3="eu-west-3",H.SaEast1="sa-east-1",H.UsEast1="us-east-1",H.UsWest1="us-west-1",H.UsWest2="us-west-2";function lc(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}"function"==typeof SuppressedError&&SuppressedError;class lu{constructor(e,{headers:t={},customFetch:r,region:n=X.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){var t,r,n,i;return t=this,r=arguments,n=void 0,i=function*(e,t={}){var r;let n,i;try{let a,{headers:s,method:o,body:l,signal:c,timeout:u}=t,d={},{region:h}=t;h||(h=this.region);let p=new URL(`${this.url}/${e}`);h&&"any"!==h&&(d["x-region"]=h,p.searchParams.set("forceFunctionRegion",h)),l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?"u">typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",a=l):"string"==typeof l?(d["Content-Type"]="text/plain",a=l):"u">typeof FormData&&l instanceof FormData?a=l:(d["Content-Type"]="application/json",a=JSON.stringify(l)):a=!l||"string"==typeof l||"u">typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer||"u">typeof FormData&&l instanceof FormData?l:JSON.stringify(l);let f=c;u&&(i=new AbortController,n=setTimeout(()=>i.abort(),u),c?(f=i.signal,c.addEventListener("abort",()=>i.abort())):f=i.signal);let g=yield this.fetch(p.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),s),body:a,signal:f}).catch(e=>{throw new ls(e)}),m=g.headers.get("x-relay-error");if(m&&"true"===m)throw new lo(g);if(!g.ok)throw new ll(g);let y=(null!=(r=g.headers.get("Content-Type"))?r:"text/plain").split(";")[0].trim();return{data:"application/json"===y?yield g.json():"application/octet-stream"===y||"application/pdf"===y?yield g.blob():"text/event-stream"===y?g:"multipart/form-data"===y?yield g.formData():yield g.text(),error:null,response:g}}catch(e){return{data:null,error:e,response:e instanceof ll||e instanceof lo?e.context:void 0}}finally{n&&clearTimeout(n)}},new(n||(n=Promise))(function(e,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):((r=t.value)instanceof n?r:new n(function(e){e(r)})).then(s,o)}l((i=i.apply(t,r||[])).next())})}}var ld=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},lh=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!=(t=e.shouldThrowOnError)&&t,this.signal=e.signal,this.isMaybeSingle=null!=(r=e.isMaybeSingle)&&r,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,i,a;let s=null,o=null,l=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==r.method){let t=await e.text();""===t||(o="text/csv"===r.headers.get("Accept")||r.headers.get("Accept")&&(null==(i=r.headers.get("Accept"))?void 0:i.includes("application/vnd.pgrst.plan+text"))?t:JSON.parse(t))}let a=null==(t=r.headers.get("Prefer"))?void 0:t.match(/count=(exact|planned|estimated)/),d=null==(n=e.headers.get("content-range"))?void 0:n.split("/");a&&d&&d.length>1&&(l=parseInt(d[1])),r.isMaybeSingle&&"GET"===r.method&&Array.isArray(o)&&(o.length>1?(s={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{let t=await e.text();try{s=JSON.parse(t),Array.isArray(s)&&404===e.status&&(o=[],s=null,c=200,u="OK")}catch(r){404===e.status&&""===t?(c=204,u="No Content"):s={message:t}}if(s&&r.isMaybeSingle&&(null==s||null==(a=s.details)?void 0:a.includes("0 rows"))&&(s=null,c=200,u="OK"),s&&r.shouldThrowOnError)throw new ld(s)}return{error:s,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,r,n,i,a,s;let o="",l=null==e?void 0:e.cause;if(l){let t=null!=(r=null==l?void 0:l.message)?r:"",s=null!=(n=null==l?void 0:l.code)?n:"";o=`${null!=(i=null==e?void 0:e.name)?i:"FetchError"}: ${null==e?void 0:e.message}

Caused by: ${null!=(a=null==l?void 0:l.name)?a:"Error"}: ${t}`,s&&(o+=` (${s})`),(null==l?void 0:l.stack)&&(o+=`
${l.stack}`)}else o=null!=(s=null==e?void 0:e.stack)?s:"";return{error:{message:`${null!=(t=null==e?void 0:e.name)?t:"FetchError"}: ${null==e?void 0:e.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}},lp=class extends lh{select(e){let t=!1,r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){let a=i?`${i}.order`:"order",s=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){let i=void 0===n?"offset":`${n}.offset`,a=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var s;let o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!=(s=this.headers.get("Accept"))?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};let lf=RegExp("[,()]");var lg=class extends lp{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&lf.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&lf.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let i="";"plain"===n?i="pl":"phrase"===n?i="ph":"websearch"===n&&(i="w");let a=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},lm=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){let{head:r=!1,count:n}=null!=t?t:{},i=!1,a=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join(""),{url:s,headers:o}=this.cloneRequestState();return s.searchParams.set("select",a),n&&o.append("Prefer",`count=${n}`),new lg({method:r?"HEAD":"GET",url:s,headers:o,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;let{url:i,headers:a}=this.cloneRequestState();if(t&&a.append("Prefer",`count=${t}`),r||a.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);i.searchParams.set("columns",e.join(","))}}return new lg({method:"POST",url:i,headers:a,schema:this.schema,body:e,fetch:null!=(n=this.fetch)?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){var a;let{url:s,headers:o}=this.cloneRequestState();if(o.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==t&&s.searchParams.set("on_conflict",t),n&&o.append("Prefer",`count=${n}`),i||o.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);s.searchParams.set("columns",e.join(","))}}return new lg({method:"POST",url:s,headers:o,schema:this.schema,body:e,fetch:null!=(a=this.fetch)?a:fetch})}update(e,{count:t}={}){var r;let{url:n,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new lg({method:"PATCH",url:n,headers:i,schema:this.schema,body:e,fetch:null!=(r=this.fetch)?r:fetch})}delete({count:e}={}){var t;let{url:r,headers:n}=this.cloneRequestState();return e&&n.append("Prefer",`count=${e}`),new lg({method:"DELETE",url:r,headers:n,schema:this.schema,fetch:null!=(t=this.fetch)?t:fetch})}},ly=class e{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=n}from(e){if(!e||"string"!=typeof e||""===e.trim())throw Error("Invalid relation name: relation must be a non-empty string.");return new lm(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:n=!1,count:i}={}){var a;let s,o,l=new URL(`${this.url}/rpc/${e}`),c=e=>null!==e&&"object"==typeof e&&(!Array.isArray(e)||e.some(c)),u=r&&Object.values(t).some(c);u?(s="POST",o=t):r||n?(s=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(s="POST",o=t);let d=new Headers(this.headers);return u?d.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&d.set("Prefer",`count=${i}`),new lg({method:s,url:l,headers:d,schema:this.schemaName,body:o,fetch:null!=(a=this.fetch)?a:fetch})}};let lb=class{static detectEnvironment(){var t;if("u">typeof WebSocket)return{type:"native",constructor:WebSocket};if("u">typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if(void 0!==e.g.WebSocket)return{type:"native",constructor:e.g.WebSocket};if("u">typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("u">typeof globalThis&&globalThis.EdgeRuntime||"u">typeof navigator&&(null==(t=navigator.userAgent)?void 0:t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};let r=globalThis.process;if(r){let e=r.versions;if(e&&e.node){let t=parseInt(e.node.replace(/^v/,"").split(".")[0]);return t>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{let e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},lw="2.0.0";(W=Y||(Y={}))[W.connecting=0]="connecting",W[W.open=1]="open",W[W.closing=2]="closing",W[W.closed=3]="closed",(B=Q||(Q={})).closed="closed",B.errored="errored",B.joined="joined",B.joining="joining",B.leaving="leaving",(K=Z||(Z={})).close="phx_close",K.error="phx_error",K.join="phx_join",K.reply="phx_reply",K.leave="phx_leave",K.access_token="access_token",(ee||(ee={})).websocket="websocket",(q=et||(et={})).Connecting="connecting",q.Open="open",q.Closing="closing",q.Closed="closed";class l_{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!=e?e:[]}encode(e,t){return e.event!==this.BROADCAST_EVENT||e.payload instanceof ArrayBuffer||"string"!=typeof e.payload.event?t(JSON.stringify([e.join_ref,e.ref,e.topic,e.event,e.payload])):t(this._binaryEncodeUserBroadcastPush(e))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null==(t=e.payload)?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;let n=null!=(r=null==(t=e.payload)?void 0:t.payload)?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(e){var t,r;let n=null!=(r=null==(t=e.payload)?void 0:t.payload)?r:{},i=new TextEncoder().encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,i)}_encodeUserBroadcastPush(e,t,r){let n=e.topic,i=null!=(p=e.ref)?p:"",a=null!=(f=e.join_ref)?f:"",s=e.payload.event,o=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},l=0===Object.keys(o).length?"":JSON.stringify(o);if(a.length>255)throw Error(`joinRef length ${a.length} exceeds maximum of 255`);if(i.length>255)throw Error(`ref length ${i.length} exceeds maximum of 255`);if(n.length>255)throw Error(`topic length ${n.length} exceeds maximum of 255`);if(s.length>255)throw Error(`userEvent length ${s.length} exceeds maximum of 255`);if(l.length>255)throw Error(`metadata length ${l.length} exceeds maximum of 255`);let c=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+i.length+n.length+s.length+l.length,u=new ArrayBuffer(this.HEADER_LENGTH+c),d=new DataView(u),h=0;d.setUint8(h++,this.KINDS.userBroadcastPush),d.setUint8(h++,a.length),d.setUint8(h++,i.length),d.setUint8(h++,n.length),d.setUint8(h++,s.length),d.setUint8(h++,l.length),d.setUint8(h++,t),Array.from(a,e=>d.setUint8(h++,e.charCodeAt(0))),Array.from(i,e=>d.setUint8(h++,e.charCodeAt(0))),Array.from(n,e=>d.setUint8(h++,e.charCodeAt(0))),Array.from(s,e=>d.setUint8(h++,e.charCodeAt(0))),Array.from(l,e=>d.setUint8(h++,e.charCodeAt(0)));var p,f,g=new Uint8Array(u.byteLength+r.byteLength);return g.set(new Uint8Array(u),0),g.set(new Uint8Array(r),u.byteLength),g.buffer}decode(e,t){if(this._isArrayBuffer(e))return t(this._binaryDecode(e));if("string"==typeof e){let[r,n,i,a,s]=JSON.parse(e);return t({join_ref:r,ref:n,topic:i,event:a,payload:s})}return t({})}_binaryDecode(e){let t=new DataView(e),r=t.getUint8(0),n=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,n)}_decodeUserBroadcast(e,t,r){let n=t.getUint8(1),i=t.getUint8(2),a=t.getUint8(3),s=t.getUint8(4),o=this.HEADER_LENGTH+4,l=r.decode(e.slice(o,o+n));o+=n;let c=r.decode(e.slice(o,o+i));o+=i;let u=r.decode(e.slice(o,o+a));o+=a;let d=e.slice(o,e.byteLength),h=s===this.JSON_ENCODING?JSON.parse(r.decode(d)):d,p={type:this.BROADCAST_EVENT,event:c,payload:h};return a>0&&(p.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||(null==(t=null==e?void 0:e.constructor)?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return e&&"object"==typeof e?Object.fromEntries(Object.entries(e).filter(([e])=>t.includes(e))):{}}}class lv{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(V=er||(er={})).abstime="abstime",V.bool="bool",V.date="date",V.daterange="daterange",V.float4="float4",V.float8="float8",V.int2="int2",V.int4="int4",V.int4range="int4range",V.int8="int8",V.int8range="int8range",V.json="json",V.jsonb="jsonb",V.money="money",V.numeric="numeric",V.oid="oid",V.reltime="reltime",V.text="text",V.time="time",V.timestamp="timestamp",V.timestamptz="timestamptz",V.timetz="timetz",V.tsrange="tsrange",V.tstzrange="tstzrange";let lx=(e,t,r={})=>{var n;let i=null!=(n=r.skipTypes)?n:[];return t?Object.keys(t).reduce((r,n)=>(r[n]=lE(n,e,t,i),r),{}):{}},lE=(e,t,r,n)=>{let i=t.find(t=>t.name===e),a=null==i?void 0:i.type,s=r[e];return a&&!n.includes(a)?lS(a,s):lk(s)},lS=(e,t)=>{if("_"===e.charAt(0))return lO(t,e.slice(1,e.length));switch(e){case er.bool:return lT(t);case er.float4:case er.float8:case er.int2:case er.int4:case er.int8:case er.numeric:case er.oid:return lA(t);case er.json:case er.jsonb:return lR(t);case er.timestamp:return lC(t);case er.abstime:case er.date:case er.daterange:case er.int4range:case er.int8range:case er.money:case er.reltime:case er.text:case er.time:case er.timestamptz:case er.timetz:case er.tsrange:case er.tstzrange:default:return lk(t)}},lk=e=>e,lT=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},lA=e=>{if("string"==typeof e){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},lR=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){}return e},lO=(e,t)=>{if("string"!=typeof e)return e;let r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n,i=e.slice(1,r);try{n=JSON.parse("["+i+"]")}catch(e){n=i?i.split(","):[]}return n.map(e=>lS(t,e))}return e},lC=e=>"string"==typeof e?e.replace(" ","T"):e,lP=e=>{let t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class lI{constructor(e,t,r={},n=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null==(r=this.receivedResp)?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}(J=en||(en={})).SYNC="sync",J.JOIN="join",J.LEAVE="leave";class lj{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{let{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lj.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=lj.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],n()}),this.channel._on(r.diff,{},e=>{let{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=lj.syncDiff(this.state,e,t,r),n())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){let i=this.cloneDeep(e),a=this.transformState(t),s={},o={};return this.map(i,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{let r=i[e];if(r){let n=t.map(e=>e.presence_ref),i=r.map(e=>e.presence_ref),a=t.filter(e=>0>i.indexOf(e.presence_ref)),l=r.filter(e=>0>n.indexOf(e.presence_ref));a.length>0&&(s[e]=a),l.length>0&&(o[e]=l)}else s[e]=t}),this.syncDiff(i,{joins:s,leaves:o},r,n)}static syncDiff(e,t,r,n){let{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(t,n)=>{var i;let a=null!=(i=e[t])?i:[];if(e[t]=this.cloneDeep(n),a.length>0){let r=e[t].map(e=>e.presence_ref),n=a.filter(e=>0>r.indexOf(e.presence_ref));e[t].unshift(...n)}r(t,a,n)}),this.map(a,(t,r)=>{let i=e[t];if(!i)return;let a=r.map(e=>e.presence_ref);i=i.filter(e=>0>a.indexOf(e.presence_ref)),e[t]=i,n(t,i,r),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return Object.getOwnPropertyNames(e=this.cloneDeep(e)).reduce((t,r)=>{let n=e[r];return"metas"in n?t[r]=n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):t[r]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(z=ei||(ei={})).ALL="*",z.INSERT="INSERT",z.UPDATE="UPDATE",z.DELETE="DELETE",(F=ea||(ea={})).BROADCAST="broadcast",F.PRESENCE="presence",F.POSTGRES_CHANGES="postgres_changes",F.SYSTEM="system",(G=es||(es={})).SUBSCRIBED="SUBSCRIBED",G.TIMED_OUT="TIMED_OUT",G.CLOSED="CLOSED",G.CHANNEL_ERROR="CHANNEL_ERROR";class l${constructor(e,t={config:{}},r){var n,i;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Q.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new lI(this,Z.join,this.params,this.timeout),this.rejoinTimer=new lv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Q.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Q.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Q.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Q.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Q.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Z.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new lj(this),this.broadcastEndpointURL=lP(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null==(i=null==(n=this.params.config)?void 0:n.broadcast)?void 0:i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Q.closed){let{config:{broadcast:a,presence:s,private:o}}=this.params,l=null!=(n=null==(r=this.bindings.postgres_changes)?void 0:r.map(e=>e.filter))?n:[],c=!!this.bindings[ea.PRESENCE]&&this.bindings[ea.PRESENCE].length>0||(null==(i=this.params.config.presence)?void 0:i.enabled)===!0,u={},d={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(es.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(es.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket._isManualToken()||this.socket.setAuth(),void 0===t){null==e||e(es.SUBSCRIBED);return}{let n=this.bindings.postgres_changes,i=null!=(r=null==n?void 0:n.length)?r:0,a=[];for(let r=0;r<i;r++){let i=n[r],{filter:{event:s,schema:o,table:l,filter:c}}=i,u=t&&t[r];if(u&&u.event===s&&l$.isFilterValueEqual(u.schema,o)&&l$.isFilterValueEqual(u.table,l)&&l$.isFilterValueEqual(u.filter,c))a.push(Object.assign(Object.assign({},i),{id:u.id}));else{this.unsubscribe(),this.state=Q.errored,null==e||e(es.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=a,e&&e(es.SUBSCRIBED);return}}).receive("error",t=>{this.state=Q.errored,null==e||e(es.CHANNEL_ERROR,Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(es.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Q.joined&&e===ea.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var n;if(null==t)return Promise.reject("Payload is required for httpSend()");let i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);let a={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!=(n=r.timeout)?n:this.timeout);if(202===s.status)return{success:!0};let o=s.statusText;try{let e=await s.json();o=e.error||e.message||o}catch(e){}return Promise.reject(Error(o))}async send(e,t={}){var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var n,i,a;let s=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null==(a=null==(i=null==(n=this.params)?void 0:n.config)?void 0:i.broadcast)?void 0:a.ack)||r("ok"),s.receive("ok",()=>r("ok")),s.receive("error",()=>r("error")),s.receive("timeout",()=>r("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:i,payload:a}=e,s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);let o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{let e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!=(r=t.timeout)?r:this.timeout);return await (null==(n=e.body)?void 0:n.cancel()),e.ok?"ok":"error"}catch(e){if("AbortError"===e.name)return"timed out";return"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Q.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Z.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{(r=new lI(this,Z.leave,{},e)).receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Q.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){let n=new AbortController,i=setTimeout(()=>n.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new lI(this,e,t,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,i;let a=e.toLocaleLowerCase(),{close:s,error:o,leave:l,join:c}=Z;if(r&&[s,o,l,c].indexOf(a)>=0&&r!==this._joinRef())return;let u=this._onMessage(a,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null==(n=this.bindings.postgres_changes)||n.filter(e=>{var t,r,n;return(null==(t=e.filter)?void 0:t.event)==="*"||(null==(n=null==(r=e.filter)?void 0:r.event)?void 0:n.toLocaleLowerCase())===a}).map(e=>e.callback(u,r)):null==(i=this.bindings[a])||i.filter(e=>{var r,n,i,s,o,l,c,u;if(!["broadcast","presence","postgres_changes"].includes(a))return e.type.toLocaleLowerCase()===a;if("id"in e){let a=e.id,l=null==(r=e.filter)?void 0:r.event;return a&&(null==(n=t.ids)?void 0:n.includes(a))&&("*"===l||(null==l?void 0:l.toLocaleLowerCase())===(null==(i=t.data)?void 0:i.type.toLocaleLowerCase()))&&(!(null==(s=e.filter)?void 0:s.table)||e.filter.table===(null==(o=t.data)?void 0:o.table))}{let r=null==(c=null==(l=null==e?void 0:e.filter)?void 0:l.event)?void 0:c.toLocaleLowerCase();return"*"===r||r===(null==(u=null==t?void 0:t.event)?void 0:u.toLocaleLowerCase())}}).map(e=>{if("object"==typeof u&&"ids"in u){let e=u.data,{schema:t,table:r,commit_timestamp:n,type:i,errors:a}=e;u=Object.assign(Object.assign({},{schema:t,table:r,commit_timestamp:n,eventType:i,new:{},old:{},errors:a}),this._getPayloadRecords(e))}e.callback(u,r)})}_isClosed(){return this.state===Q.closed}_isJoined(){return this.state===Q.joined}_isJoining(){return this.state===Q.joining}_isLeaving(){return this.state===Q.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var n;return!((null==(n=e.type)?void 0:n.toLocaleLowerCase())===r&&l$.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}static isFilterValueEqual(e,t){return(null!=e?e:void 0)===(null!=t?t:void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Z.close,{},e)}_onError(e){this._on(Z.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Q.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(t.new=lx(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(t.old=lx(e.columns,e.old_record)),t}}let lN=()=>{},lU=[1e3,2e3,5e3,1e4],lD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class lL{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=lN,this.ref=0,this.reconnectTimer=null,this.vsn=lw,this.logger=lN,this.conn=null,this.sendBuffer=[],this.serializer=new l_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),!(null==(r=null==t?void 0:t.params)?void 0:r.apikey))throw Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${ee.websocket}`,this.httpEndpoint=lP(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=lb.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let e=t.message;if(e.includes("Node.js"))throw Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`);throw Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(e?this.conn.close(e,null!=t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Y.connecting:return et.Connecting;case Y.open:return et.Open;case Y.closing:return et.Closing;default:return et.Closed}}isConnected(){return this.connectionState()===et.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){let r=`realtime:${e}`,n=this.getChannels().find(e=>e.topic===r);if(n)return n;{let r=new l$(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){let{topic:t,event:r,payload:n,ref:i}=e,a=()=>{this.encode(e,e=>{var t;null==(t=this.conn)||t.send(e)})};this.log("push",`${t} ${r} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,null==(e=this.conn)||e.close(1e3,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||null==(e=this.reconnectTimer)||e.scheduleTimeout()},100);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event&&e.ref&&e.ref===this.pendingHeartbeatRef){let t=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error",t)}catch(e){this.log("error","error in heartbeat callback",e)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}let{topic:t,event:r,payload:n,ref:i}=e,a=i?`(${i})`:"",s=n.status||"";this.log("receive",`${s} ${t} ${r} ${a}`.trim(),n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,n,i)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null==(t=this.reconnectTimer)||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Y.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Y.open||this.conn.readyState===Y.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this._terminateWorker()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null==(t=this.reconnectTimer)||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Z.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;let r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${r}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{let e=new Blob([lD],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,r=!1;if(e)t=e,r=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(e){this.log("error","Error fetching access token from callback",e),t=this.accessTokenValue}else t=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{let r={access_token:t,version:"realtime-js/2.91.1"};t&&e.updateJoinPayload(r),e.joinedOnce&&e._isJoined()&&e._push(Z.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(t){this.log("error",`error in ${e} callback`,t)}})}catch(t){this.log("error",`error triggering ${e} callbacks`,t)}}_setupReconnectionTimer(){this.reconnectTimer=new lv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},10)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,n,i,a,s,o,l,c,u,d,h;switch(this.transport=null!=(t=null==e?void 0:e.transport)?t:null,this.timeout=null!=(r=null==e?void 0:e.timeout)?r:1e4,this.heartbeatIntervalMs=null!=(n=null==e?void 0:e.heartbeatIntervalMs)?n:25e3,this.worker=null!=(i=null==e?void 0:e.worker)&&i,this.accessToken=null!=(a=null==e?void 0:e.accessToken)?a:null,this.heartbeatCallback=null!=(s=null==e?void 0:e.heartbeatCallback)?s:lN,this.vsn=null!=(o=null==e?void 0:e.vsn)?o:lw,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!=(l=null==e?void 0:e.reconnectAfterMs)?l:e=>lU[e-1]||1e4,this.vsn){case"1.0.0":this.encode=null!=(c=null==e?void 0:e.encode)?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!=(u=null==e?void 0:e.decode)?u:(e,t)=>t(JSON.parse(e));break;case lw:this.encode=null!=(d=null==e?void 0:e.encode)?d:this.serializer.encode.bind(this.serializer),this.decode=null!=(h=null==e?void 0:e.decode)?h:this.serializer.decode.bind(this.serializer);break;default:throw Error(`Unsupported serializer version: ${this.vsn}`)}this.worker&&(this.workerUrl=null==e?void 0:e.workerUrl)}}var lM=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};async function lH(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:`Bearer ${e.token}`}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}function lW(e){return e.join("\x1f")}var lB=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){let t=e?{parent:lW(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){let r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${lW(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${lW(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${lW(e.namespace)}`}),!0}catch(e){if(e instanceof lM&&404===e.status)return!1;throw e}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(e){if(e instanceof lM&&409===e.status)return;throw e}}};function lK(e){return e.join("\x1f")}var lq=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${lK(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){let r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${lK(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){let r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${lK(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${lK(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${lK(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${lK(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(e){if(e instanceof lM&&404===e.status)return!1;throw e}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof lM&&409===r.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},lV=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=function(e){let t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:a,headers:s}){let o=function(e,t,r){let n=new URL(t,e);if(r)for(let[e,t]of Object.entries(r))void 0!==t&&n.searchParams.set(e,t);return n.toString()}(e.baseUrl,n,i),l=await lH(e.auth),c=await t(o,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...l,...s},body:a?JSON.stringify(a):void 0}),u=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!c.ok){let e=d?h:void 0,t=e?.error;throw new lM(t?.message??`Request failed with status ${c.status}`,{status:c.status,icebergType:t?.type,icebergCode:t?.code,details:e})}return{status:c.status,headers:c.headers,data:h}}}}({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new lB(this.client,t),this.tableOps=new lq(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},lJ=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function lz(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}var lF=class extends lJ{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},lG=class extends lJ{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};let lX=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),lY=e=>{if(Array.isArray(e))return e.map(e=>lY(e));if("function"==typeof e||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([e,r])=>{t[e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""))]=lY(r)}),t};function lQ(e){return(lQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lZ(Object(r),!0).forEach(function(t){!function(e,t,r){var n;(n=function(e,t){if("object"!=lQ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lQ(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==lQ(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lZ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let l1=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null==(t=e.error)?void 0:t.message)||JSON.stringify(e)},l2=async(e,t,r)=>{e instanceof await Response&&!(null==r?void 0:r.noResolveJson)?e.json().then(r=>{let n=e.status||500,i=(null==r?void 0:r.statusCode)||n+"";t(new lF(l1(r),n,i))}).catch(e=>{t(new lG(l1(e),e))}):t(new lG(l1(e),e))};async function l5(e,t,r,n,i,a){return new Promise((s,o)=>{let l;e(r,(l={method:t,headers:(null==n?void 0:n.headers)||{}},"GET"===t||!a?l:((e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(a)?(l.headers=l0({"Content-Type":"application/json"},null==n?void 0:n.headers),l.body=JSON.stringify(a)):l.body=a,(null==n?void 0:n.duplex)&&(l.duplex=n.duplex),l0(l0({},l),i)))).then(e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()}).then(e=>s(e)).catch(e=>l2(e,o,n))})}async function l6(e,t,r,n){return l5(e,"GET",t,r,n)}async function l3(e,t,r,n,i){return l5(e,"POST",t,n,i,r)}async function l4(e,t,r,n,i){return l5(e,"PUT",t,n,i,r)}async function l8(e,t,r,n){return l5(e,"HEAD",t,l0(l0({},r),{},{noResolveJson:!0}),n)}async function l9(e,t,r,n,i){return l5(e,"DELETE",t,n,i,r)}var l7=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){try{return{data:(await this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}};s=Symbol.toStringTag;var ce=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[s]="BlobDownloadBuilder",this.promise=null}asStream(){return new l7(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){try{return{data:await (await this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}};let ct={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cr={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var cn=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=lX(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){try{let i,a=l0(l0({},cr),n),s=l0(l0({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)}),o=a.metadata;"u">typeof Blob&&r instanceof Blob?((i=new FormData).append("cacheControl",a.cacheControl),o&&i.append("metadata",this.encodeMetadata(o)),i.append("",r)):"u">typeof FormData&&r instanceof FormData?((i=r).has("cacheControl")||i.append("cacheControl",a.cacheControl),o&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(o))):(i=r,s["cache-control"]=`max-age=${a.cacheControl}`,s["content-type"]=a.contentType,o&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(o))),("u">typeof ReadableStream&&i instanceof ReadableStream||i&&"object"==typeof i&&"pipe"in i&&"function"==typeof i.pipe)&&!a.duplex&&(a.duplex="half")),(null==n?void 0:n.headers)&&(s=l0(l0({},s),n.headers));let l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=await ("PUT"==e?l4:l3)(this.fetch,`${this.url}/object/${c}`,i,l0({headers:s},(null==a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){let i=this._removeEmptyFolders(e),a=this._getFinalPath(i),s=new URL(this.url+`/object/upload/sign/${a}`);s.searchParams.set("token",t);try{let e,t=l0({upsert:cr.upsert},n),a=l0(l0({},this.headers),{"x-upsert":String(t.upsert)});return"u">typeof Blob&&r instanceof Blob?((e=new FormData).append("cacheControl",t.cacheControl),e.append("",r)):"u">typeof FormData&&r instanceof FormData?(e=r).append("cacheControl",t.cacheControl):(e=r,a["cache-control"]=`max-age=${t.cacheControl}`,a["content-type"]=t.contentType),{data:{path:i,fullPath:(await l4(this.fetch,s.toString(),e,{headers:a})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}async createSignedUploadUrl(e,t){try{let r=this._getFinalPath(e),n=l0({},this.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");let i=await l3(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),a=new URL(this.url+i.url),s=a.searchParams.get("token");if(!s)throw new lJ("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:s},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){try{return{data:await l3(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}async copy(e,t,r){try{return{data:{path:(await l3(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}async createSignedUrl(e,t,r){try{let n=this._getFinalPath(e),i=await l3(this.fetch,`${this.url}/object/sign/${n}`,l0({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers}),a=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}async createSignedUrls(e,t,r){var n=this;try{let i=await l3(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),a=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:i.map(e=>l0(l0({},e),{},{signedUrl:e.signedURL?encodeURI(`${n.url}${e.signedURL}${a}`):null})),error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}download(e,t){let r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=n?`?${n}`:"",a=this._getFinalPath(e);return new ce(()=>l6(this.fetch,`${this.url}/${r}/${a}${i}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}async info(e){let t=this._getFinalPath(e);try{return{data:lY(await l6(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers})),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}async exists(e){let t=this._getFinalPath(e);try{return await l8(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e)&&e instanceof lG){let t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}}getPublicUrl(e,t){let r=this._getFinalPath(e),n=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&n.push(i);let a=void 0!==(null==t?void 0:t.transform)?"render/image":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==s&&n.push(s);let o=n.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${o}`)}}}async remove(e){try{return{data:await l9(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}async list(e,t,r){try{let n=l0(l0(l0({},ct),t),{},{prefix:e||""});return{data:await l3(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}async listV2(e,t){try{let r=l0({},e);return{data:await l3(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return void 0!==e9.Buffer?e9.Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};let ci="2.91.1",ca={"X-Client-Info":`storage-js/${ci}`};var cs=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const i=new URL(e);(null==n?void 0:n.useNewHostname)&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=l0(l0({},ca),t),this.fetch=lX(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){try{let t=this.listBucketOptionsToQueryString(e);return{data:await l6(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}async getBucket(e){try{return{data:await l6(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}async createBucket(e,t={public:!1}){try{return{data:await l3(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}async updateBucket(e,t){try{return{data:await l4(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}async emptyBucket(e){try{return{data:await l3(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}async deleteBucket(e){try{return{data:await l9(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},co=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=l0(l0({},ca),t),this.fetch=lX(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){try{return{data:await l3(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}async listBuckets(e){try{let t=new URLSearchParams;(null==e?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(null==e?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString(),n=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:await l6(this.fetch,n,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}async deleteBucket(e){try{return{data:await l9(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lz(e))return{data:null,error:e};throw e}}from(e){var t=this;if(!(!(!e||"string"!=typeof e||0===e.length||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\"))&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e)))throw new lJ("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let r=new lV({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(e,t){let r=e[t];return"function"!=typeof r?r:async(...t)=>{try{return{data:await r.apply(e,t),error:null}}catch(e){if(n)throw e;return{data:null,error:e}}}}})}};let cl={"X-Client-Info":`storage-js/${ci}`,"Content-Type":"application/json"};var cc=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function cu(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}var cd=class extends cc{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ch=class extends cc{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};let cp=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),cf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),cg=async(e,t,r)=>{if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==r?void 0:r.noResolveJson)){let r=e.status||500;"function"==typeof e.json?e.json().then(e=>{let n=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||r+"";t(new cd(cf(e),r,n))}).catch(()=>{t(new cd(e.statusText||`HTTP ${r} error`,r,r+""))}):t(new cd(e.statusText||`HTTP ${r} error`,r,r+""))}else t(new ch(cf(e),e))};async function cm(e,t,r,n,i,a){return new Promise((s,o)=>{let l;e(r,(l={method:t,headers:(null==n?void 0:n.headers)||{}},"GET"===t||!a?l:((e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(a)?(l.headers=l0({"Content-Type":"application/json"},null==n?void 0:n.headers),l.body=JSON.stringify(a)):l.body=a,l0(l0({},l),i)))).then(e=>{if(!e.ok)throw e;if(null==n?void 0:n.noResolveJson)return e;let t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>s(e)).catch(e=>cg(e,o,n))})}async function cy(e,t,r,n,i){return cm(e,"POST",t,n,i,r)}var cb=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=l0(l0({},cl),t),this.fetch=cp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){try{return{data:await cy(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(cu(e))return{data:null,error:e};throw e}}async getIndex(e,t){try{return{data:await cy(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(cu(e))return{data:null,error:e};throw e}}async listIndexes(e){try{return{data:await cy(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(cu(e))return{data:null,error:e};throw e}}async deleteIndex(e,t){try{return{data:await cy(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(cu(e))return{data:null,error:e};throw e}}},cw=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=l0(l0({},cl),t),this.fetch=cp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){try{if(e.vectors.length<1||e.vectors.length>500)throw Error("Vector batch size must be between 1 and 500 items");return{data:await cy(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(cu(e))return{data:null,error:e};throw e}}async getVectors(e){try{return{data:await cy(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(cu(e))return{data:null,error:e};throw e}}async listVectors(e){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await cy(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(cu(e))return{data:null,error:e};throw e}}async queryVectors(e){try{return{data:await cy(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(cu(e))return{data:null,error:e};throw e}}async deleteVectors(e){try{if(e.keys.length<1||e.keys.length>500)throw Error("Keys batch size must be between 1 and 500 items");return{data:await cy(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(cu(e))return{data:null,error:e};throw e}}},c_=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=l0(l0({},cl),t),this.fetch=cp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){try{return{data:await cy(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(cu(e))return{data:null,error:e};throw e}}async getBucket(e){try{return{data:await cy(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(cu(e))return{data:null,error:e};throw e}}async listBuckets(e={}){try{return{data:await cy(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(cu(e))return{data:null,error:e};throw e}}async deleteBucket(e){try{return{data:await cy(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(cu(e))return{data:null,error:e};throw e}}},cv=class extends c_{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new cx(this.url,this.headers,e,this.fetch)}async createBucket(e){return super.createBucket.call(this,e)}async getBucket(e){return super.getBucket.call(this,e)}async listBuckets(e={}){return super.listBuckets.call(this,e)}async deleteBucket(e){return super.deleteBucket.call(this,e)}},cx=class extends cb{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){return super.createIndex.call(this,l0(l0({},e),{},{vectorBucketName:this.vectorBucketName}))}async listIndexes(e={}){return super.listIndexes.call(this,l0(l0({},e),{},{vectorBucketName:this.vectorBucketName}))}async getIndex(e){return super.getIndex.call(this,this.vectorBucketName,e)}async deleteIndex(e){return super.deleteIndex.call(this,this.vectorBucketName,e)}index(e){return new cE(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},cE=class extends cw{constructor(e,t,r,n,i){super(e,t,i),this.vectorBucketName=r,this.indexName=n}async putVectors(e){return super.putVectors.call(this,l0(l0({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async getVectors(e){return super.getVectors.call(this,l0(l0({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async listVectors(e={}){return super.listVectors.call(this,l0(l0({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async queryVectors(e){return super.queryVectors.call(this,l0(l0({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async deleteVectors(e){return super.deleteVectors.call(this,l0(l0({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}},cS=class extends cs{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new cn(this.url,this.headers,e,this.fetch)}get vectors(){return new cv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new co(this.url+"/iceberg",this.headers,this.fetch)}};let ck="2.91.1",cT={"X-Client-Info":`gotrue-js/${ck}`},cA="X-Supabase-Api-Version",cR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class cC extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function cP(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class cI extends cC{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class cj extends cC{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class c$ extends cC{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class cN extends c${constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class cU extends c${constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cD extends c${constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class cL extends c${constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cM extends c${constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class cH extends c${constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function cW(e){return cP(e)&&"AuthRetryableFetchError"===e.name}class cB extends c${constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class cK extends c${constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}let cq="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),cV=" 	\n\r=".split(""),cJ=(()=>{let e=Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<cV.length;t+=1)e[cV[t].charCodeAt(0)]=-2;for(let t=0;t<cq.length;t+=1)e[cq[t].charCodeAt(0)]=t;return e})();function cz(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;)r(cq[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6;else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;)r(cq[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6}function cF(e,t,r){let n=cJ[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else if(-2===n)return;else throw Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}function cG(e){let t=[],r=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return r(e);for(let r=1;r<6;r+=1)if((e>>7-r&1)==0){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else if(4===t.utf8seq)t.codepoint=7&e;else throw Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,n,r)};for(let t=0;t<e.length;t+=1)cF(e.charCodeAt(t),i,a);return t.join("")}function cX(e){let t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let t=0;t<e.length;t+=1)cF(e.charCodeAt(t),r,n);return new Uint8Array(t)}function cY(e){let t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach(e=>cz(e,r,n)),cz(null,r,n),t.join("")}let cQ=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),cZ=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},c0=async(e,t)=>{let r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(e){return r}},c1=async(e,t)=>{await e.removeItem(t)};class c2{constructor(){this.promise=new c2.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function c5(e){let t=e.split(".");if(3!==t.length)throw new cK("Invalid JWT structure");for(let e=0;e<t.length;e++)if(!cO.test(t[e]))throw new cK("JWT not in base64url format");return{header:JSON.parse(cG(t[0])),payload:JSON.parse(cG(t[1])),signature:cX(t[2]),raw:{header:t[0],payload:t[1]}}}async function c6(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function c3(e){return("0"+e.toString(16)).substr(-2)}async function c4(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>String.fromCharCode(e)).join("")}async function c8(e){return"u">typeof crypto&&void 0!==crypto.subtle&&"u">typeof TextEncoder?btoa(await c4(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e)}async function c9(e,t,r=!1){let n=function(){let e=new Uint32Array(56);if("u"<typeof crypto){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length,r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,c3).join("")}(),i=n;r&&(i+="/PASSWORD_RECOVERY"),await cZ(e,`${t}-code-verifier`,i);let a=await c8(n),s=n===a?"plain":"s256";return[a,s]}c2.promiseConstructor=Promise;let c7=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,ue=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ut(e){if(!ue.test(e))throw Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ur(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){let e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function un(e){return JSON.parse(JSON.stringify(e))}let ui=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ua=[502,503,504];async function us(e){var t;let r,n;if(!("object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json))throw new cH(ui(e),0);if(ua.includes(e.status))throw new cH(ui(e),e.status);try{r=await e.json()}catch(e){throw new cj(ui(e),e)}let i=function(e){let t=e.headers.get(cA);if(!t||!t.match(c7))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(e){return null}}(e);if(i&&i.getTime()>=cR["2024-01-01"].timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?n=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(n=r.error_code),n){if("weak_password"===n)throw new cB(ui(r),e.status,(null==(t=r.weak_password)?void 0:t.reasons)||[]);else if("session_not_found"===n)throw new cN}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new cB(ui(r),e.status,r.weak_password.reasons);throw new cI(ui(r),e.status||500,n)}async function uo(e,t,r,n){var i;let a=Object.assign({},null==n?void 0:n.headers);a[cA]||(a[cA]=cR["2024-01-01"].name),(null==n?void 0:n.jwt)&&(a.Authorization=`Bearer ${n.jwt}`);let s=null!=(i=null==n?void 0:n.query)?i:{};(null==n?void 0:n.redirectTo)&&(s.redirect_to=n.redirectTo);let o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await ul(e,t,r+o,{headers:a,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function ul(e,t,r,n,i,a){let s,o,l=(o={method:t,headers:(null==n?void 0:n.headers)||{}},"GET"===t?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==n?void 0:n.headers),o.body=JSON.stringify(a),Object.assign(Object.assign({},o),i)));try{s=await e(r,Object.assign({},l))}catch(e){throw console.error(e),new cH(ui(e),0)}if(s.ok||await us(s),null==n?void 0:n.noResolveJson)return s;try{return await s.json()}catch(e){await us(e)}}function uc(e){var t,r,n;let i=null;(n=e).access_token&&n.refresh_token&&n.expires_in&&(i=Object.assign({},e),e.expires_at||(i.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:i,user:null!=(t=e.user)?t:e},error:null}}function uu(e){let t=uc(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function ud(e){var t;return{data:{user:null!=(t=e.user)?t:e},error:null}}function uh(e){return{data:e,error:null}}function up(e){let{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=e;return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},user:Object.assign({},lc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function uf(e){return e}let ug=["global","local","others"];class um{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=cQ(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=ug[0]){if(0>ug.indexOf(t))throw Error(`@supabase/auth-js: Parameter scope must be one of ${ug.join(", ")}`);try{return await uo(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(cP(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await uo(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ud})}catch(e){if(cP(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{let{options:t}=e,r=lc(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null==r?void 0:r.newEmail,delete n.newEmail),await uo(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:up,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(cP(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await uo(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ud})}catch(e){if(cP(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,r,n,i,a,s,o;try{let l={nextPage:null,lastPage:0,total:0},c=await uo(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(r=null==(t=null==e?void 0:e.page)?void 0:t.toString())?r:"",per_page:null!=(i=null==(n=null==e?void 0:e.perPage)?void 0:n.toString())?i:""},xform:uf});if(c.error)throw c.error;let u=await c.json(),d=null!=(a=c.headers.get("x-total-count"))?a:0,h=null!=(o=null==(s=c.headers.get("link"))?void 0:s.split(","))?o:[];return h.length>0&&(h.forEach(e=>{let t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(e){if(cP(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){ut(e);try{return await uo(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ud})}catch(e){if(cP(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){ut(e);try{return await uo(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ud})}catch(e){if(cP(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){ut(e);try{return await uo(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ud})}catch(e){if(cP(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){ut(e.userId);try{let{data:t,error:r}=await uo(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(e){if(cP(e))return{data:null,error:e};throw e}}async _deleteFactor(e){ut(e.userId),ut(e.id);try{return{data:await uo(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(cP(e))return{data:null,error:e};throw e}}async _listOAuthClients(e){var t,r,n,i,a,s,o;try{let l={nextPage:null,lastPage:0,total:0},c=await uo(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(r=null==(t=null==e?void 0:e.page)?void 0:t.toString())?r:"",per_page:null!=(i=null==(n=null==e?void 0:e.perPage)?void 0:n.toString())?i:""},xform:uf});if(c.error)throw c.error;let u=await c.json(),d=null!=(a=c.headers.get("x-total-count"))?a:0,h=null!=(o=null==(s=c.headers.get("link"))?void 0:s.split(","))?o:[];return h.length>0&&(h.forEach(e=>{let t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(e){if(cP(e))return{data:{clients:[]},error:e};throw e}}async _createOAuthClient(e){try{return await uo(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(cP(e))return{data:null,error:e};throw e}}async _getOAuthClient(e){try{return await uo(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(cP(e))return{data:null,error:e};throw e}}async _updateOAuthClient(e,t){try{return await uo(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(cP(e))return{data:null,error:e};throw e}}async _deleteOAuthClient(e){try{return await uo(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(cP(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(e){try{return await uo(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(cP(e))return{data:null,error:e};throw e}}}function uy(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}globalThis;class ub extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}function uw(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}class u_ extends Error{constructor({message:e,code:t,cause:r,name:n}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!=(i=null!=n?n:r instanceof Error?r.name:void 0)?i:"Unknown Error",this.code=t}}class uv extends u_{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}let ux=new class{createNewAbortSignal(){if(this.controller){let e=Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function uE(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}async function uS(e){try{let t=await navigator.credentials.create(e);if(!t)return{data:null,error:new uv("Empty credential response",t)};if(!(t instanceof PublicKeyCredential))return{data:null,error:new uv("Browser returned unexpected credential type",t)};return{data:t,error:null}}catch(t){return{data:null,error:function({error:e,options:t}){var r,n,i;let{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new u_({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if((null==(r=a.authenticatorSelection)?void 0:r.requireResidentKey)===!0)return new u_({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});else if("conditional"===t.mediation&&(null==(n=a.authenticatorSelection)?void 0:n.userVerification)==="required")return new u_({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});else if((null==(i=a.authenticatorSelection)?void 0:i.userVerification)==="required")return new u_({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else if("InvalidStateError"===e.name)return new u_({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});else if("NotAllowedError"===e.name)return new u_({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});else if("NotSupportedError"===e.name)return new u_(0===a.pubKeyCredParams.filter(e=>"public-key"===e.type).length?{message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}:{message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});else if("SecurityError"===e.name){let t=window.location.hostname;if(!uE(t))return new u_({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(a.rp.id!==t)return new u_({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new u_({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new u_({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e});return new u_({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}({error:t,options:e})}}}async function uk(e){try{let t=await navigator.credentials.get(e);if(!t)return{data:null,error:new uv("Empty credential response",t)};if(!(t instanceof PublicKeyCredential))return{data:null,error:new uv("Browser returned unexpected credential type",t)};return{data:t,error:null}}catch(t){return{data:null,error:function({error:e,options:t}){let{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new u_({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("NotAllowedError"===e.name)return new u_({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});else if("SecurityError"===e.name){let t=window.location.hostname;if(!uE(t))return new u_({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(r.rpId!==t)return new u_({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new u_({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e});return new u_({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}({error:t,options:e})}}}let uT={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},uA={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function uR(...e){let t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),r=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),n={};for(let i of e)if(i)for(let e in i){let a=i[e];if(void 0!==a)if(Array.isArray(a))n[e]=a;else if(r(a))n[e]=a;else if(t(a)){let r=n[e];t(r)?n[e]=uR(r,a):n[e]=uR(a)}else n[e]=a}return n}class uO{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:n},i){try{var a,s,o,l;let{data:c,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:u};let d=null!=n?n:ux.createNewAbortSignal();if("create"===c.webauthn.type){let{user:e}=c.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${r}`),e.displayName||(e.displayName=e.name)}switch(c.webauthn.type){case"create":{let t=(a=c.webauthn.credential_options.publicKey,s=null==i?void 0:i.create,uR(uT,a,s||{})),{data:r,error:n}=await uS({publicKey:t,signal:d});if(r)return{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:r}},error:null};return{data:null,error:n}}case"request":{let t=(o=c.webauthn.credential_options.publicKey,l=null==i?void 0:i.request,uR(uA,o,l||{})),{data:r,error:n}=await uk(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:t,signal:d}));if(r)return{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:r}},error:null};return{data:null,error:n}}}}catch(e){if(cP(e))return{data:null,error:e};return{data:null,error:new cj("Unexpected error in challenge",e)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t,rpOrigins:r,signal:n}={}},i){if(!t)return{data:null,error:new cC("rpId is required for WebAuthn authentication")};try{1;return{data:null,error:new cj("Browser does not support WebAuthn",null)}}catch(e){if(cP(e))return{data:null,error:e};return{data:null,error:new cj("Unexpected error in authenticate",e)}}}async _register({friendlyName:e,webauthn:{rpId:t,rpOrigins:r,signal:n}={}},i){if(!t)return{data:null,error:new cC("rpId is required for WebAuthn registration")};try{1;return{data:null,error:new cj("Browser does not support WebAuthn",null)}}catch(e){if(cP(e))return{data:null,error:e};return{data:null,error:new cj("Unexpected error in register",e)}}}}if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"u">typeof self&&(self.globalThis=self)}let uC={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function uP(e,t,r){return await r()}let uI={};class uj{get jwks(){var e,t;return null!=(t=null==(e=uI[this.storageKey])?void 0:e.jwks)?t:{keys:[]}}set jwks(e){uI[this.storageKey]=Object.assign(Object.assign({},uI[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!=(t=null==(e=uI[this.storageKey])?void 0:e.cachedAt)?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){uI[this.storageKey]=Object.assign(Object.assign({},uI[this.storageKey]),{cachedAt:e})}constructor(e){var t;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const r=Object.assign(Object.assign({},uC),e);this.storageKey=r.storageKey,this.instanceID=null!=(t=uj.nextInstanceID[this.storageKey])?t:0,uj.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.instanceID,this.persistSession=r.persistSession,this.autoRefreshToken=r.autoRefreshToken,this.admin=new um({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=cQ(r.fetch),this.lock=r.lock||uP,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,this.throwOnError=r.throwOnError,this.lockAcquireTimeout=r.lockAcquireTimeout,r.lock?this.lock=r.lock:(this.persistSession,this.lock=uP),this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new uO(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:(this.memoryStorage={},this.storage=uy(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=uy(this.memoryStorage)),this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ck}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){try{return await this._recoverAndRefresh(),{error:null}}catch(e){if(cP(e))return this._returnResult({error:e});return this._returnResult({error:new cj("Unexpected error during initialization",e)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{let{data:i,error:a}=await uo(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!=(r=null==(t=null==e?void 0:e.options)?void 0:t.data)?r:{},gotrue_meta_security:{captcha_token:null==(n=null==e?void 0:e.options)?void 0:n.captchaToken}},xform:uc});if(a||!i)return this._returnResult({data:{user:null,session:null},error:a});let s=i.session,o=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",s)),this._returnResult({data:{user:o,session:s},error:null})}catch(e){if(cP(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signUp(e){var t,r,n;try{let i;if("email"in e){let{email:r,password:n,options:a}=e,s=null,o=null;"pkce"===this.flowType&&([s,o]=await c9(this.storage,this.storageKey)),i=await uo(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==a?void 0:a.emailRedirectTo,body:{email:r,password:n,data:null!=(t=null==a?void 0:a.data)?t:{},gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:s,code_challenge_method:o},xform:uc})}else if("phone"in e){let{phone:t,password:a,options:s}=e;i=await uo(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:a,data:null!=(r=null==s?void 0:s.data)?r:{},channel:null!=(n=null==s?void 0:s.channel)?n:"sms",gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:uc})}else throw new cD("You must provide either an email or phone number and a password");let{data:a,error:s}=i;if(s||!a)return await c1(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:s});let o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(e){if(await c1(this.storage,`${this.storageKey}-code-verifier`),cP(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithPassword(e){try{let t;if("email"in e){let{email:r,password:n,options:i}=e;t=await uo(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:uu})}else if("phone"in e){let{phone:r,password:n,options:i}=e;t=await uo(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:uu})}else throw new cD("You must provide either an email or phone number and a password");let{data:r,error:n}=t;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!r||!r.session||!r.user){let e=new cU;return this._returnResult({data:{user:null,session:null},error:e})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(e){if(cP(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOAuth(e){var t,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null==(t=e.options)?void 0:t.redirectTo,scopes:null==(r=e.options)?void 0:r.scopes,queryParams:null==(n=e.options)?void 0:n.queryParams,skipBrowserRedirect:null==(i=e.options)?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){let{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,n,i,a,s,o,l,c,u,d,h;let p,f;if("message"in e)p=e.message,f=e.signature;else{let{chain:u,wallet:d,statement:g,options:m}=e;if("object"!=typeof d||!(null==m?void 0:m.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");let y=new URL(null!=(t=null==m?void 0:m.url)?t:window.location.href),b=await d.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!b||0===b.length)throw Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let w=uw(b[0]),_=null==(r=null==m?void 0:m.signInWithEthereum)?void 0:r.chainId;_||(_=parseInt(await d.request({method:"eth_chainId"}),16)),p=function(e){var t;let{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:s,notBefore:o,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;if(!Number.isInteger(r))throw Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null==(t=e.statement)?void 0:t.includes("\n"))throw Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);let p=uw(e.address),f=u?`${u}://${n}`:n,g=e.statement?`${e.statement}
`:"",m=`${f} wants you to sign in with your Ethereum account:
${p}

${g}`,y=`URI: ${d}
Version: ${h}
Chain ID: ${r}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),o&&(y+=`
Not Before: ${o.toISOString()}`),l&&(y+=`
Request ID: ${l}`),c){let e="\nResources:";for(let t of c){if(!t||"string"!=typeof t)throw Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`
- ${t}`}y+=e}return`${m}
${y}`}({domain:y.host,address:w,statement:g,uri:y.href,version:"1",chainId:_,nonce:null==(n=null==m?void 0:m.signInWithEthereum)?void 0:n.nonce,issuedAt:null!=(a=null==(i=null==m?void 0:m.signInWithEthereum)?void 0:i.issuedAt)?a:new Date,expirationTime:null==(s=null==m?void 0:m.signInWithEthereum)?void 0:s.expirationTime,notBefore:null==(o=null==m?void 0:m.signInWithEthereum)?void 0:o.notBefore,requestId:null==(l=null==m?void 0:m.signInWithEthereum)?void 0:l.requestId,resources:null==(c=null==m?void 0:m.signInWithEthereum)?void 0:c.resources}),f=await d.request({method:"personal_sign",params:[(h=p,"0x"+Array.from(new TextEncoder().encode(h),e=>e.toString(16).padStart(2,"0")).join("")),w]})}try{let{data:t,error:r}=await uo(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:f},(null==(u=e.options)?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null==(d=e.options)?void 0:d.captchaToken}}:null),xform:uc});if(r)throw r;if(!t||!t.session||!t.user){let e=new cU;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(e){if(cP(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithSolana(e){var t,r,n,i,a,s,o,l,c,u,d,h;let p,f;if("message"in e)p=e.message,f=e.signature;else{let{chain:d,wallet:h,statement:g,options:m}=e;if("object"!=typeof h||!(null==m?void 0:m.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");let y=new URL(null!=(t=null==m?void 0:m.url)?t:window.location.href);if("signIn"in h&&h.signIn){let e,t=await h.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},null==m?void 0:m.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),g?{statement:g}:null));if(Array.isArray(t)&&t[0]&&"object"==typeof t[0])e=t[0];else if(t&&"object"==typeof t&&"signedMessage"in t&&"signature"in t)e=t;else throw Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in e&&"signature"in e&&("string"==typeof e.signedMessage||e.signedMessage instanceof Uint8Array)&&e.signature instanceof Uint8Array)p="string"==typeof e.signedMessage?e.signedMessage:new TextDecoder().decode(e.signedMessage),f=e.signature;else throw Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in h)||"function"!=typeof h.signMessage||!("publicKey"in h)||"object"!=typeof h||!h.publicKey||!("toBase58"in h.publicKey)||"function"!=typeof h.publicKey.toBase58)throw Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${y.host} wants you to sign in with your Solana account:`,h.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!=(n=null==(r=null==m?void 0:m.signInWithSolana)?void 0:r.issuedAt)?n:new Date().toISOString()}`,...(null==(i=null==m?void 0:m.signInWithSolana)?void 0:i.notBefore)?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...(null==(a=null==m?void 0:m.signInWithSolana)?void 0:a.expirationTime)?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...(null==(s=null==m?void 0:m.signInWithSolana)?void 0:s.chainId)?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...(null==(o=null==m?void 0:m.signInWithSolana)?void 0:o.nonce)?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...(null==(l=null==m?void 0:m.signInWithSolana)?void 0:l.requestId)?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...(null==(u=null==(c=null==m?void 0:m.signInWithSolana)?void 0:c.resources)?void 0:u.length)?["Resources",...m.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");let e=await h.signMessage(new TextEncoder().encode(p),"utf8");if(!e||!(e instanceof Uint8Array))throw Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{let{data:t,error:r}=await uo(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:cY(f)},(null==(d=e.options)?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null==(h=e.options)?void 0:h.captchaToken}}:null),xform:uc});if(r)throw r;if(!t||!t.session||!t.user){let e=new cU;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(e){if(cP(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _exchangeCodeForSession(e){let t=await c0(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(null!=t?t:"").split("/");try{if(!r&&"pkce"===this.flowType)throw new cM;let{data:t,error:i}=await uo(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:uc});if(await c1(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!t||!t.session||!t.user){let e=new cU;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!=n?n:null}),error:i})}catch(e){if(await c1(this.storage,`${this.storageKey}-code-verifier`),cP(e))return this._returnResult({data:{user:null,session:null,redirectType:null},error:e});throw e}}async signInWithIdToken(e){try{let{options:t,provider:r,token:n,access_token:i,nonce:a}=e,{data:s,error:o}=await uo(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:uc});if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){let e=new cU;return this._returnResult({data:{user:null,session:null},error:e})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:s,error:o})}catch(e){if(cP(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOtp(e){var t,r,n,i,a;try{if("email"in e){let{email:n,options:i}=e,a=null,s=null;"pkce"===this.flowType&&([a,s]=await c9(this.storage,this.storageKey));let{error:o}=await uo(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!=(t=null==i?void 0:i.data)?t:{},create_user:null==(r=null==i?void 0:i.shouldCreateUser)||r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:a,code_challenge_method:s},redirectTo:null==i?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){let{phone:t,options:r}=e,{data:s,error:o}=await uo(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!=(n=null==r?void 0:r.data)?n:{},create_user:null==(i=null==r?void 0:r.shouldCreateUser)||i,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!=(a=null==r?void 0:r.channel)?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==s?void 0:s.message_id},error:o})}throw new cD("You must provide either an email or phone number.")}catch(e){if(await c1(this.storage,`${this.storageKey}-code-verifier`),cP(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async verifyOtp(e){var t,r;try{let n,i;"options"in e&&(n=null==(t=e.options)?void 0:t.redirectTo,i=null==(r=e.options)?void 0:r.captchaToken);let{data:a,error:s}=await uo(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:uc});if(s)throw s;if(!a)throw Error("An error occurred on token verification.");let o=a.session,l=a.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(e){if(cP(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithSSO(e){var t,r,n,i;try{let a=null,s=null;"pkce"===this.flowType&&([a,s]=await c9(this.storage,this.storageKey));let o=await uo(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!=(r=null==(t=e.options)?void 0:t.redirectTo)?r:void 0}),(null==(n=null==e?void 0:e.options)?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:uh});return null==(i=o.data)||i.url,this._returnResult(o)}catch(e){if(await c1(this.storage,`${this.storageKey}-code-verifier`),cP(e))return this._returnResult({data:null,error:e});throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new cN;let{error:n}=await uo(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if(cP(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{let t=`${this.url}/resend`;if("email"in e){let{email:r,type:n,options:i}=e,{error:a}=await uo(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}if("phone"in e){let{phone:r,type:n,options:i}=e,{data:a,error:s}=await uo(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:s})}throw new cD("You must provide either an email or phone number and a type")}catch(e){if(cP(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){let e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let t=null,r=await c0(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),null!==r&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};let n=!!t.expires_at&&1e3*t.expires_at-Date.now()<9e4;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){let e=await c0(this.userStorage,this.storageKey+"-user");(null==e?void 0:e.user)?t.user=e.user:t.user=ur()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){var e;let r={value:this.suppressGetSessionWarning};t.user=(e=t.user,new Proxy(e,{get:(e,t,n)=>{if("__isInsecureUserWarningProxy"===t)return!0;if("symbol"==typeof t){let r=t.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r||"Symbol(nodejs.util.inspect.custom)"===r)return Reflect.get(e,t,n)}return r.value||"string"!=typeof t||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(e,t,n)}})),r.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}let{data:i,error:a}=await this._callRefreshToken(t.refresh_token);if(a)return this._returnResult({data:{session:null},error:a});return this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;let t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{if(e)return await uo(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ud});return await this._useSession(async e=>{var t,r,n;let{data:i,error:a}=e;if(a)throw a;return(null==(t=i.session)?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await uo(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!=(n=null==(r=i.session)?void 0:r.access_token)?n:void 0,xform:ud}):{data:{user:null},error:new cN}})}catch(e){if(cP(e))return cP(e)&&"AuthSessionMissingError"===e.name&&(await this._removeSession(),await c1(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:e});throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{let{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new cN;let a=n.session,s=null,o=null;"pkce"===this.flowType&&null!=e.email&&([s,o]=await c9(this.storage,this.storageKey));let{data:l,error:c}=await uo(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:o}),jwt:a.access_token,xform:ud});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(e){if(await c1(this.storage,`${this.storageKey}-code-verifier`),cP(e))return this._returnResult({data:{user:null},error:e});throw e}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new cN;let t=Date.now()/1e3,r=t,n=!0,i=null,{payload:a}=c5(e.access_token);if(a.exp&&(n=(r=a.exp)<=t),n){let{data:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!t)return{data:{user:null,session:null},error:null};i=t}else{let{data:n,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(e){if(cP(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){let{data:n,error:i}=t;if(i)throw i;e=null!=(r=n.session)?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new cN;let{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(e){if(cP(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _getSessionFromURL(e,t){try{throw new cL("No browser detected.")}catch(e){if(cP(e))return this._returnResult({data:{session:null,redirectType:null},error:e});throw e}}_isImplicitGrantCallback(e){return"function"==typeof this.detectSessionInUrl?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){let t=await c0(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;let{data:n,error:i}=t;if(i)return this._returnResult({error:i});let a=null==(r=n.session)?void 0:r.access_token;if(a){let{error:t}=await this.admin.signOut(a,e);if(t&&!(cP(t)&&"AuthApiError"===t.name&&(404===t.status||401===t.status||403===t.status)))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await c1(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){let t=Symbol("auth-callback"),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{let{data:{session:n},error:i}=t;if(i)throw i;await (null==(r=this.stateChangeEmitters.get(e))?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(t){await (null==(n=this.stateChangeEmitters.get(e))?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}})}async resetPasswordForEmail(e,t={}){let r=null,n=null;"pkce"===this.flowType&&([r,n]=await c9(this.storage,this.storageKey,!0));try{return await uo(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(await c1(this.storage,`${this.storageKey}-code-verifier`),cP(e))return this._returnResult({data:null,error:e});throw e}}async getUserIdentities(){var e;try{let{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:null!=(e=t.user.identities)?e:[]},error:null})}catch(e){if(cP(e))return this._returnResult({data:null,error:e});throw e}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){try{let{data:t,error:r}=await this._useSession(async t=>{var r,n,i,a,s;let{data:o,error:l}=t;if(l)throw l;let c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null==(r=e.options)?void 0:r.redirectTo,scopes:null==(n=e.options)?void 0:n.scopes,queryParams:null==(i=e.options)?void 0:i.queryParams,skipBrowserRedirect:!0});return await uo(this.fetch,"GET",c,{headers:this.headers,jwt:null!=(s=null==(a=o.session)?void 0:a.access_token)?s:void 0})});if(r)throw r;return this._returnResult({data:{provider:e.provider,url:null==t?void 0:t.url},error:null})}catch(t){if(cP(t))return this._returnResult({data:{provider:e.provider,url:null},error:t});throw t}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{let{error:n,data:{session:i}}=t;if(n)throw n;let{options:a,provider:s,token:o,access_token:l,nonce:c}=e,{data:u,error:d}=await uo(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!=(r=null==i?void 0:i.access_token)?r:void 0,body:{provider:s,id_token:o,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:uc});if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u||!u.session||!u.user)return this._returnResult({data:{user:null,session:null},error:new cU});return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("USER_UPDATED",u.session)),this._returnResult({data:u,error:d})}catch(e){if(await c1(this.storage,`${this.storageKey}-code-verifier`),cP(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;let{data:i,error:a}=t;if(a)throw a;return await uo(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!=(n=null==(r=i.session)?void 0:r.access_token)?n:void 0})})}catch(e){if(cP(e))return this._returnResult({data:null,error:e});throw e}}async _refreshAccessToken(e){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{var r,n;let i=Date.now();return await (r=async r=>(r>0&&await c6(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await uo(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:uc})),n=(e,t)=>{let r=200*Math.pow(2,e);return t&&cW(t)&&Date.now()+r-i<3e4},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{let t=await r(i);if(!n(i,null,t))return void e(t)}catch(e){if(!n(i,e))return void t(e)}})()}))}catch(e){if(this._debug(t,"error",e),cP(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}finally{this._debug(t,"end")}}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){let r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let n=await c0(this.storage,this.storageKey);if(n&&this.userStorage){let t=await c0(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!t&&(t={user:n.user},await cZ(this.userStorage,this.storageKey+"-user",t)),n.user=null!=(e=null==t?void 0:t.user)?e:ur()}else if(n&&!n.user&&!n.user){let e=await c0(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(n.user=e.user,await c1(this.storage,this.storageKey+"-user"),await cZ(this.storage,this.storageKey,n)):n.user=ur()}if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),null!==n&&await this._removeSession();return}let i=(null!=(t=n.expires_at)?t:1/0)*1e3-Date.now()<9e4;if(this._debug(r,`session has${i?"":" not"} expired with margin of 90000s`),i){if(this.autoRefreshToken&&n.refresh_token){let{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),cW(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(n.user&&!0===n.user.__isUserNotAvailableProxy)try{let{data:e,error:t}=await this._getUser(n.access_token);!t&&(null==e?void 0:e.user)?(n.user=e.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(e){console.error("Error getting user data:",e),this._debug(r,"error getting user data, skipping SIGNED_IN notification",e)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(e){this._debug(r,"error",e),console.error(e);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new cN;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new c2;let{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new cN;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);let n={data:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(e){if(this._debug(n,"error",e),cP(e)){let r={data:null,error:e};return cW(e)||await this._removeSession(),null==(t=this.refreshingDeferred)||t.resolve(r),r}throw null==(r=this.refreshingDeferred)||r.reject(e),e}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){let n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});let n=[],i=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(e){n.push(e)}});if(await Promise.all(i),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await c1(this.storage,`${this.storageKey}-code-verifier`);let t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await cZ(this.userStorage,this.storageKey+"-user",{user:t.user});let e=Object.assign({},t);delete e.user;let n=un(e);await cZ(this.storage,this.storageKey,n)}else{let e=un(t);await cZ(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await c1(this.storage,this.storageKey),await c1(this.storage,this.storageKey+"-code-verifier"),await c1(this.storage,this.storageKey+"-user"),this.userStorage&&await c1(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()"),this.visibilityChangedCallback,this.visibilityChangedCallback=null}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"u">typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e);let t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&"object"==typeof t&&"function"==typeof t.unref?t.unref():"u">typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);let t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async t=>{let{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");let n=Math.floor((1e3*r.expires_at-e)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ub)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){return this._debug("#_handleVisibilityChange()"),this.autoRefreshToken&&this.startAutoRefresh(),!1}async _onVisibilityChanged(e){let t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{"visible"!==document.visibilityState?this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"):await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){let n=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){let[e,t]=await c9(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(r.toString())}if(null==r?void 0:r.queryParams){let e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;let{data:n,error:i}=t;return i?this._returnResult({data:null,error:i}):await uo(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null==(r=null==n?void 0:n.session)?void 0:r.access_token})})}catch(e){if(cP(e))return this._returnResult({data:null,error:e});throw e}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;let{data:i,error:a}=t;if(a)return this._returnResult({data:null,error:a});let s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await uo(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:null==(r=null==i?void 0:i.session)?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===o.type&&(null==(n=null==o?void 0:o.totp)?void 0:n.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),this._returnResult({data:o,error:null}))})}catch(e){if(cP(e))return this._returnResult({data:null,error:e});throw e}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var r,n,i;let{data:a,error:s}=t;if(s)return this._returnResult({data:null,error:s});let o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?(n=e.webauthn.credential_response,"toJSON"in n&&"function"==typeof n.toJSON?n.toJSON():{id:n.id,rawId:n.id,response:{attestationObject:cY(new Uint8Array(n.response.attestationObject)),clientDataJSON:cY(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:null!=(i=n.authenticatorAttachment)?i:void 0}):function(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();let r=e.getClientExtensionResults(),n=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:cY(new Uint8Array(n.authenticatorData)),clientDataJSON:cY(new Uint8Array(n.clientDataJSON)),signature:cY(new Uint8Array(n.signature)),userHandle:n.userHandle?cY(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!=(t=e.authenticatorAttachment)?t:void 0}}(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await uo(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:null==(r=null==a?void 0:a.session)?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(e){if(cP(e))return this._returnResult({data:null,error:e});throw e}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var r;let{data:n,error:i}=t;if(i)return this._returnResult({data:null,error:i});let a=await uo(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null==(r=null==n?void 0:n.session)?void 0:r.access_token});if(a.error)return a;let{data:s}=a;if("webauthn"!==s.type)return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:function(e){if(!e)throw Error("Credential creation options are required");if("u">typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);let{challenge:t,user:r,excludeCredentials:n}=e,i=lc(e,["challenge","user","excludeCredentials"]),a=cX(t).buffer,s=Object.assign(Object.assign({},r),{id:cX(r.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:a,user:s});if(n&&n.length>0){o.excludeCredentials=Array(n.length);for(let e=0;e<n.length;e++){let t=n[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:cX(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:function(e){if(!e)throw Error("Credential request options are required");if("u">typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);let{challenge:t,allowCredentials:r}=e,n=lc(e,["challenge","allowCredentials"]),i=cX(t).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){a.allowCredentials=Array(r.length);for(let e=0;e<r.length;e++){let t=r[e];a.allowCredentials[e]=Object.assign(Object.assign({},t),{id:cX(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return a}(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(e){if(cP(e))return this._returnResult({data:null,error:e});throw e}})}async _challengeAndVerify(e){let{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;let{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};let n={all:[],phone:[],totp:[],webauthn:[]};for(let r of null!=(e=null==t?void 0:t.factors)?e:[])n.all.push(r),"verified"===r.status&&n[r.factor_type].push(r);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;let{data:{session:r},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:i}=c5(r.access_token),a=null;i.aal&&(a=i.aal);let s=a;return(null!=(t=null==(e=r.user.factors)?void 0:e.filter(e=>"verified"===e.status))?t:[]).length>0&&(s="aal2"),{data:{currentLevel:a,nextLevel:s,currentAuthenticationMethods:i.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{let{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await uo(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new cN})})}catch(e){if(cP(e))return this._returnResult({data:null,error:e});throw e}}async _approveAuthorization(e,t){try{return await this._useSession(async t=>{let{data:{session:r},error:n}=t;if(n)return this._returnResult({data:null,error:n});if(!r)return this._returnResult({data:null,error:new cN});let i=await uo(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return i.data&&i.data.redirect_url,i})}catch(e){if(cP(e))return this._returnResult({data:null,error:e});throw e}}async _denyAuthorization(e,t){try{return await this._useSession(async t=>{let{data:{session:r},error:n}=t;if(n)return this._returnResult({data:null,error:n});if(!r)return this._returnResult({data:null,error:new cN});let i=await uo(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return i.data&&i.data.redirect_url,i})}catch(e){if(cP(e))return this._returnResult({data:null,error:e});throw e}}async _listOAuthGrants(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await uo(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new cN})})}catch(e){if(cP(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{let{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?(await uo(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new cN})})}catch(e){if(cP(e))return this._returnResult({data:null,error:e});throw e}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(t=>t.kid===e);if(r)return r;let n=Date.now();if((r=this.jwks.keys.find(t=>t.kid===e))&&this.jwks_cached_at+6e5>n)return r;let{data:i,error:a}=await uo(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return i.keys&&0!==i.keys.length&&(this.jwks=i,this.jwks_cached_at=n,r=i.keys.find(t=>t.kid===e))?r:null}async getClaims(e,t={}){try{var r;let n,i=e;if(!i){let{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});i=e.session.access_token}let{header:a,payload:s,signature:o,raw:{header:l,payload:c}}=c5(i);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw Error("JWT has expired")}(s.exp);let u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks);if(!u){let{error:e}=await this.getUser(i);if(e)throw e;return{data:{claims:s,header:a,signature:o},error:null}}let d=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw Error("Invalid alg claim")}}(a.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,(r=`${l}.${c}`,n=[],!function(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){let t=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|t)+65536,r+=1}!function(e,t){if(e<=127)return t(e);if(e<=2047){t(192|e>>6),t(128|63&e);return}if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|63&e);return}if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|63&e);return}throw Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}(n,t)}}(r,e=>n.push(e)),new Uint8Array(n))))throw new cK("Invalid JWT signature");return{data:{claims:s,header:a,signature:o},error:null}}catch(e){if(cP(e))return this._returnResult({data:null,error:e});throw e}}}uj.nextInstanceID={};let u$=uj,uN="";uN="u">typeof Deno?"deno":"u">typeof document?"web":"u">typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let uU={headers:{"X-Client-Info":`supabase-js-${uN}/2.91.1`}},uD={schema:"public"},uL={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uM={};function uH(e){return(uH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function uB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uW(Object(r),!0).forEach(function(t){!function(e,t,r){var n;(n=function(e,t){if("object"!=uH(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=uH(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==uH(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var uK=class extends u${constructor(e){super(e)}},uq=class{constructor(e,t,r){var n,i,a;this.supabaseUrl=e,this.supabaseKey=t;const s=function(e){let t=null==e?void 0:e.trim();if(!t)throw Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t.endsWith("/")?t:t+"/")}catch(e){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(e);if(!t)throw Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,l=function(e,t){var r,n;let{db:i,auth:a,realtime:s,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:uB(uB({},l),i),auth:uB(uB({},c),a),realtime:uB(uB({},u),s),storage:{},global:uB(uB(uB({},d),o),{},{headers:uB(uB({},null!=(r=null==d?void 0:d.headers)?r:{}),null!=(n=null==o?void 0:o.headers)?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=r?r:{},{db:uD,realtime:uM,auth:uB(uB({},uL),{},{storageKey:o}),global:uU});this.storageKey=null!=(n=l.auth.storageKey)?n:"",this.headers=null!=(i=l.global.headers)?i:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!=(a=l.auth)?a:{},this.headers,l.global.fetch),this.fetch=((e,t,r)=>{let n=r?(...e)=>r(...e):(...e)=>fetch(...e),i=Headers;return async(r,a)=>{var s;let o=null!=(s=await t())?s:e,l=new i(null==a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),n(r,uB(uB({},a),{},{headers:l}))}})(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(uB({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new ly(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new cS(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new lu(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();let{data:r}=await this.auth.getSession();return null!=(e=null==(t=r.session)?void 0:t.access_token)?e:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:a,flowType:s,lock:o,debug:l,throwOnError:c},u,d){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uK({url:this.authUrl.href,headers:uB(uB({},h),u),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,flowType:s,lock:o,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new lL(this.realtimeUrl.href,uB(uB({},e),{},{params:uB(uB({},{apikey:this.supabaseKey}),null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){("TOKEN_REFRESHED"===e||"SIGNED_IN"===e)&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0)}};let uV=(e,t,r)=>new uq(e,t,r);(function(){let e=globalThis.process;if(!e)return!1;let t=e.version;if(null==t)return!1;let r=t.match(/^v(\d+)\./);return!!r&&18>=parseInt(r[1],10)})()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");let uJ=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/;function uz(e){for(let[t,r]of Object.entries(e))null===r&&delete e[t],"string"==typeof r&&uJ.test(r)&&!isNaN(Date.parse(r))&&(e[t]=new Date(r));return e}var uF=e.i(190894),uG="function"==typeof setImmediate?setImmediate:"object"==typeof scheduler&&"function"==typeof scheduler.postTask?scheduler.postTask.bind(scheduler):setTimeout,uX="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),uY=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function uQ(e,t){var r,n,i=0,a=[];if(t<=0||t>e.length)throw Error("Illegal len: "+t);for(;i<t;){if(r=255&e[i++],a.push(uX[r>>2&63]),r=(3&r)<<4,i>=t||(r|=(n=255&e[i++])>>4&15,a.push(uX[63&r]),r=(15&n)<<2,i>=t)){a.push(uX[63&r]);break}r|=(n=255&e[i++])>>6&3,a.push(uX[63&r]),a.push(uX[63&n])}return a.join("")}var uZ=16,u0=10,u1=[0x243f6a88,0x85a308d3,0x13198a2e,0x3707344,0xa4093822,0x299f31d0,0x82efa98,0xec4e6c89,0x452821e6,0x38d01377,0xbe5466cf,0x34e90c6c,0xc0ac29b7,0xc97c50dd,0x3f84d5b5,0xb5470917,0x9216d5d9,0x8979fb1b],u2=[0xd1310ba6,0x98dfb5ac,0x2ffd72db,0xd01adfb7,0xb8e1afed,0x6a267e96,0xba7c9045,0xf12c7f99,0x24a19947,0xb3916cf7,0x801f2e2,0x858efc16,0x636920d8,0x71574e69,0xa458fea3,0xf4933d7e,0xd95748f,0x728eb658,0x718bcd58,0x82154aee,0x7b54a41d,0xc25a59b5,0x9c30d539,0x2af26013,0xc5d1b023,0x286085f0,0xca417918,0xb8db38ef,0x8e79dcb0,0x603a180e,0x6c9e0e8b,0xb01e8a3e,0xd71577c1,0xbd314b27,0x78af2fda,0x55605c60,0xe65525f3,0xaa55ab94,0x57489862,0x63e81440,0x55ca396a,0x2aab10b6,0xb4cc5c34,0x1141e8ce,0xa15486af,0x7c72e993,0xb3ee1411,0x636fbc2a,0x2ba9c55d,0x741831f6,0xce5c3e16,0x9b87931e,0xafd6ba33,0x6c24cf5c,0x7a325381,0x28958677,0x3b8f4898,0x6b4bb9af,0xc4bfe81b,0x66282193,0x61d809cc,0xfb21a991,0x487cac60,0x5dec8032,0xef845d5d,0xe98575b1,0xdc262302,0xeb651b88,0x23893e81,0xd396acc5,0xf6d6ff3,0x83f44239,0x2e0b4482,0xa4842004,0x69c8f04a,0x9e1f9b5e,0x21c66842,0xf6e96c9a,0x670c9c61,0xabd388f0,0x6a51a0d2,0xd8542f68,0x960fa728,0xab5133a3,0x6eef0b6c,0x137a3be4,0xba3bf050,0x7efb2a98,0xa1f1651d,0x39af0176,0x66ca593e,0x82430e88,0x8cee8619,0x456f9fb4,0x7d84a5c3,0x3b8b5ebe,0xe06f75d8,0x85c12073,0x401a449f,0x56c16aa6,0x4ed3aa62,0x363f7706,0x1bfedf72,0x429b023d,0x37d0d724,0xd00a1248,0xdb0fead3,0x49f1c09b,0x75372c9,0x80991b7b,0x25d479d8,0xf6e8def7,0xe3fe501a,0xb6794c3b,0x976ce0bd,0x4c006ba,0xc1a94fb6,0x409f60c4,0x5e5c9ec2,0x196a2463,0x68fb6faf,0x3e6c53b5,0x1339b2eb,0x3b52ec6f,0x6dfc511f,0x9b30952c,0xcc814544,0xaf5ebd09,0xbee3d004,0xde334afd,0x660f2807,0x192e4bb3,0xc0cba857,0x45c8740f,0xd20b5f39,0xb9d3fbdb,0x5579c0bd,0x1a60320a,0xd6a100c6,0x402c7279,0x679f25fe,0xfb1fa3cc,0x8ea5e9f8,0xdb3222f8,0x3c7516df,0xfd616b15,0x2f501ec8,0xad0552ab,0x323db5fa,0xfd238760,0x53317b48,0x3e00df82,0x9e5c57bb,0xca6f8ca0,0x1a87562e,0xdf1769db,0xd542a8f6,0x287effc3,0xac6732c6,0x8c4f5573,0x695b27b0,0xbbca58c8,0xe1ffa35d,0xb8f011a0,0x10fa3d98,0xfd2183b8,0x4afcb56c,0x2dd1d35b,0x9a53e479,0xb6f84565,0xd28e49bc,0x4bfb9790,0xe1ddf2da,0xa4cb7e33,0x62fb1341,0xcee4c6e8,0xef20cada,0x36774c01,0xd07e9efe,0x2bf11fb4,0x95dbda4d,0xae909198,0xeaad8e71,0x6b93d5a0,0xd08ed1d0,0xafc725e0,0x8e3c5b2f,0x8e7594b7,0x8ff6e2fb,0xf2122b64,0x8888b812,0x900df01c,0x4fad5ea0,0x688fc31c,0xd1cff191,0xb3a8c1ad,0x2f2f2218,0xbe0e1777,0xea752dfe,0x8b021fa1,0xe5a0cc0f,0xb56f74e8,0x18acf3d6,0xce89e299,0xb4a84fe0,0xfd13e0b7,0x7cc43b81,0xd2ada8d9,0x165fa266,0x80957705,0x93cc7314,0x211a1477,0xe6ad2065,0x77b5fa86,0xc75442f5,0xfb9d35cf,0xebcdaf0c,0x7b3e89a0,0xd6411bd3,0xae1e7e49,2428461,0x2071b35e,0x226800bb,0x57b8e0af,0x2464369b,0xf009b91e,0x5563911d,0x59dfa6aa,0x78c14389,0xd95a537f,0x207d5ba2,0x2e5b9c5,0x83260376,0x6295cfa9,0x11c81968,0x4e734a41,0xb3472dca,0x7b14a94a,0x1b510052,0x9a532915,0xd60f573f,0xbc9bc6e4,0x2b60a476,0x81e67400,0x8ba6fb5,0x571be91f,0xf296ec6b,0x2a0dd915,0xb6636521,0xe7b9f9b6,0xff34052e,0xc5855664,0x53b02d5d,0xa99f8fa1,0x8ba4799,0x6e85076a,0x4b7a70e9,0xb5b32944,0xdb75092e,0xc4192623,290971e4,0x49a7df7d,0x9cee60b8,0x8fedb266,0xecaa8c71,0x699a17ff,0x5664526c,0xc2b19ee1,0x193602a5,0x75094c29,0xa0591340,0xe4183a3e,0x3f54989a,0x5b429d65,0x6b8fe4d6,0x99f73fd6,0xa1d29c07,0xefe830f5,0x4d2d38e6,0xf0255dc1,0x4cdd2086,0x8470eb26,0x6382e9c6,0x21ecc5e,0x9686b3f,0x3ebaefc9,0x3c971814,0x6b6a70a1,0x687f3584,0x52a0e286,0xb79c5305,0xaa500737,0x3e07841c,0x7fdeae5c,0x8e7d44ec,0x5716f2b8,0xb03ada37,0xf0500c0d,0xf01c1f04,0x200b3ff,0xae0cf51a,0x3cb574b2,0x25837a58,0xdc0921bd,0xd19113f9,0x7ca92ff6,0x94324773,0x22f54701,0x3ae5e581,0x37c2dadc,0xc8b57634,0x9af3dda7,0xa9446146,0xfd0030e,0xecc8c73e,0xa4751e41,0xe238cd99,0x3bea0e2f,0x3280bba1,0x183eb331,0x4e548b38,0x4f6db908,0x6f420d03,0xf60a04bf,0x2cb81290,0x24977c79,0x5679b072,0xbcaf89af,0xde9a771f,0xd9930810,0xb38bae12,0xdccf3f2e,0x5512721f,0x2e6b7124,0x501adde6,0x9f84cd87,0x7a584718,0x7408da17,0xbc9f9abc,0xe94b7d8c,0xec7aec3a,0xdb851dfa,0x63094366,0xc464c3d2,0xef1c1847,0x3215d908,0xdd433b37,0x24c2ba16,0x12a14d43,0x2a65c451,0x50940002,0x133ae4dd,0x71dff89e,0x10314e55,0x81ac77d6,0x5f11199b,0x43556f1,0xd7a3c76b,0x3c11183b,0x5924a509,0xf28fe6ed,0x97f1fbfa,0x9ebabf2c,0x1e153c6e,0x86e34570,0xeae96fb1,0x860e5e0a,0x5a3e2ab3,0x771fe71c,0x4e3d06fa,0x2965dcb9,0x99e71d0f,0x803e89d6,0x5266c825,0x2e4cc978,0x9c10b36a,0xc6150eba,0x94e2ea78,0xa5fc3c53,0x1e0a2df4,0xf2f74ea7,0x361d2b3d,0x1939260f,0x19c27960,0x5223a708,0xf71312b6,0xebadfe6e,0xeac31f66,0xe3bc4595,0xa67bc883,0xb17f37d1,0x18cff28,0xc332ddef,0xbe6c5aa5,0x65582185,0x68ab9802,0xeecea50f,0xdb2f953b,0x2aef7dad,0x5b6e2f84,0x1521b628,0x29076170,0xecdd4775,0x619f1510,0x13cca830,0xeb61bd96,0x334fe1e,0xaa0363cf,0xb5735c90,0x4c70a239,0xd59e9e0b,0xcbaade14,0xeecc86bc,0x60622ca7,0x9cab5cab,0xb2f3846e,0x648b1eaf,0x19bdf0ca,0xa02369b9,0x655abb50,0x40685a32,0x3c2ab4b3,0x319ee9d5,0xc021b8f7,0x9b540b19,0x875fa099,0x95f7997e,0x623d7da8,0xf837889a,0x97e32d77,0x11ed935f,0x16681281,0xe358829,0xc7e61fd6,0x96dedfa1,0x7858ba99,0x57f584a5,0x1b227263,0x9b83c3ff,0x1ac24696,0xcdb30aeb,0x532e3054,0x8fd948e4,0x6dbc3128,0x58ebf2ef,0x34c6ffea,0xfe28ed61,0xee7c3c73,0x5d4a14d9,0xe864b7e3,0x42105d14,0x203e13e0,0x45eee2b6,0xa3aaabea,0xdb6c4f15,0xfacb4fd0,0xc742f442,0xef6abbb5,0x654f3b1d,0x41cd2105,0xd81e799e,0x86854dc7,0xe44b476a,0x3d816250,0xcf62a1f2,0x5b8d2646,0xfc8883a0,0xc1c7b6a3,0x7f1524c3,0x69cb7492,0x47848a0b,0x5692b285,0x95bbf00,0xad19489d,0x1462b174,0x23820e00,0x58428d2a,0xc55f5ea,0x1dadf43e,0x233f7061,0x3372f092,0x8d937e41,0xd65fecf1,0x6c223bdb,0x7cde3759,0xcbee7460,0x4085f2a7,0xce77326e,0xa6078084,0x19f8509e,0xe8efd855,0x61d99735,0xa969a7aa,0xc50c06c2,0x5a04abfc,0x800bcadc,0x9e447a2e,0xc3453484,0xfdd56705,0xe1e9ec9,0xdb73dbd3,0x105588cd,0x675fda79,0xe3674340,0xc5c43465,0x713e38d8,0x3d28f89e,0xf16dff20,0x153e21e7,0x8fb03d4a,0xe6e39f2b,0xdb83adf7,0xe93d5a68,0x948140f7,0xf64c261c,0x94692934,0x411520f7,0x7602d4f7,0xbcf46b2e,0xd4a20068,0xd4082471,0x3320f46a,0x43b7d4b7,0x500061af,0x1e39f62e,0x97244546,0x14214f74,0xbf8b8840,0x4d95fc1d,0x96b591af,0x70f4ddd3,0x66a02f45,0xbfbc09ec,0x3bd9785,0x7fac6dd0,0x31cb8504,0x96eb27b3,0x55fd3941,0xda2547e6,0xabca0a9a,0x28507825,0x530429f4,0xa2c86da,0xe9b66dfb,0x68dc1462,0xd7486900,0x680ec0a4,0x27a18dee,0x4f3ffea2,0xe887ad8c,0xb58ce006,0x7af4d6b6,0xaace1e7c,0xd3375fec,0xce78a399,0x406b2a42,0x20fe9e35,0xd9f385b9,0xee39d7ab,0x3b124e8b,0x1dc9faf7,0x4b6d1856,0x26a36631,0xeae397b2,0x3a6efa74,0xdd5b4332,0x6841e7f7,0xca7820fb,0xfb0af54e,0xd8feb397,0x454056ac,0xba489527,0x55533a3a,0x20838d87,0xfe6ba9b7,0xd096954b,0x55a867bc,0xa1159a58,0xcca92963,0x99e1db33,0xa62a4a56,0x3f3125f9,0x5ef47e1c,0x9029317c,0xfdf8e802,0x4272f70,0x80bb155c,0x5282ce3,0x95c11548,0xe4c66d22,0x48c1133f,0xc70f86dc,0x7f9c9ee,0x41041f0f,0x404779a4,0x5d886e17,0x325f51eb,0xd59bc0d1,0xf2bcc18f,0x41113564,0x257b7834,0x602a9c60,0xdff8e8a3,0x1f636c1b,0xe12b4c2,0x2e1329e,0xaf664fd1,0xcad18115,0x6b2395e0,0x333e92e1,0x3b240b62,0xeebeb922,0x85b2a20e,0xe6ba0d99,0xde720c8c,0x2da2f728,0xd0127845,0x95b794fd,0x647d0862,0xe7ccf5f0,0x5449a36f,0x877d48fa,0xc39dfd27,0xf33e8d1e,0xa476341,0x992eff74,0x3a6f6eab,0xf4f8fd37,0xa812dc60,0xa1ebddf8,0x991be14c,0xdb6e6b0d,0xc67b5510,0x6d672c37,0x2765d43b,0xdcd0e804,0xf1290dc7,0xcc00ffa3,0xb5390f92,0x690fed0b,0x667b9ffb,0xcedb7d9c,0xa091cf0b,0xd9155ea3,0xbb132f88,0x515bad24,0x7b9479bf,0x763bd6eb,0x37392eb3,0xcc115979,0x8026e297,0xf42e312d,0x6842ada7,0xc66a2b3b,0x12754ccc,0x782ef11c,0x6a124237,0xb79251e7,0x6a1bbe6,0x4bfb6350,0x1a6b1018,0x11caedfa,0x3d25bdd8,0xe2e1c3c9,0x44421659,0xa121386,0xd90cec6e,0xd5abea2a,0x64af674e,0xda86a85f,0xbebfe988,0x64e4c3fe,0x9dbc8057,0xf0f7c086,0x60787bf8,0x6003604d,0xd1fd8346,0xf6381fb0,0x7745ae04,0xd736fccc,0x83426b33,0xf01eab71,0xb0804187,0x3c005e5f,0x77a057be,0xbde8ae24,0x55464299,0xbf582e61,0x4e58f48f,0xf2ddfda2,0xf474ef38,0x8789bdc2,0x5366f9c3,0xc8b38e74,0xb475f255,0x46fcd9b9,0x7aeb2661,0x8b1ddf84,0x846a0e79,0x915f95e2,0x466e598e,0x20b45770,0x8cd55591,0xc902de4c,0xb90bace1,0xbb8205d0,0x11a86248,0x7574a99e,0xb77f19b6,0xe0a9dc09,0x662d09a1,0xc4324633,0xe85a1f02,0x9f0be8c,0x4a99a025,0x1d6efe10,0x1ab93d1d,0xba5a4df,0xa186f20f,0x2868f169,0xdcb7da83,0x573906fe,0xa1e2ce9b,0x4fcd7f52,0x50115e01,0xa70683fa,0xa002b5c4,0xde6d027,0x9af88c27,0x773f8641,0xc3604c06,0x61a806b5,0xf0177a28,0xc0f586e0,6314154,0x30dc7d62,0x11e69ed7,0x2338ea63,0x53c2dd94,0xc2c21634,0xbbcbee56,0x90bcb6de,0xebfc7da1,0xce591d76,0x6f05e409,0x4b7c0188,0x39720a3d,0x7c927c24,0x86e3725f,0x724d9db9,0x1ac15bb4,0xd39eb8fc,0xed545578,0x8fca5b5,0xd83d7cd3,0x4dad0fc4,0x1e50ef5e,0xb161e6f8,0xa28514d9,0x6c51133c,0x6fd5c7e7,0x56e14ec4,0x362abfce,0xddc6c837,0xd79a3234,0x92638212,0x670efa8e,0x406000e0,0x3a39ce37,0xd3faf5cf,0xabc27737,0x5ac52d1b,0x5cb0679e,0x4fa33742,0xd3822740,0x99bc9bbe,0xd5118e9d,0xbf0f7315,0xd62d1c7e,0xc700c47b,0xb78c1b6b,0x21a19045,0xb26eb1be,0x6a366eb4,0x5748ab2f,0xbc946e79,0xc6a376d2,0x6549c2c8,0x530ff8ee,0x468dde7d,0xd5730a1d,0x4cd04dc6,0x2939bbdb,0xa9ba4650,0xac9526e8,0xbe5ee304,0xa1fad5f0,0x6a2d519a,0x63ef8ce2,0x9a86ee22,0xc089c2b8,0x43242ef6,0xa51e03aa,0x9cf2d0a4,0x83c061ba,0x9be96a4d,0x8fe51550,0xba645bd6,0x2826a2f9,0xa73a3ae1,0x4ba99586,0xef5562e9,0xc72fefd3,0xf752f7da,0x3f046f69,0x77fa0a59,0x80e4a915,0x87b08601,0x9b09e6ad,0x3b3ee593,0xe990fd5a,0x9e34d797,0x2cf0b7d9,0x22b8b51,0x96d5ac3a,0x17da67d,0xd1cf3ed6,0x7c7d2d28,0x1f9f25cf,0xadf2b89b,0x5ad6b472,0x5a88f54c,0xe029ac71,0xe019a5e6,0x47b0acfd,0xed93fa9b,0xe8d3c48d,0x283b57cc,0xf8d56629,0x79132e28,0x785f0191,0xed756055,0xf7960e44,0xe3d35e8c,0x15056dd4,0x88f46dba,0x3a16125,0x564f0bd,0xc3eb9e15,0x3c9057a2,0x97271aec,0xa93a072a,0x1b3f6d9b,0x1e6321f5,0xf59c66fb,0x26dcf319,0x7533d928,0xb155fdf5,0x3563482,0x8aba3cbb,0x28517711,0xc20ad9f8,0xabcc5167,0xccad925f,0x4de81751,0x3830dc8e,0x379d5862,0x9320f991,0xea7a90c2,0xfb3e7bce,0x5121ce64,0x774fbe32,0xa8b6e37e,0xc3293d46,0x48de5369,0x6413e680,0xa2ae0810,0xdd6db224,0x69852dfd,0x9072166,0xb39a460a,0x6445c0dd,0x586cdecf,0x1c20c8ae,0x5bbef7dd,0x1b588d40,0xccd2017f,0x6bb4e3bb,0xdda26a7e,0x3a59ff45,0x3e350a44,0xbcb4cdd5,0x72eacea8,0xfa6484bb,0x8d6612ae,0xbf3c6f47,0xd29be463,0x542f5d9e,0xaec2771b,0xf64e6370,0x740e0d8d,0xe75b1357,0xf8721671,0xaf537d5d,0x4040cb08,0x4eb4e2cc,0x34d2466a,0x115af84,3786409e3,0x95983a1d,0x6b89fb4,0xce6ea048,0x6f3f3b82,0x3520ab82,0x11a1d4b,0x277227f8,0x611560b1,0xe7933fdc,0xbb3a792b,0x344525bd,0xa08839e1,0x51ce794b,0x2f32c9b7,0xa01fbac9,0xe01cc87e,0xbcc7d1f6,0xcf0111c3,0xa1e8aac7,0x1a908749,0xd44fbd9a,0xd0dadecb,0xd50ada38,0x339c32a,0xc6913667,0x8df9317c,0xe0b12b4f,0xf79e59b7,0x43f5bb3a,0xf2d519ff,0x27d9459c,0xbf97222c,0x15e6fc2a,0xf91fc71,0x9b941525,0xfae59361,0xceb69ceb,0xc2a86459,0x12baa8d1,0xb6c1075e,0xe3056a0c,0x10d25065,0xcb03a442,0xe0ec6e0e,0x1698db3b,0x4c98a0be,0x3278e964,0x9f1f9532,0xe0d392df,0xd3a0342b,0x8971f21e,0x1b0a7441,0x4ba3348c,0xc5be7120,0xc37632d8,0xdf359f8d,0x9b992f2e,0xe60b6f47,0xfe3f11d,0xe54cda54,0x1edad891,0xce6279cf,0xcd3e7e6f,0x1618b166,0xfd2c1d05,0x848fd2c5,0xf6fb2299,0xf523f357,0xa6327623,0x93a83531,0x56cccd02,0xacf08162,0x5a75ebb5,0x6e163697,0x88d273cc,0xde966292,0x81b949d0,0x4c50901b,0x71c65614,0xe6c6c7bd,0x327a140a,0x45e1d006,0xc3f27b9a,0xc9aa53fd,0x62a80f00,0xbb25bfe2,0x35bdd2f6,0x71126905,0xb2040222,0xb6cbcf7c,0xcd769c2b,0x53113ec0,0x1640e3d3,0x38abbd60,0x2547adf0,0xba38209c,0xf746ce76,0x77afa1c5,0x20756060,0x85cbfe4e,0x8ae88dd8,0x7aaaf9b0,0x4cf9aa7e,0x1948c25c,0x2fb8a8c,0x1c36ae4,0xd6ebe1f9,0x90d4f869,0xa65cdea0,0x3f09252d,0xc208e69f,0xb74e6132,0xce77e25b,0x578fdfe3,0x3ac372e6],u5=[0x4f727068,0x65616e42,0x65686f6c,0x64657253,0x63727944,0x6f756274];function u6(e,t,r,n){var i=e[t],a=e[t+1];return i^=r[0],a^=(n[i>>>24]+n[256|i>>16&255]^n[512|i>>8&255])+n[768|255&i]^r[1],i^=(n[a>>>24]+n[256|a>>16&255]^n[512|a>>8&255])+n[768|255&a]^r[2],a^=(n[i>>>24]+n[256|i>>16&255]^n[512|i>>8&255])+n[768|255&i]^r[3],i^=(n[a>>>24]+n[256|a>>16&255]^n[512|a>>8&255])+n[768|255&a]^r[4],a^=(n[i>>>24]+n[256|i>>16&255]^n[512|i>>8&255])+n[768|255&i]^r[5],i^=(n[a>>>24]+n[256|a>>16&255]^n[512|a>>8&255])+n[768|255&a]^r[6],a^=(n[i>>>24]+n[256|i>>16&255]^n[512|i>>8&255])+n[768|255&i]^r[7],i^=(n[a>>>24]+n[256|a>>16&255]^n[512|a>>8&255])+n[768|255&a]^r[8],a^=(n[i>>>24]+n[256|i>>16&255]^n[512|i>>8&255])+n[768|255&i]^r[9],i^=(n[a>>>24]+n[256|a>>16&255]^n[512|a>>8&255])+n[768|255&a]^r[10],a^=(n[i>>>24]+n[256|i>>16&255]^n[512|i>>8&255])+n[768|255&i]^r[11],i^=(n[a>>>24]+n[256|a>>16&255]^n[512|a>>8&255])+n[768|255&a]^r[12],a^=(n[i>>>24]+n[256|i>>16&255]^n[512|i>>8&255])+n[768|255&i]^r[13],i^=(n[a>>>24]+n[256|a>>16&255]^n[512|a>>8&255])+n[768|255&a]^r[14],a^=(n[i>>>24]+n[256|i>>16&255]^n[512|i>>8&255])+n[768|255&i]^r[15],i^=(n[a>>>24]+n[256|a>>16&255]^n[512|a>>8&255])+n[768|255&a]^r[16],e[t]=a^r[17],e[t+1]=i,e}function u3(e,t){for(var r=0,n=0;r<4;++r)n=n<<8|255&e[t],t=(t+1)%e.length;return{key:n,offp:t}}function u4(e,t,r){for(var n,i=0,a=[0,0],s=t.length,o=r.length,l=0;l<s;l++)i=(n=u3(e,i)).offp,t[l]=t[l]^n.key;for(l=0;l<s;l+=2)a=u6(a,0,t,r),t[l]=a[0],t[l+1]=a[1];for(l=0;l<o;l+=2)a=u6(a,0,t,r),r[l]=a[0],r[l+1]=a[1]}function u8(e,t,r,n,i){var a,s,o=u5.slice(),l=o.length;if(r<4||r>31){if(s=Error("Illegal number of rounds (4-31): "+r),n)return void uG(n.bind(this,s));throw s}if(t.length!==uZ){if(s=Error("Illegal salt length: "+t.length+" != "+uZ),n)return void uG(n.bind(this,s));throw s}r=1<<r>>>0;var c,u,d,h=0;function p(){if(i&&i(h/r),h<r)for(var a=Date.now();h<r&&(h+=1,u4(e,c,u),u4(t,c,u),!(Date.now()-a>100)););else{for(h=0;h<64;h++)for(d=0;d<l>>1;d++)u6(o,d<<1,c,u);var s=[];for(h=0;h<l;h++)s.push((o[h]>>24&255)>>>0),s.push((o[h]>>16&255)>>>0),s.push((o[h]>>8&255)>>>0),s.push((255&o[h])>>>0);return n?void n(null,s):s}n&&uG(p)}if("function"==typeof Int32Array?(c=new Int32Array(u1),u=new Int32Array(u2)):(c=u1.slice(),u=u2.slice()),!function(e,t,r,n){for(var i,a=0,s=[0,0],o=r.length,l=n.length,c=0;c<o;c++)a=(i=u3(t,a)).offp,r[c]=r[c]^i.key;for(c=0,a=0;c<o;c+=2)a=(i=u3(e,a)).offp,s[0]^=i.key,a=(i=u3(e,a)).offp,s[1]^=i.key,s=u6(s,0,r,n),r[c]=s[0],r[c+1]=s[1];for(c=0;c<l;c+=2)a=(i=u3(e,a)).offp,s[0]^=i.key,a=(i=u3(e,a)).offp,s[1]^=i.key,s=u6(s,0,r,n),n[c]=s[0],n[c+1]=s[1]}(t,e,c,u),void 0!==n)p();else for(;;)if(void 0!==(a=p()))return a||[]}function u9(e,t,r,n){if("string"!=typeof e||"string"!=typeof t){if(i=Error("Invalid string / salt: Not a string"),r)return void uG(r.bind(this,i));throw i}if("$"!==t.charAt(0)||"2"!==t.charAt(1)){if(i=Error("Invalid salt version: "+t.substring(0,2)),r)return void uG(r.bind(this,i));throw i}if("$"===t.charAt(2))a="\0",s=3;else{if("a"!==(a=t.charAt(2))&&"b"!==a&&"y"!==a||"$"!==t.charAt(3)){if(i=Error("Invalid salt revision: "+t.substring(2,4)),r)return void uG(r.bind(this,i));throw i}s=4}if(t.charAt(s+2)>"$"){if(i=Error("Missing salt rounds"),r)return void uG(r.bind(this,i));throw i}var i,a,s,o=10*parseInt(t.substring(s,s+1),10)+parseInt(t.substring(s+1,s+2),10),l=t.substring(s+3,s+25),c=function(e){for(var t,r,n=0,i=Array(function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:(64512&r)==55296&&(64512&e.charCodeAt(n+1))==56320?(++n,t+=4):t+=3;return t}(e)),a=0,s=e.length;a<s;++a)(t=e.charCodeAt(a))<128?i[n++]=t:(t<2048?i[n++]=t>>6|192:((64512&t)==55296&&(64512&(r=e.charCodeAt(a+1)))==56320?(t=65536+((1023&t)<<10)+(1023&r),++a,i[n++]=t>>18|240,i[n++]=t>>12&63|128):i[n++]=t>>12|224,i[n++]=t>>6&63|128),i[n++]=63&t|128);return i}(e+=a>="a"?"\0":""),u=function(e,t){var r,n,i,a,s,o=0,l=e.length,c=0,u=[];if(t<=0)throw Error("Illegal len: "+t);for(;o<l-1&&c<t&&(r=(s=e.charCodeAt(o++))<uY.length?uY[s]:-1,n=(s=e.charCodeAt(o++))<uY.length?uY[s]:-1,-1!=r&&-1!=n)&&(a=r<<2>>>0|(48&n)>>4,u.push(String.fromCharCode(a)),!(++c>=t||o>=l||-1==(i=(s=e.charCodeAt(o++))<uY.length?uY[s]:-1)||(a=(15&n)<<4>>>0|(60&i)>>2,u.push(String.fromCharCode(a)),++c>=t||o>=l)));){;a=(3&i)<<6>>>0|((s=e.charCodeAt(o++))<uY.length?uY[s]:-1),u.push(String.fromCharCode(a)),++c}var d=[];for(o=0;o<c;o++)d.push(u[o].charCodeAt(0));return d}(l,uZ);function d(e){var t=[];return t.push("$2"),a>="a"&&t.push(a),t.push("$"),o<10&&t.push("0"),t.push(o.toString()),t.push("$"),t.push(uQ(u,u.length)),t.push(uQ(e,4*u5.length-1)),t.join("")}if(void 0===r)return d(u8(c,u,o));u8(c,u,o,function(e,t){e?r(e,null):r(null,d(t))},n)}let{handlers:u7,signIn:de,signOut:dt,auth:dr}=function(e){if("function"==typeof e){let t=async t=>{let r=await e(t);return oK(r),oD(oB(t),r)};return{handlers:{GET:t,POST:t},auth:o5(e,e=>oK(e)),signIn:async(t,r,n)=>{let i=await e(void 0);return oK(i),lr(t,r,n,i)},signOut:async t=>{let r=await e(void 0);return oK(r),ln(t,r)},unstable_update:async t=>{let r=await e(void 0);return oK(r),li(t,r)}}}oK(e);let t=t=>oD(oB(t),e);return{handlers:{GET:t,POST:t},auth:o5(e),signIn:(t,r,n)=>lr(t,r,n,e),signOut:t=>ln(t,e),unstable_update:t=>li(t,e)}}({providers:[{id:"google",name:"Google",type:"oidc",issuer:"https://accounts.google.com",style:{brandColor:"#1a73e8"},options:{clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET}},{id:"credentials",name:"Credentials",type:"credentials",credentials:{},authorize:()=>null,options:{name:"Credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},authorize:async e=>{var t,r;if(!e?.email||!e?.password)return null;let n=e.email,i=e.password,a=uV("https://zjwhboaajjvyvestjhoy.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY),{data:s}=await a.from("users").select("*").eq("email",n).single();return s&&s.password_hash&&await (t=i,r=s.password_hash,new Promise(function(e,n){!function(e){"string"!=typeof t||"string"!=typeof r?uG(e.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof r))):60!==r.length?uG(e.bind(this,null,!1)):function(e,t,r,n){function i(r){"string"==typeof e&&"number"==typeof t?function(e,t,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof e&&(r=e,e=void 0),void 0===e)e=u0;else if("number"!=typeof e)throw Error("illegal arguments: "+typeof e);function n(t){uG(function(){try{t(null,function(e,t){if("number"!=typeof(e=e||u0))throw Error("Illegal arguments: "+typeof e+", undefined");e<4?e=4:e>31&&(e=31);var r=[];return r.push("$2b$"),e<10&&r.push("0"),r.push(e.toString()),r.push("$"),r.push(uQ(function(e){try{return crypto.getRandomValues(new Uint8Array(e))}catch{}try{return uF.default.randomBytes(e)}catch{}!0;throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative")}(uZ),uZ)),r.join("")}(e))}catch(e){t(e)}})}if(!r)return new Promise(function(e,t){n(function(r,n){r?t(r):e(n)})});if("function"!=typeof r)throw Error("Illegal callback: "+typeof r);n(r)}(t,function(t,i){u9(e,i,r,n)}):"string"==typeof e&&"string"==typeof t?u9(e,t,r,n):uG(r.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!r)return new Promise(function(e,t){i(function(r,n){r?t(r):e(n)})});if("function"!=typeof r)throw Error("Illegal callback: "+typeof r);i(r)}(t,r.substring(0,29),function(t,n){t?e(t):e(null,function(e,t){for(var r=e.length^t.length,n=0;n<e.length;++n)r|=e.charCodeAt(n)^t.charCodeAt(n);return 0===r}(n,r))},void 0)}(function(t,r){t?n(t):e(r)})}))?{id:s.id,email:s.email,name:s.name||s.full_name,image:s.image||s.avatar_url}:null}}}],adapter:function(e){let{url:t,secret:r}=e,n=uV(t,r,{db:{schema:"next_auth"},global:{headers:{"X-Client-Info":"@auth/supabase-adapter"}},auth:{persistSession:!1}});return{async createUser(e){let{data:t,error:r}=await n.from("users").insert({...e,emailVerified:e.emailVerified?.toISOString()}).select().single();if(r)throw r;return uz(t)},async getUser(e){let{data:t,error:r}=await n.from("users").select().eq("id",e).maybeSingle();if(r)throw r;return t?uz(t):null},async getUserByEmail(e){let{data:t,error:r}=await n.from("users").select().eq("email",e).maybeSingle();if(r)throw r;return t?uz(t):null},async getUserByAccount({providerAccountId:e,provider:t}){let{data:r,error:i}=await n.from("accounts").select("users (*)").match({provider:t,providerAccountId:e}).maybeSingle();if(i)throw i;return r&&r.users?uz(r.users):null},async updateUser(e){let{data:t,error:r}=await n.from("users").update({...e,emailVerified:e.emailVerified?.toISOString()}).eq("id",e.id).select().single();if(r)throw r;return uz(t)},async deleteUser(e){let{error:t}=await n.from("users").delete().eq("id",e);if(t)throw t},async linkAccount(e){let{error:t}=await n.from("accounts").insert(e);if(t)throw t},async unlinkAccount({providerAccountId:e,provider:t}){let{error:r}=await n.from("accounts").delete().match({provider:t,providerAccountId:e});if(r)throw r},async createSession({sessionToken:e,userId:t,expires:r}){let{data:i,error:a}=await n.from("sessions").insert({sessionToken:e,userId:t,expires:r.toISOString()}).select().single();if(a)throw a;return uz(i)},async getSessionAndUser(e){let{data:t,error:r}=await n.from("sessions").select("*, users(*)").eq("sessionToken",e).maybeSingle();if(r)throw r;if(!t)return null;let{users:i,...a}=t;return{user:uz(i),session:uz(a)}},async updateSession(e){let{data:t,error:r}=await n.from("sessions").update({...e,expires:e.expires?.toISOString()}).eq("sessionToken",e.sessionToken).select().single();if(r)throw r;return uz(t)},async deleteSession(e){let{error:t}=await n.from("sessions").delete().eq("sessionToken",e);if(t)throw t},async createVerificationToken(e){let{data:t,error:r}=await n.from("verification_tokens").insert({...e,expires:e.expires.toISOString()}).select().single();if(r)throw r;let{id:i,...a}=t;return uz(a)},async useVerificationToken({identifier:e,token:t}){let{data:r,error:i}=await n.from("verification_tokens").delete().match({identifier:e,token:t}).select().maybeSingle();if(i)throw i;if(!r)return null;let{id:a,...s}=r;return uz(s)}}}({url:"https://zjwhboaajjvyvestjhoy.supabase.co",secret:process.env.SUPABASE_SERVICE_ROLE_KEY}),callbacks:{session:async({session:e,token:t})=>(t&&e.user&&(e.user.id=t.sub),e),jwt:async({token:e,user:t})=>(t&&(e.sub=t.id),e)},session:{strategy:"jwt"},pages:{signIn:"/login"}}),dn=dr(e=>{if(e.nextUrl.pathname.startsWith("/dashboard")&&!e.auth)return ef.redirect(new URL("/login",e.url))});e.s(["config",0,{matcher:["/((?!api|_next/static|_next/image|favicon.ico).*)"]},"default",0,dn],999446);var di=e.i(999446);e.i(442823);let da={...di},ds="/middleware",dl=da.middleware||da.default;if("function"!=typeof dl)throw new class extends Error{constructor(e){super(e),this.stack=""}}(`The Middleware file "${ds}" must export a function named \`middleware\` or a default function.`);e.s(["default",0,e=>t_({...e,page:ds,handler:async(...e)=>{try{return await dl(...e)}catch(i){let t=e[0],r=new URL(t.url),n=r.pathname+r.search;throw await h(i,{path:n,method:t.method,headers:Object.fromEntries(t.headers.entries())},{routerKind:"Pages Router",routePath:"/proxy",routeType:"proxy",revalidateReason:void 0}),i}}})],906367)}]);

//# sourceMappingURL=%5Broot-of-the-server%5D__fe5e52c4._.js.map